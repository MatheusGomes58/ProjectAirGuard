/*! For license information please see main.04c6e93a.js.LICENSE.txt */
(()=>{var e={3361:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,s=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function h(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,g=1,v=0,y=0,_=0,b="";function w(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:m,column:g,length:s,return:""}}function S(e,t){return s(w("",null,null,"",null,null,0),e,{length:-e.length},t)}function k(){return _=y>0?u(b,--y):0,g--,10===_&&(g=1,m--),_}function E(){return _=y<v?u(b,y++):0,g++,10===_&&(g=1,m++),_}function I(){return u(b,y)}function T(){return y}function C(e,t){return d(b,e,t)}function x(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N(e){return m=g=1,v=h(b=e),y=0,[]}function P(e){return b="",e}function R(e){return a(C(y-1,D(91===e?e+2:40===e?e+1:e)))}function A(e){for(;(_=I())&&_<33;)E();return x(e)>2||x(_)>3?"":" "}function O(e,t){for(;--t&&E()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return C(e,T()+(t<6&&32==I()&&32==E()))}function D(e){for(;E();)switch(_){case e:return y;case 34:case 39:34!==e&&39!==e&&D(_);break;case 40:41===e&&D(e);break;case 92:E()}return y}function L(e,t){for(;E()&&e+_!==57&&(e+_!==84||47!==I()););return"/*"+C(t,y-1)+"*"+o(47===e?e:E())}function M(e){for(;!x(I());)E();return C(e,y)}var F="-ms-",U="-moz-",j="-webkit-",z="comm",V="rule",B="decl",q="@keyframes";function Z(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function W(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case B:return e.return=e.return||e.value;case z:return"";case q:return e.return=e.value+"{"+Z(e.children,r)+"}";case V:e.value=e.props.join(",")}return h(n=Z(e.children,r))?e.return=e.value+"{"+n+"}":""}function H(e){return P(K("",null,null,null,[""],e=N(e),0,[0],e))}function K(e,t,n,r,i,s,a,d,f){for(var m=0,g=0,v=a,y=0,_=0,b=0,w=1,S=1,C=1,x=0,N="",P=i,D=s,F=r,U=N;S;)switch(b=x,x=E()){case 40:if(108!=b&&58==u(U,v-1)){-1!=c(U+=l(R(x),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:U+=R(x);break;case 9:case 10:case 13:case 32:U+=A(b);break;case 92:U+=O(T()-1,7);continue;case 47:switch(I()){case 42:case 47:p(Q(L(E(),T()),t,n),f);break;default:U+="/"}break;case 123*w:d[m++]=h(U)*C;case 125*w:case 59:case 0:switch(x){case 0:case 125:S=0;case 59+g:-1==C&&(U=l(U,/\f/g,"")),_>0&&h(U)-v&&p(_>32?Y(U+";",r,n,v-1):Y(l(U," ","")+";",r,n,v-2),f);break;case 59:U+=";";default:if(p(F=G(U,t,n,m,g,i,d,N,P=[],D=[],v),s),123===x)if(0===g)K(U,t,F,F,P,s,v,d,D);else switch(99===y&&110===u(U,3)?100:y){case 100:case 108:case 109:case 115:K(e,F,F,r&&p(G(e,F,F,0,0,i,d,N,i,P=[],v),D),i,D,v,d,r?P:D);break;default:K(U,F,F,F,[""],D,0,d,D)}}m=g=_=0,w=C=1,N=U="",v=a;break;case 58:v=1+h(U),_=b;default:if(w<1)if(123==x)--w;else if(125==x&&0==w++&&125==k())continue;switch(U+=o(x),x*w){case 38:C=g>0?1:(U+="\f",-1);break;case 44:d[m++]=(h(U)-1)*C,C=1;break;case 64:45===I()&&(U+=R(E())),y=I(),g=v=h(N=U+=M(T())),x++;break;case 45:45===b&&2==h(U)&&(w=0)}}return s}function G(e,t,n,r,o,s,c,u,h,p,m){for(var g=o-1,v=0===o?s:[""],y=f(v),_=0,b=0,S=0;_<r;++_)for(var k=0,E=d(e,g+1,g=i(b=c[_])),I=e;k<y;++k)(I=a(b>0?v[k]+" "+E:l(E,/&\f/g,v[k])))&&(h[S++]=I);return w(e,t,n,0===o?V:u,h,p,m)}function Q(e,t,n){return w(e,t,n,z,o(_),d(e,2,-2),0)}function Y(e,t,n,r){return w(e,t,n,B,d(e,0,r),d(e,r+1,-1),r)}var $=function(e,t,n){for(var r=0,i=0;r=i,i=I(),38===r&&12===i&&(t[n]=1),!x(i);)E();return C(e,y)},J=function(e,t){return P(function(e,t){var n=-1,r=44;do{switch(x(r)){case 0:38===r&&12===I()&&(t[n]=1),e[n]+=$(y-1,t,n);break;case 2:e[n]+=R(r);break;case 4:if(44===r){e[++n]=58===I()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=o(r)}}while(r=E());return e}(N(e),t))},X=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||X.get(n))&&!r){X.set(e,!0);for(var i=[],o=J(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return j+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return j+e+U+e+F+e+e;case 6828:case 4268:return j+e+F+e+e;case 6165:return j+e+F+"flex-"+e+e;case 5187:return j+e+l(e,/(\w+).+(:[^]+)/,j+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return j+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return j+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return j+e+F+l(e,"shrink","negative")+e;case 5292:return j+e+F+l(e,"basis","preferred-size")+e;case 6060:return j+"box-"+l(e,"-grow","")+j+e+F+l(e,"grow","positive")+e;case 4554:return j+l(e,/([^-])(transform)/g,"$1"+j+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,j+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,j+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+j+"$2-$3$1"+U+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+j)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===u(e,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return j+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return j+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return j+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return j+e+F+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case B:e.return=ne(e.value,e.length);break;case q:return Z([S(e,{value:l(e.value,"@","@"+j)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Z([S(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Z([S(e,{props:[l(t,/:(plac\w+)/,":"+j+"input-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var o,s,a={},l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)}));var c,u,d=[W,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=f(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([ee,te].concat(i,d));s=function(e,t,n,r){c=n,Z(H(e?e+"{"+t.styles+"}":t.styles),h),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:s};return p.sheet.hydrate(l),p}},9797:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{Z:()=>r})},1165:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>c,i:()=>o,w:()=>l});var r=n(2791),i=n(3361),o=(n(9140),n(2561),!0),s=r.createContext("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null);var a=s.Provider,l=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(s);return e(t,i,n)}))};o||(l=function(e){return function(t){var n=(0,r.useContext)(s);return null===n?(n=(0,i.Z)({key:"css"}),r.createElement(s.Provider,{value:n},e(t,n))):e(t,n)}});var c=r.createContext({})},2554:(e,t,n)=>{"use strict";n.d(t,{F4:()=>u,iv:()=>c,xB:()=>l});var r=n(1165),i=n(2791),o=n(5438),s=n(2561),a=n(9140),l=(n(3361),n(2110),(0,r.w)((function(e,t){var n=e.styles,l=(0,a.O)([n],void 0,i.useContext(r.T));if(!r.i){for(var c,u=l.name,d=l.styles,h=l.next;void 0!==h;)u+=" "+h.name,d+=h.styles,h=h.next;var f=!0===t.compat,p=t.insert("",{name:u,styles:d},t.sheet,f);return f?null:i.createElement("style",((c={})["data-emotion"]=t.key+"-global "+u,c.dangerouslySetInnerHTML={__html:p},c.nonce=t.sheet.nonce,c))}var m=i.useRef();return(0,s.j)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),r=!1,i=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==i&&(r=!0,i.setAttribute("data-emotion",e),n.hydrate([i])),m.current=[n,r],function(){n.flush()}}),[t]),(0,s.j)((function(){var e=m.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,o.My)(t,l.next,!0),n.tags.length){var r=n.tags[n.tags.length-1].nextElementSibling;n.before=r,n.flush()}t.insert("",l,n,!1)}}),[t,l.name]),null})));function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.O)(t)}var u=function(){var e=c.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},9140:(e,t,n)=>{"use strict";n.d(t,{O:()=>p});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(9797),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,i.Z)((function(e){return a(e)?e:e.replace(o,"-$&").toLowerCase()})),u=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return h={name:t,styles:n,next:h},t}))}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return h={name:n.name,styles:n.styles,next:h},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)h={name:r.name,styles:r.styles,next:h},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":l(s)&&(r+=c(o)+":"+u(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=d(e,t,s);switch(o){case"animation":case"animationName":r+=c(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var h=0;h<s.length;h++)l(s[h])&&(r+=c(o)+":"+u(o,s[h])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=h,o=n(e);return h=i,d(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var h,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var p=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";h=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=d(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=d(n,t,e[s]),r&&(i+=o[s]);f.lastIndex=0;for(var a,l="";null!==(a=f.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:h}}},2561:(e,t,n)=>{"use strict";var r;n.d(t,{L:()=>s,j:()=>a});var i=n(2791),o=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,s=o||function(e){return e()},a=o||i.useLayoutEffect},5438:(e,t,n)=>{"use strict";n.d(t,{My:()=>o,fp:()=>r,hC:()=>i});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},o=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},234:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184);t.Z=(0,i.default)((0,o.jsx)("path",{d:"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z"}),"Devices")},3047:(e,t,n)=>{"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184);t.Z=(0,i.default)((0,o.jsx)("path",{d:"M18 4H6v2l6.5 6L6 18v2h12v-3h-7l5-5-5-5h7z"}),"Functions")},5649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(9353)},6532:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case h:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},8457:(e,t,n)=>{"use strict";n(6532)},7107:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(7462),i=n(3366),o=n(721),s=n(8736),a=n(7416),l=n(104),c=n(8809);var u=n(4131);const d={black:"#000",white:"#fff"},h={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},f={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},v={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},_=["mode","contrastThreshold","tonalOffset"],b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},w={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function S(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,u.$n)(e.main,i):"dark"===t&&(e.dark=(0,u._j)(e.main,o)))}function k(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,l=(0,i.Z)(e,_),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(t),k=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[200],light:f[50],dark:f[400]}:{main:f[500],light:f[300],dark:f[700]}}(t),E=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(t),I=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[700],light:v[500],dark:v[900]}}(t),T=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(t),C=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(t);function x(e){return(0,u.mi)(e,w.text.primary)>=n?w.text.primary:b.text.primary}const N=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:l=700}=e;if(t=(0,r.Z)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,o.Z)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,o.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return S(t,"light",s,a),S(t,"dark",l,a),t.contrastText||(t.contrastText=x(t.main)),t},P={dark:w,light:b};return(0,s.Z)((0,r.Z)({common:(0,r.Z)({},d),mode:t,primary:N({color:c,name:"primary"}),secondary:N({color:k,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:N({color:E,name:"error"}),warning:N({color:C,name:"warning"}),info:N({color:I,name:"info"}),success:N({color:T,name:"success"}),grey:h,contrastThreshold:n,getContrastText:x,augmentColor:N,tonalOffset:a},P[t]),l)}const E=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const I={textTransform:"uppercase"},T='"Roboto", "Helvetica", "Arial", sans-serif';function C(e,t){const n="function"===typeof t?t(e):t,{fontFamily:o=T,fontSize:a=14,fontWeightLight:l=300,fontWeightRegular:c=400,fontWeightMedium:u=500,fontWeightBold:d=700,htmlFontSize:h=16,allVariants:f,pxToRem:p}=n,m=(0,i.Z)(n,E);const g=a/14,v=p||(e=>"".concat(e/h*g,"rem")),y=(e,t,n,i,s)=>{return(0,r.Z)({fontFamily:o,fontWeight:e,fontSize:v(t),lineHeight:n},o===T?{letterSpacing:"".concat((a=i/t,Math.round(1e5*a)/1e5),"em")}:{},s,f);var a},_={h1:y(l,96,1.167,-1.5),h2:y(l,60,1.2,-.5),h3:y(c,48,1.167,0),h4:y(c,34,1.235,.25),h5:y(c,24,1.334,0),h6:y(u,20,1.6,.15),subtitle1:y(c,16,1.75,.15),subtitle2:y(u,14,1.57,.1),body1:y(c,16,1.5,.15),body2:y(c,14,1.43,.15),button:y(u,14,1.75,.4,I),caption:y(c,12,1.66,.4),overline:y(c,12,2.66,1,I),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,s.Z)((0,r.Z)({htmlFontSize:h,pxToRem:v,fontFamily:o,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:u,fontWeightBold:d},_),m,{clone:!1})}function x(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const N=["none",x(0,2,1,-1,0,1,1,0,0,1,3,0),x(0,3,1,-2,0,2,2,0,0,1,5,0),x(0,3,3,-2,0,3,4,0,0,1,8,0),x(0,2,4,-1,0,4,5,0,0,1,10,0),x(0,3,5,-1,0,5,8,0,0,1,14,0),x(0,3,5,-1,0,6,10,0,0,1,18,0),x(0,4,5,-2,0,7,10,1,0,2,16,1),x(0,5,5,-3,0,8,10,1,0,3,14,2),x(0,5,6,-3,0,9,12,1,0,3,16,2),x(0,6,6,-3,0,10,14,1,0,4,18,3),x(0,6,7,-4,0,11,15,1,0,4,20,3),x(0,7,8,-4,0,12,17,2,0,5,22,4),x(0,7,8,-4,0,13,19,2,0,5,24,4),x(0,7,9,-4,0,14,21,2,0,5,26,4),x(0,8,9,-5,0,15,22,2,0,6,28,5),x(0,8,10,-5,0,16,24,2,0,6,30,5),x(0,8,11,-5,0,17,26,2,0,6,32,5),x(0,9,11,-5,0,18,28,2,0,7,34,6),x(0,9,12,-6,0,19,29,2,0,7,36,6),x(0,10,13,-6,0,20,31,3,0,8,38,7),x(0,10,13,-6,0,21,33,3,0,8,40,7),x(0,10,14,-6,0,22,35,3,0,8,42,7),x(0,11,14,-7,0,23,36,3,0,9,44,8),x(0,11,15,-7,0,24,38,3,0,9,46,8)],P=["duration","easing","delay"],R={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},A={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function O(e){return"".concat(Math.round(e),"ms")}function D(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function L(e){const t=(0,r.Z)({},R,e.easing),n=(0,r.Z)({},A,e.duration);return(0,r.Z)({getAutoHeightDuration:D,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:o=n.standard,easing:s=t.easeInOut,delay:a=0}=r;(0,i.Z)(r,P);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof o?o:O(o)," ").concat(s," ").concat("string"===typeof a?a:O(a)))).join(",")}},e,{easing:t,duration:n})}const M={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function U(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:u={},typography:d={}}=e,h=(0,i.Z)(e,F);if(e.vars)throw new Error((0,o.Z)(18));const f=k(n),p=(0,c.Z)(e);let m=(0,s.Z)(p,{mixins:(g=p.breakpoints,v=t,(0,r.Z)({toolbar:{minHeight:56,[g.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[g.up("sm")]:{minHeight:64}}},v)),palette:f,shadows:N.slice(),typography:C(f,d),transitions:L(u),zIndex:(0,r.Z)({},M)});var g,v;m=(0,s.Z)(m,h);for(var y=arguments.length,_=new Array(y>1?y-1:0),b=1;b<y;b++)_[b-1]=arguments[b];return m=_.reduce(((e,t)=>(0,s.Z)(e,t)),m),m.unstable_sxConfig=(0,r.Z)({},a.Z,null==h?void 0:h.unstable_sxConfig),m.unstable_sx=function(e){return(0,l.Z)({sx:e,theme:this})},m}const j=U},6482:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(7107).Z)()},988:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="$$material"},5070:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7995);const i=e=>(0,r.Z)(e)&&"classes"!==e},7995:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}},6934:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>a});var r=n(7012),i=n(6482),o=n(988),s=n(5070);const a=(0,r.ZP)({themeId:o.Z,defaultTheme:i.Z,rootShouldForwardProp:s.Z})},1402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(7078),i=n(6482),o=n(988);function s(e){let{props:t,name:n}=e;return(0,r.Z)({props:t,name:n,defaultTheme:i.Z,themeId:o.Z})}},4036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(6642).Z},6189:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(7462),i=n(2791),o=n(3366),s=n(3733),a=n(838),l=n(4036),c=n(1402),u=n(6934),d=n(9703),h=n(4657);function f(e){return(0,h.ZP)("MuiSvgIcon",e)}(0,d.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(184);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat((0,l.Z)(n.color))],t["fontSize".concat((0,l.Z)(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,o,s,a,l,c,u,d,h,f,p,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(o=t.transitions)||null==(o=o.duration)?void 0:o.shorter}),fontSize:{inherit:"inherit",small:(null==(s=t.typography)||null==(a=s.pxToRem)?void 0:a.call(s,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(h=null==(f=(t.vars||t).palette)||null==(f=f[n.color])?void 0:f.main)?h:{action:null==(p=(t.vars||t).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),v=i.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiSvgIcon"}),{children:u,className:d,color:h="inherit",component:v="svg",fontSize:y="medium",htmlColor:_,inheritViewBox:b=!1,titleAccess:w,viewBox:S="0 0 24 24"}=n,k=(0,o.Z)(n,m),E=i.isValidElement(u)&&"svg"===u.type,I=(0,r.Z)({},n,{color:h,component:v,fontSize:y,instanceFontSize:e.fontSize,inheritViewBox:b,viewBox:S,hasSvgAsChild:E}),T={};b||(T.viewBox=S);const C=(e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root","inherit"!==t&&"color".concat((0,l.Z)(t)),"fontSize".concat((0,l.Z)(n))]};return(0,a.Z)(i,f,r)})(I);return(0,p.jsxs)(g,(0,r.Z)({as:v,className:(0,s.Z)(C.root,d),focusable:"false",color:_,"aria-hidden":!w||void 0,role:w?"img":void 0,ref:t},T,k,E&&u.props,{ownerState:I,children:[E?u.props.children:u,w?(0,p.jsx)("title",{children:w}):null]}))}));v.muiName="SvgIcon";const y=v;function _(e,t){function n(n,i){return(0,p.jsx)(y,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))}return n.muiName=y.muiName,i.memo(i.forwardRef(n))}},3199:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(3548).Z},9353:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>i.Z,createChainedFunction:()=>o,createSvgIcon:()=>s.Z,debounce:()=>a.Z,deprecatedPropType:()=>l,isMuiElement:()=>c.Z,ownerDocument:()=>u.Z,ownerWindow:()=>d.Z,requirePropFactory:()=>h,setRef:()=>f,unstable_ClassNameGenerator:()=>w,unstable_useEnhancedEffect:()=>p.Z,unstable_useId:()=>m,unsupportedProp:()=>g,useControlled:()=>v.Z,useEventCallback:()=>y.Z,useForkRef:()=>_.Z,useIsFocusVisible:()=>b.Z});var r=n(4925),i=n(4036);const o=n(5253).Z;var s=n(6189),a=n(3199);const l=function(e,t){return()=>null};var c=n(5925),u=n(8301),d=n(7602);n(7462);const h=function(e,t){return()=>null};const f=n(7576).Z;var p=n(162);const m=n(6046).Z;const g=function(e,t,n,r,i){return null};var v=n(9552),y=n(9683),_=n(2071),b=n(6943);const w={configure:e=>{r.Z.configure(e)}}},5925:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2791);const i=function(e,t){var n,i;return r.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}},8301:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2530).Z},7602:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(3791).Z},9552:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2791);const i=function(e){let{controlled:t,default:n,name:i,state:o="value"}=e;const{current:s}=r.useRef(void 0!==t),[a,l]=r.useState(n);return[s?t:a,r.useCallback((e=>{s||l(e)}),[])]}},162:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(2060).Z},9683:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(9145).Z},2071:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(3626).Z},6943:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(2791),i=n(6788);let o=!0,s=!1;const a=new i.V,l={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function c(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function u(){o=!1}function d(){"hidden"===this.visibilityState&&s&&(o=!0)}function h(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return o||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!l[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const f=function(){const e=r.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",d,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(s=!0,a.start(100,(()=>{s=!1})),t.current=!1,!0)},ref:e}}},1500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});n(2791);var r=n(2554),i=n(184);function o(e){const{styles:t,defaultTheme:n={}}=e,o="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,i.jsx)(r.xB,{styles:o})}},6649:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>k.Z,StyledEngineProvider:()=>S,ThemeContext:()=>l.T,css:()=>y.iv,default:()=>E,internal_processStyles:()=>I,keyframes:()=>y.F4});var r=n(7462),i=n(2791),o=n(9797),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,o.Z)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(1165),c=n(5438),u=n(9140),d=n(2561),h=a,f=function(e){return"theme"!==e},p=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?h:f},m=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},g=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return(0,c.hC)(t,n,r),(0,d.L)((function(){return(0,c.My)(t,n,r)})),null},v=function e(t,n){var o,s,a=t.__emotion_real===t,d=a&&t.__emotion_base||t;void 0!==n&&(o=n.label,s=n.target);var h=m(t,n,a),f=h||p(d),v=!f("as");return function(){var y=arguments,_=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&_.push("label:"+o+";"),null==y[0]||void 0===y[0].raw)_.push.apply(_,y);else{0,_.push(y[0][0]);for(var b=y.length,w=1;w<b;w++)_.push(y[w],y[0][w])}var S=(0,l.w)((function(e,t,n){var r=v&&e.as||d,o="",a=[],m=e;if(null==e.theme){for(var y in m={},e)m[y]=e[y];m.theme=i.useContext(l.T)}"string"===typeof e.className?o=(0,c.fp)(t.registered,a,e.className):null!=e.className&&(o=e.className+" ");var b=(0,u.O)(_.concat(a),t.registered,m);o+=t.key+"-"+b.name,void 0!==s&&(o+=" "+s);var w=v&&void 0===h?p(r):f,S={};for(var k in e)v&&"as"===k||w(k)&&(S[k]=e[k]);return S.className=o,S.ref=n,i.createElement(i.Fragment,null,i.createElement(g,{cache:t,serialized:b,isStringTag:"string"===typeof r}),i.createElement(r,S))}));return S.displayName=void 0!==o?o:"Styled("+("string"===typeof d?d:d.displayName||d.name||"Component")+")",S.defaultProps=t.defaultProps,S.__emotion_real=S,S.__emotion_base=d,S.__emotion_styles=_,S.__emotion_forwardProp=h,Object.defineProperty(S,"toString",{value:function(){return"."+s}}),S.withComponent=function(t,i){return e(t,(0,r.Z)({},n,i,{shouldForwardProp:m(S,i,!0)})).apply(void 0,_)},S}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));var y=n(2554),_=n(3361),b=n(184);let w;function S(e){const{injectFirst:t,children:n}=e;return t&&w?(0,b.jsx)(l.C,{value:w,children:n}):n}"object"===typeof document&&(w=(0,_.Z)({key:"css",prepend:!0}));var k=n(1500);function E(e,t){return v(e,t)}const I=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},4131:(e,t,n)=>{"use strict";var r=n(4836);t.Fq=f,t._j=p,t.mi=function(e,t){const n=h(e),r=h(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.$n=m;var i=r(n(7034)),o=r(n(9881));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,o.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,o=e.substring(t+1,e.length-1);if("color"===n){if(o=o.split(" "),r=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:n,values:o,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function d(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const c=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",c.push(t[3])),u({type:a,values:c})}function h(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(d(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function f(e,t){return e=l(e),t=s(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,u(e)}function p(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=s(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return h(e)>.5?p(e,t):m(e,t)}},7012:(e,t,n)=>{"use strict";var r=n(4836);t.ZP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=p,slotShouldForwardProp:l=p}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:v((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:d,slot:f,skipVariantsResolver:m,skipSx:b,overridesResolver:w=y(g(f))}=c,S=(0,o.default)(c,h),k=void 0!==m?m:f&&"Root"!==f&&"root"!==f||!1,E=b||!1;let I=p;"Root"===f||"root"===f?I=r:f?I=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(I=void 0);const T=(0,s.default)(e,(0,i.default)({shouldForwardProp:I,label:undefined},S)),C=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>_(e,(0,i.default)({},r,{theme:v({theme:r.theme,defaultTheme:n,themeId:t})})):e,x=function(r){let o=C(r);for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];const c=a?a.map(C):[];d&&w&&c.push((e=>{const r=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[d]||!r.components[d].styleOverrides)return null;const o=r.components[d].styleOverrides,s={};return Object.entries(o).forEach((t=>{let[n,o]=t;s[n]=_(o,(0,i.default)({},e,{theme:r}))})),w(e,s)})),d&&!k&&c.push((e=>{var r;const o=v((0,i.default)({},e,{defaultTheme:n,themeId:t}));return _({variants:null==o||null==(r=o.components)||null==(r=r[d])?void 0:r.variants},(0,i.default)({},e,{theme:o}))})),E||c.push(u);const h=c.length-a.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");o=[...r,...e],o.raw=[...r.raw,...e]}const f=T(o,...c);return e.muiName&&(f.muiName=e.muiName),f};return T.withConfig&&(x.withConfig=T.withConfig),x}};var i=r(n(434)),o=r(n(7071)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6649)),a=n(1520),l=(r(n(333)),r(n(386)),r(n(4652))),c=r(n(7150));const u=["ownerState"],d=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function v(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function y(e){return e?(t,n)=>n[e]:null}function _(e,t){let{ownerState:n}=t,r=(0,o.default)(t,u);const s="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(s))return s.flatMap((e=>_(e,(0,i.default)({ownerState:n},r))));if(s&&"object"===typeof s&&Array.isArray(s.variants)){const{variants:e=[]}=s;let t=(0,o.default)(s,d);return e.forEach((e=>{let o=!0;"function"===typeof e.props?o=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(o=!1)})),o&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return s}},1184:(e,t,n)=>{"use strict";n.d(t,{L7:()=>l,P$:()=>u,VO:()=>i,W8:()=>a,dt:()=>c,k9:()=>s});var r=n(8736);const i={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(i[e],"px)")};function s(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||o;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||o;return Object.keys(t).reduce(((r,o)=>{if(-1!==Object.keys(e.values||i).indexOf(o)){r[e.up(o)]=n(t[o],o)}else{const e=o;r[e]=t[e]}return r}),{})}return n(t)}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function l(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function c(e){const t=a(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];const s=[t,...i].reduce(((e,t)=>(0,r.Z)(e,t)),{});return l(Object.keys(t),s)}function u(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let s;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[s],s=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[s],s=n):e[n]=t,e)),{})}},8759:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){return{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}}return n.palette.mode===e?t:{}}n.d(t,{Z:()=>r})},9572:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(3366),i=n(7462);const o=["values","unit","step"],s=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.Z)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,l=(0,r.Z)(e,o),c=s(t),u=Object.keys(c);function d(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function f(e,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-a/100).concat(n,")")}return(0,i.Z)({keys:u,values:c,up:d,down:h,between:f,only:function(e){return u.indexOf(e)+1<u.length?f(e,u[u.indexOf(e)+1]):d(e)},not:function(e){const t=u.indexOf(e);return 0===t?d(u[1]):t===u.length-1?h(u[t]):f(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},8809:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(7462),i=n(3366),o=n(8736),s=n(9572);const a={borderRadius:4};var l=n(5682);var c=n(104),u=n(7416),d=n(8759);const h=["breakpoints","palette","spacing","shape"];const f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:f,shape:p={}}=e,m=(0,i.Z)(e,h),g=(0,s.Z)(t),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(f);let y=(0,o.Z)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},n),spacing:v,shape:(0,r.Z)({},a,p)},m);y.applyStyles=d.Z;for(var _=arguments.length,b=new Array(_>1?_-1:0),w=1;w<_;w++)b[w-1]=arguments[w];return y=b.reduce(((e,t)=>(0,o.Z)(e,t)),y),y.unstable_sxConfig=(0,r.Z)({},u.Z,null==m?void 0:m.unstable_sxConfig),y.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},y}},4652:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.Z,private_createBreakpoints:()=>i.Z,unstable_applyStyles:()=>o.Z});var r=n(8809),i=n(9572),o=n(8759)},8247:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(8736);const i=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:(e,t,n)=>{"use strict";n.d(t,{hB:()=>p,eI:()=>f,NA:()=>m,e6:()=>y,o3:()=>_});var r=n(1184),i=n(8529),o=n(8247);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=s[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...u,...d];function f(e,t,n,r){var o;const s=null!=(o=(0,i.DW)(e,t,!1))?o:n;return"number"===typeof s?e=>"string"===typeof e?e:s*e:Array.isArray(s)?e=>"string"===typeof e?e:s[e]:"function"===typeof s?s:()=>{}}function p(e){return f(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const o=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),s=e[n];return(0,r.k9)(e,s,o)}function v(e,t){const n=p(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(o.Z,{})}function y(e){return v(e,u)}function _(e){return v(e,d)}function b(e){return v(e,h)}y.propTypes={},y.filterProps=u,_.propTypes={},_.filterProps=d,b.propTypes={},b.filterProps=h},8529:(e,t,n)=>{"use strict";n.d(t,{DW:()=>o,Jq:()=>s,ZP:()=>a});var r=n(6642),i=n(1184);function o(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function s(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=o(e.theme,a)||{};return(0,i.k9)(e,c,(e=>{let i=s(u,l,e);return e===i&&"string"===typeof e&&(i=s(u,l,"".concat(t).concat("default"===e?"":(0,r.Z)(e)),e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},7416:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var r=n(5682),i=n(8529),o=n(8247);const s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,o.Z)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(1184);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,i.ZP)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),d=c("borderTop",l),h=c("borderRight",l),f=c("borderBottom",l),p=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),v=c("borderRightColor"),y=c("borderBottomColor"),_=c("borderLeftColor"),b=c("outline",l),w=c("outlineColor"),S=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.eI)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r.NA)(t,e)});return(0,a.k9)(e,e.borderRadius,n)}return null};S.propTypes={},S.filterProps=["borderRadius"];s(u,d,h,f,p,m,g,v,y,_,S,b,w);const k=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.eI)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r.NA)(t,e)});return(0,a.k9)(e,e.gap,n)}return null};k.propTypes={},k.filterProps=["gap"];const E=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.eI)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r.NA)(t,e)});return(0,a.k9)(e,e.columnGap,n)}return null};E.propTypes={},E.filterProps=["columnGap"];const I=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.eI)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r.NA)(t,e)});return(0,a.k9)(e,e.rowGap,n)}return null};I.propTypes={},I.filterProps=["rowGap"];s(k,E,I,(0,i.ZP)({prop:"gridColumn"}),(0,i.ZP)({prop:"gridRow"}),(0,i.ZP)({prop:"gridAutoFlow"}),(0,i.ZP)({prop:"gridAutoColumns"}),(0,i.ZP)({prop:"gridAutoRows"}),(0,i.ZP)({prop:"gridTemplateColumns"}),(0,i.ZP)({prop:"gridTemplateRows"}),(0,i.ZP)({prop:"gridTemplateAreas"}),(0,i.ZP)({prop:"gridArea"}));function T(e,t){return"grey"===t?t:e}s((0,i.ZP)({prop:"color",themeKey:"palette",transform:T}),(0,i.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:T}),(0,i.ZP)({prop:"backgroundColor",themeKey:"palette",transform:T}));function C(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const x=(0,i.ZP)({prop:"width",transform:C}),N=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.VO[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:C(t)}};return(0,a.k9)(e,e.maxWidth,t)}return null};N.filterProps=["maxWidth"];const P=(0,i.ZP)({prop:"minWidth",transform:C}),R=(0,i.ZP)({prop:"height",transform:C}),A=(0,i.ZP)({prop:"maxHeight",transform:C}),O=(0,i.ZP)({prop:"minHeight",transform:C}),D=((0,i.ZP)({prop:"size",cssProperty:"width",transform:C}),(0,i.ZP)({prop:"size",cssProperty:"height",transform:C}),s(x,N,P,R,A,O,(0,i.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:S},color:{themeKey:"palette",transform:T},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:T},backgroundColor:{themeKey:"palette",transform:T},p:{style:r.o3},pt:{style:r.o3},pr:{style:r.o3},pb:{style:r.o3},pl:{style:r.o3},px:{style:r.o3},py:{style:r.o3},padding:{style:r.o3},paddingTop:{style:r.o3},paddingRight:{style:r.o3},paddingBottom:{style:r.o3},paddingLeft:{style:r.o3},paddingX:{style:r.o3},paddingY:{style:r.o3},paddingInline:{style:r.o3},paddingInlineStart:{style:r.o3},paddingInlineEnd:{style:r.o3},paddingBlock:{style:r.o3},paddingBlockStart:{style:r.o3},paddingBlockEnd:{style:r.o3},m:{style:r.e6},mt:{style:r.e6},mr:{style:r.e6},mb:{style:r.e6},ml:{style:r.e6},mx:{style:r.e6},my:{style:r.e6},margin:{style:r.e6},marginTop:{style:r.e6},marginRight:{style:r.e6},marginBottom:{style:r.e6},marginLeft:{style:r.e6},marginX:{style:r.e6},marginY:{style:r.e6},marginInline:{style:r.e6},marginInlineStart:{style:r.e6},marginInlineEnd:{style:r.e6},marginBlock:{style:r.e6},marginBlockStart:{style:r.e6},marginBlockEnd:{style:r.e6},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:k},rowGap:{style:I},columnGap:{style:E},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:C},maxWidth:{style:N},minWidth:{transform:C},height:{transform:C},maxHeight:{transform:C},minHeight:{transform:C},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},8519:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(7462),i=n(3366),o=n(8736),s=n(7416);const a=["sx"],l=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:s.Z;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function c(e){const{sx:t}=e,n=(0,i.Z)(e,a),{systemProps:s,otherProps:c}=l(n);let u;return u=Array.isArray(t)?[s,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.P)(e)?(0,r.Z)({},s,e):s}:(0,r.Z)({},s,t),(0,r.Z)({},c,{sx:u})}},7150:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.Z,extendSxProp:()=>i.Z,unstable_createStyleFunctionSx:()=>r.n,unstable_defaultSxConfig:()=>o.Z});var r=n(104),i=n(8519),o=n(7416)},104:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,n:()=>l});var r=n(6642),i=n(8247),o=n(8529),s=n(1184),a=n(7416);function l(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:d,style:h}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const f=(0,o.DW)(n,u)||{};if(h)return h(a);return(0,s.k9)(a,t,(t=>{let n=(0,o.Jq)(f,d,t);return t===n&&"string"===typeof t&&(n=(0,o.Jq)(f,d,"".concat(e).concat("default"===t?"":(0,r.Z)(t)),t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:o,theme:l={}}=n||{};if(!o)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.Z;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const o=(0,s.W8)(l.breakpoints),a=Object.keys(o);let u=o;return Object.keys(r).forEach((n=>{const o=(a=r[n],d=l,"function"===typeof a?a(d):a);var a,d;if(null!==o&&void 0!==o)if("object"===typeof o)if(c[n])u=(0,i.Z)(u,e(n,o,l,c));else{const e=(0,s.k9)({theme:l},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?u=(0,i.Z)(u,e):u[n]=t({sx:o,theme:l})}else u=(0,i.Z)(u,e(n,o,l,c))})),(0,s.L7)(a,u)}return Array.isArray(o)?o.map(u):u(o)}}const c=l();c.filterProps=["sx"];const u=c},3459:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(8809),i=n(2791),o=n(1165);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=i.useContext(o.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},a=(0,r.Z)();const l=function(){return s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:a)}},7078:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(139);var i=n(3459);function o(e){let{props:t,name:n,defaultTheme:o,themeId:s}=e,a=(0,i.Z)(o);s&&(a=a[s]||a);const l=function(e){const{theme:t,name:n,props:i}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,i):i}({theme:a,name:n,props:t});return l}},4925:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})()},6642:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(721);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},333:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.Z});var r=n(6642)},9881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},838:(e,t,n)=>{"use strict";function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{Z:()=>r})},5253:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}n.d(t,{Z:()=>r})},3548:(e,t,n)=>{"use strict";function r(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}n.d(t,{Z:()=>r})},8736:(e,t,n)=>{"use strict";n.d(t,{P:()=>i,Z:()=>s});var r=n(7462);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function o(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=o(e[n])})),t}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=s(e[r],t[r],n):n.clone?a[r]=i(t[r])?o(t[r]):t[r]:a[r]=t[r])})),a}},1520:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.Z,isPlainObject:()=>r.P});var r=n(8736)},721:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:()=>r})},7034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.Z});var r=n(721)},4657:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>o});var r=n(4925);const i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const o=i[t];return o?"".concat(n,"-").concat(o):"".concat(r.Z.generate(e),"-").concat(t)}},9703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(4657);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const i={};return t.forEach((t=>{i[t]=(0,r.ZP)(e,t,n)})),i}},386:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>o});var r=n(3325);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(e){const t="".concat(e).match(i);return t&&t[1]||""}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||o(e)||t}function a(e,t,n){const r=s(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return s(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return a(e,e.render,"ForwardRef");case r.Memo:return a(e,e.type,"memo");default:return}}}},794:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case h:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=d,t.Memo=p},3325:(e,t,n)=>{"use strict";e.exports=n(794)},2530:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:()=>r})},3791:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2530);function i(e){return(0,r.Z)(e).defaultView||window}},139:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7462);function i(e,t){const n=(0,r.Z)({},t);return Object.keys(e).forEach((o=>{if(o.toString().match(/^(components|slots)$/))n[o]=(0,r.Z)({},e[o],n[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},a=t[o];n[o]={},a&&Object.keys(a)?s&&Object.keys(s)?(n[o]=(0,r.Z)({},a),Object.keys(s).forEach((e=>{n[o][e]=i(s[e],a[e])}))):n[o]=a:n[o]=s}else void 0===n[o]&&(n[o]=e[o])})),n}},7576:(e,t,n)=>{"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:()=>r})},2060:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(2791);const i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect},9145:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2791),i=n(2060);const o=function(e){const t=r.useRef(e);return(0,i.Z)((()=>{t.current=e})),r.useRef((function(){return(0,t.current)(...arguments)})).current}},3626:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(2791),i=n(7576);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{(0,i.Z)(t,e)}))}),t)}},6046:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>a});var i=n(2791);let o=0;const s=(r||(r=n.t(i,2)))["useId".toString()];function a(e){if(void 0!==s){const t=s();return null!=e?e:t}return function(e){const[t,n]=i.useState(e),r=e||t;return i.useEffect((()=>{null==t&&(o+=1,n("mui-".concat(o)))}),[t]),r}(e)}},6788:(e,t,n)=>{"use strict";n.d(t,{V:()=>s,Z:()=>a});var r=n(2791);const i={};const o=[];class s{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new s}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}}function a(){const e=function(e,t){const n=r.useRef(i);return n.current===i&&(n.current=e(t)),n}(s.create).current;var t;return t=e.disposeEffect,r.useEffect(t,o),e}},2110:(e,t,n)=>{"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=u(n);d&&(s=s.concat(d(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=h(n,v);try{c(t,v,y)}catch(_){}}}}return t}},746:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||w(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b||e.$$typeof===v)},t.typeOf=w},8309:(e,t,n)=>{"use strict";e.exports=n(746)},4463:(e,t,n)=>{"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){$(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function oe(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ee=null;function Ie(e){if(e=_i(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Te(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return xe(e,t,n)}finally{Pe=!1,(null!==ke||null!==Ee)&&(Ne(),Ce())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,ze={onError:function(e){Me=!0,Fe=e}};function Ve(e,t,n,r,i,o,s,a,l){Me=!1,Fe=null,Le.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Be(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ze(i),e;if(s===r)return Ze(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,kt,Et,It,Tt=!1,Ct=[],xt=null,Nt=null,Pt=null,Rt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function zt(){Tt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Pt&&Ut(Pt)&&(Pt=null),Rt.forEach(jt),At.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Vt(xt,e),null!==Nt&&Vt(Nt,e),null!==Pt&&Vt(Pt,e),Rt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Zt=!0;function Wt(e,t,n,r){var i=_t,o=qt.transition;qt.transition=null;try{_t=1,Kt(e,t,n,r)}finally{_t=i,qt.transition=o}}function Ht(e,t,n,r){var i=_t,o=qt.transition;qt.transition=null;try{_t=4,Kt(e,t,n,r)}finally{_t=i,qt.transition=o}}function Kt(e,t,n,r){if(Zt){var i=Qt(e,t,n,r);if(null===i)Zr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,Mt(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,At.set(o,Mt(At.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&wt(o),null===(o=Qt(e,t,n,r))&&Zr(e,t,r,Gt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=yi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=F({},cn,{view:0,detail:0}),hn=on(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(F({},fn,{dataTransfer:0})),gn=on(F({},dn,{relatedTarget:0})),vn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(yn),bn=on(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function In(){return En}var Tn=F({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Tn),xn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Pn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=on(Rn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Gn(e){Ur(e,0)}function Qn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}Jn=Xn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Wn(t,Kn,e,we(e)),Re(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function or(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Er={};function Ir(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return kr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Ir("animationend"),Cr=Ir("animationiteration"),xr=Ir("animationstart"),Nr=Ir("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Pr.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Tr,"onAnimationEnd"),Ar(Cr,"onAnimationIteration"),Ar(xr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(o(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,c),o=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=o,i=we(n),s=[];e:{var a=Pr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case Cr:case xr:l=vn;break;case Nr:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ae(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Gr(s,a,l,u,!1),null!==c&&null!==d&&Gr(s,d,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Zn(a))if($n)g=sr;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Zn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?zn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(y=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(v=Hr(r,_)).length&&(_=new bn(_,e,null,n,i),s.push({event:_,listeners:v}),y?_.data=y:null!==(y=Vn(n))&&(_.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Xt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Ur(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ae(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Ae(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ae(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Ae(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(o(425))}function Xr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var Si=[],ki=-1;function Ei(e){return{current:e}}function Ii(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function Ti(e,t){ki++,Si[ki]=e.current,e.current=t}var Ci={},xi=Ei(Ci),Ni=Ei(!1),Pi=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ni),Ii(xi)}function Di(e,t,n){if(xi.current!==Ci)throw Error(o(168));Ti(xi,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=xi.current,Ti(xi,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(xi),Ti(xi,e)):Ii(Ni),Ti(Ni,n)}var Ui=null,ji=!1,zi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Xe,Bi),i}finally{_t=t,zi=!1}}return null}var qi=[],Zi=0,Wi=null,Hi=0,Ki=[],Gi=0,Qi=null,Yi=1,$i="";function Ji(e,t){qi[Zi++]=Hi,qi[Zi++]=Wi,Wi=e,Hi=t}function Xi(e,t,n){Ki[Gi++]=Yi,Ki[Gi++]=$i,Ki[Gi++]=Qi,Qi=e;var r=Yi;e=$i;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-st(t)+i|n<<i|r,$i=o+e}else Yi=1<<o|n<<i|r,$i=e}function eo(e){null!==e.return&&(Ji(e,1),Xi(e,1,0))}function to(e){for(;e===Wi;)Wi=qi[--Zi],qi[Zi]=null,Hi=qi[--Zi],qi[Zi]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,$i=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ei(null),_o=null,bo=null,wo=null;function So(){wo=bo=_o=null}function ko(e){var t=yo.current;Ii(yo),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t){_o=e,wo=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function To(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===_o)throw Error(o(308));bo=e,_o.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Co=null;function xo(e){null===Co?Co=[e]:Co.push(e)}function No(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ro=!1;function Ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,xo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Ro=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=F({},d,h);break e;case 2:Ro=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=d}}function jo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var zo=(new r.Component).refs;function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bo={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Do(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(rc(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Do(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(rc(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Do(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(rc(t,e,r,n),Mo(t,e,r))}};function qo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Zo(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=To(o):(i=Ai(t)?Pi:xi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bo.enqueueReplaceState(t,t.state,null)}function Ho(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zo,Ao(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=To(o):(o=Ai(t)?Pi:xi.current,i.context=Ri(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bo.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===zo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Go(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===A&&Qo(o)===t.type)?((r=i(t,n.props)).ref=Ko(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ko(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ko(e,null,t),n.return=e,n;case S:return(t=jc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Go(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case A:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);Go(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);Go(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),io&&Ji(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Ji(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=f(i,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),a=s(_,a,g),null===d?u=_:d.sibling=_,d=_,m=v}if(y.done)return n(i,m),io&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return io&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===k&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===k){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Qo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Ko(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===k?((o=Mc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Lc(s.type,s.key,s.props,null,r.mode,l)).ref=Ko(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=jc(s,r.mode,l)).return=r,r=o}return a(r);case A:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(L(s))return g(r,o,s,l);Go(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Uc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var $o=Yo(!0),Jo=Yo(!1),Xo={},es=Ei(Xo),ts=Ei(Xo),ns=Ei(Xo);function rs(e){if(e===Xo)throw Error(o(174));return e}function is(e,t){switch(Ti(ns,t),Ti(ts,e),Ti(es,Xo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(es),Ti(es,t)}function os(){Ii(es),Ii(ts),Ii(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ti(ts,e),Ti(es,n))}function as(e){ts.current===e&&(Ii(es),Ii(ts))}var ls=Ei(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function ds(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var hs=b.ReactCurrentDispatcher,fs=b.ReactCurrentBatchConfig,ps=0,ms=null,gs=null,vs=null,ys=!1,_s=!1,bs=0,ws=0;function Ss(){throw Error(o(321))}function ks(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Es(e,t,n,r,i,s){if(ps=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),_s){s=0;do{if(_s=!1,bs=0,25<=s)throw Error(o(301));s+=1,vs=gs=null,t.updateQueue=null,hs.current=ca,e=n(r,i)}while(_s)}if(hs.current=sa,t=null!==gs&&null!==gs.next,ps=0,vs=gs=ms=null,ys=!1,t)throw Error(o(300));return e}function Is(){var e=0!==bs;return bs=0,e}function Ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?ms.memoizedState=vs=e:vs=vs.next=e,vs}function Cs(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===vs?ms.memoizedState:vs.next;if(null!==t)vs=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===vs?ms.memoizedState=vs=e:vs=vs.next=e}return vs}function xs(e,t){return"function"===typeof t?t(e):t}function Ns(e){var t=Cs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ps&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,ms.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ms.lanes|=s,Fl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ps(e){var t=Cs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Rs(){}function As(e,t){var n=ms,r=Cs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Zs(Ls.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,js(9,Ds.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&ps)||Os(n,t,i)}return i}function Os(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ds(e,t,n,r){t.value=n,t.getSnapshot=r,Ms(t)&&Fs(e)}function Ls(e,t,n){return n((function(){Ms(t)&&Fs(e)}))}function Ms(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fs(e){var t=Po(e,1);null!==t&&rc(t,e,1,-1)}function Us(e){var t=Ts();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function js(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zs(){return Cs().memoizedState}function Vs(e,t,n,r){var i=Ts();ms.flags|=e,i.memoizedState=js(1|t,n,void 0,void 0===r?null:r)}function Bs(e,t,n,r){var i=Cs();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&ks(r,s.deps))return void(i.memoizedState=js(t,n,o,r))}ms.flags|=e,i.memoizedState=js(1|t,n,o,r)}function qs(e,t){return Vs(8390656,8,e,t)}function Zs(e,t){return Bs(2048,8,e,t)}function Ws(e,t){return Bs(4,2,e,t)}function Hs(e,t){return Bs(4,4,e,t)}function Ks(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Gs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4,4,Ks.bind(null,t,e),n)}function Qs(){}function Ys(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ks(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $s(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ks(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Js(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ms.lanes|=n,Fl|=n,e.baseState=!0),t)}function Xs(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{_t=n,fs.transition=r}}function ea(){return Cs().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=No(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,xo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=No(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ia(e,t){_s=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:To,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},aa={readContext:To,useCallback:function(e,t){return Ts().memoizedState=[e,void 0===t?null:t],e},useContext:To,useEffect:qs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vs(4,2,e,t)},useMemo:function(e,t){var n=Ts();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ts();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ts().memoizedState=e},useState:Us,useDebugValue:Qs,useDeferredValue:function(e){return Ts().memoizedState=e},useTransition:function(){var e=Us(!1),t=e[0];return e=Xs.bind(null,e[1]),Ts().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,i=Ts();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));0!==(30&ps)||Os(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qs(Ls.bind(null,r,s,e),[e]),r.flags|=2048,js(9,Ds.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ts(),t=Pl.identifierPrefix;if(io){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ws++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:To,useCallback:Ys,useContext:To,useEffect:Zs,useImperativeHandle:Gs,useInsertionEffect:Ws,useLayoutEffect:Hs,useMemo:$s,useReducer:Ns,useRef:zs,useState:function(){return Ns(xs)},useDebugValue:Qs,useDeferredValue:function(e){return Js(Cs(),gs.memoizedState,e)},useTransition:function(){return[Ns(xs)[0],Cs().memoizedState]},useMutableSource:Rs,useSyncExternalStore:As,useId:ea,unstable_isNewReconciler:!1},ca={readContext:To,useCallback:Ys,useContext:To,useEffect:Zs,useImperativeHandle:Gs,useInsertionEffect:Ws,useLayoutEffect:Hs,useMemo:$s,useReducer:Ps,useRef:zs,useState:function(){return Ps(xs)},useDebugValue:Qs,useDeferredValue:function(e){var t=Cs();return null===gs?t.memoizedState=e:Js(t,gs.memoizedState,e)},useTransition:function(){return[Ps(xs)[0],Cs().memoizedState]},useMutableSource:Rs,useSyncExternalStore:As,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),ha(0,t)},n}function ma(e,t,n){(n=Do(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=b.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?Jo(t,null,n,r):$o(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var o=t.ref;return Io(t,i),r=Es(e,t,n,r,o,i),n=Is(),null===e||ba?(io&&n&&eo(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function ka(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ea(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Dl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Dl,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Dl,Ol),Ol|=r;return wa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var o=Ai(n)?Pi:xi.current;return o=Ri(t,o),Io(t,i),n=Es(e,t,n,r,o,i),r=Is(),null===e||ba?(io&&r&&eo(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function xa(e,t,n,r,i){if(Ai(n)){var o=!0;Mi(t)}else o=!1;if(Io(t,i),null===t.stateNode)Za(e,t),Zo(t,n,r),Ho(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=To(c):c=Ri(t,c=Ai(n)?Pi:xi.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Wo(t,s,r,c),Ro=!1;var h=t.memoizedState;s.state=h,Uo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ni.current||Ro?("function"===typeof u&&(Vo(t,n,u,r),l=t.memoizedState),(a=Ro||qo(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Oo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vo(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=To(l):l=Ri(t,l=Ai(n)?Pi:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Wo(t,s,r,l),Ro=!1,h=t.memoizedState,s.state=h,Uo(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Ni.current||Ro?("function"===typeof f&&(Vo(t,n,f,r),p=t.memoizedState),(c=Ro||qo(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,o,i)}function Na(e,t,n,r,i,o){Ta(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Wa(e,t,o);r=t.stateNode,_a.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=$o(t,e.child,null,o),t.child=$o(t,null,a,o)):wa(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),is(e,t.containerInfo)}function Ra(e,t,n,r,i){return po(),mo(i),t.flags|=256,wa(e,t,n,r),t.child}var Aa,Oa,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ti(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=da(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(s=Mc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&$o(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,s);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=da(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Po(e,i),rc(r,e,i,-1))}return gc(),za(e,t,a,r=da(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[Gi++]=Yi,Ki[Gi++]=$i,Ki[Gi++]=Qi,Yi=e.id,$i=e.overflow,Qi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Dc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&mo(r),$o(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function Ba(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,o);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Za(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Ka(t),null;case 3:return r=t.stateNode,os(),Ii(Ni),Ii(xi),ds(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Oa(e,t),Ka(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ka(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,s),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jr("invalid",r);break;case"textarea":ie(r,s),jr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":H(r),X(r,s,!0);break;case"textarea":H(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&jr("scroll",e):null!=u&&_(e,s,u,l))}switch(n){case"input":H(e),X(e,r,!1);break;case"textarea":H(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ka(t),null;case 13:if(Ii(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return os(),Oa(e,t),null===e&&Br(t.stateNode.containerInfo),Ka(t),null;case 10:return ko(t.type._context),Ka(t),null;case 19:if(Ii(ls),null===(s=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ha(s,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ha(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&$e()>ql&&(t.flags|=128,r=!0,Ha(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ka(t),null}else 2*$e()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ha(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,n=ls.current,Ti(ls,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qa(e,t){switch(to(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ii(Ni),Ii(xi),ds(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ii(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ls),null;case 4:return os(),null;case 10:return ko(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Xa=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||el(n,t);case 6:var r=dl,i=hl;dl=null,fl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!$a&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ic(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,fl(e,t,n),$a=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(o(160));pl(s,a,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ic(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Ic(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ic(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(i,s),_e(l,a);var u=_e(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):_(i,d,h,u)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Ic(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ic(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=$e())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||d,gl(t,e),$a=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ic(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(h);continue}}null!==p?(p.return=f,Xa=p):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ic(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Ic(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Xa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Ya;var c=$a;if(Ya=s,($a=l)&&!c)for(Xa=i;null!==Xa;)l=(s=Xa).child,22===s.tag&&null!==s.memoizedState?kl(i):null!==l?(l.return=s,Xa=l):kl(i);for(;null!==o;)Xa=o,bl(o,t,n),o=o.sibling;Xa=i,Ya=a,$a=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Xa=o):wl(e)}}function wl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&jo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}jo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}$a||512&t.flags&&ol(t)}catch(f){Ic(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function Sl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function kl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ic(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ic(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Ic(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Ic(t,s,l)}}}catch(l){Ic(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var El,Il=Math.ceil,Tl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,xl=b.ReactCurrentBatchConfig,Nl=0,Pl=null,Rl=null,Al=0,Ol=0,Dl=Ei(0),Ll=0,Ml=null,Fl=0,Ul=0,jl=0,zl=null,Vl=null,Bl=0,ql=1/0,Zl=null,Wl=!1,Hl=null,Kl=null,Gl=!1,Ql=null,Yl=0,$l=0,Jl=null,Xl=-1,ec=0;function tc(){return 0!==(6&Nl)?$e():-1!==Xl?Xl:Xl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Al?Al&-Al:null!==go.transition?(0===ec&&(ec=mt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<$l)throw $l=0,Jl=null,Error(o(185));vt(e,n,r),0!==(2&Nl)&&e===Pl||(e===Pl&&(0===(2&Nl)&&(Ul|=n),4===Ll&&lc(e,Al)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=$e()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Pl?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){ji=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),si((function(){0===(6&Nl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Xl=-1,ec=0,0!==(6&Nl))throw Error(o(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Nl;Nl|=2;var s=mc();for(Pl===e&&Al===t||(Zl=null,ql=$e()+500,fc(e,t));;)try{_c();break}catch(l){pc(e,l)}So(),Tl.current=s,Nl=i,null!==Rl?t=0:(Pl=null,Al=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,$e()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(s=pt(e))&&(r=s,t=sc(e,s))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Sc(e,Vl,Zl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Vl,Zl),t);break}Sc(e,Vl,Zl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Vl,Zl),r);break}Sc(e,Vl,Zl);break;default:throw Error(o(329))}}}return ic(e,$e()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~jl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(o(327));kc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,$e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Vl,Zl),ic(e,$e()),null}function uc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=$e()+500,ji&&Bi())}}function dc(e){null!==Ql&&0===Ql.tag&&0===(6&Nl)&&kc();var t=Nl;Nl|=1;var n=xl.transition,r=_t;try{if(xl.transition=null,_t=1,e)return e()}finally{_t=r,xl.transition=n,0===(6&(Nl=t))&&Bi()}}function hc(){Ol=Dl.current,Ii(Dl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:os(),Ii(Ni),Ii(xi),ds();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ii(ls);break;case 10:ko(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=e,Rl=e=Dc(e.current,null),Al=Ol=t,Ll=0,Ml=null,jl=Ul=Fl=0,Vl=zl=null,null!==Co){for(t=0;t<Co.length;t++)if(null!==(r=(n=Co[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Co=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(So(),hs.current=sa,ys){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(ps=0,vs=gs=ms=null,_s=!1,bs=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),mo(ua(c,l));break e}}s=c=ua(c,l),4!==Ll&&(Ll=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,pa(0,c,t));break e;case 1:l=c;var y=s.type,_=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Kl||!Kl.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,ma(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=Tl.current;return Tl.current=sa,null===e?sa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Pl,Al)}function vc(e,t){var n=Nl;Nl|=2;var r=mc();for(Pl===e&&Al===t||(Zl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(So(),Nl=n,Tl.current=r,null!==Rl)throw Error(o(261));return Pl=null,Al=0,Ll}function yc(){for(;null!==Rl;)bc(Rl)}function _c(){for(;null!==Rl&&!Qe();)bc(Rl)}function bc(e){var t=El(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?wc(e):Rl=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Ol)))return void(Rl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Sc(e,t,n){var r=_t,i=xl.transition;try{xl.transition=null,_t=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(0!==(6&Nl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Pl&&(Rl=Pl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Pc(tt,(function(){return kc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=xl.transition,xl.transition=null;var a=_t;_t=1;var l=Nl;Nl|=4,Cl.current=null,function(e,t){if(ei=Zt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Zt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),Zt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Ye(),Nl=l,_t=a,xl.transition=s}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),s=e.pendingLanes,0===s&&(Kl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&kc(),s=e.pendingLanes,0!==(1&s)?e===Jl?$l++:($l=0,Jl=e):$l=0,Bi()}(e,t,n,r)}finally{xl.transition=i,_t=r}return null}function kc(){if(null!==Ql){var e=bt(Yl),t=xl.transition,n=_t;try{if(xl.transition=null,_t=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Nl))throw Error(o(331));var i=Nl;for(Nl|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var f=(d=Xa).sibling,p=d.return;if(sl(d),d===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Xa=y;break e}Xa=s.return}}var _=e.current;for(Xa=_;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=_;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Ic(l,l.return,S)}if(l===a){Xa=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xa=w;break e}Xa=l.return}}if(Nl=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{_t=n,xl.transition=t}}return!1}function Ec(e,t,n){e=Lo(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Lo(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Al&n)===n&&(4===Ll||3===Ll&&(130023424&Al)===Al&&500>$e()-Bl?fc(e,0):jl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Po(e,t))&&(vt(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cc(e,n)}function Pc(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Mc(n.children,i,s,t);case E:a=8,i|=8;break;case I:return(e=Ac(12,n,t,2|i)).elementType=I,e.lanes=s,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=s,e;case P:return(e=Ac(19,n,t,i)).elementType=P,e.lanes=s,e;case O:return Fc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case x:a=11;break e;case R:a=14;break e;case A:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Mc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,o,s,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ac(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(o),e}function Bc(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,o,s,a,l){return(e=Vc(n,r,!0,e,0,o,0,a,l)).context=Bc(null),n=e.current,(o=Do(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Zc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,s))&&(rc(e,i,s,o),Mo(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),po();break;case 5:ss(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ti(ls,1&ls.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ti(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Xi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Za(e,t),e=t.pendingProps;var i=Ri(t,xi.current);Io(t,n),i=Es(null,t,r,e,i,n);var s=Is();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ao(t),i.updater=Bo,t.stateNode=i,i._reactInternals=t,Ho(t,r,e,n),t=Na(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Za(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Oo(e,t),Uo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ta(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ua(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$o(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ti(yo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ni.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Do(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Eo(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Eo(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Io(t,n),r=r(i=To(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),ka(e,t,r,i=vo(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Za(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,Io(t,n),Zo(t,r,i),Ho(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ia(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}Zc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=qc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),dc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),dc((function(){Zc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Zc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Zc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,$e()),0===(6&Nl)&&(ql=$e()+500,Bi()))}break;case 13:dc((function(){var t=Po(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},St=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Po(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},Et=function(){return _t},It=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));K(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uc,Ne=dc;var tu={usingClientEntryPoint:!1,Events:[_i,bi,wi,Te,Ce,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(o(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:(e,t,n)=>{"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:(e,t,n)=>{"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},9117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+x(l,0):o,w(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(s,t,i,"",(function(e){return e}))):null!=s&&(T(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+x(a=e[c],c);l+=N(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=o+x(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=_,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},2791:(e,t,n)=>{"use strict";e.exports=n(9117)},184:(e,t,n)=>{"use strict";e.exports=n(6374)},6813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,O(S);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var o=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,I=null,T=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function P(){if(null!==I){var e=t.unstable_now();x=e;var n=!0;try{n=I(!0,e)}finally{n?k():(E=!1,I=null)}}else E=!1}if("function"===typeof _)k=function(){_(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=P,k=function(){A.postMessage(null)}}else k=function(){v(P,0)};function O(e){I=e,E||(E=!0,k())}function D(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(T),T=-1):g=!0,D(w,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:(e,t,n)=>{"use strict";e.exports=n(6813)},188:(e,t,n)=>{var r={"./1.png":1658,"./2.png":25,"./3.png":534,"./4.png":7948,"./5.png":8571,"./6.png":1836,"./7.png":4921,"./8.png":5720,"./9.png":3421};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=188},1658:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/1.501a3fa1556e5be88106.png"},25:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/2.3528d428b32b9b36c2b1.png"},534:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/3.11cfd09a075c40050db4.png"},7948:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/4.787ebfff571f2d2cfb22.png"},8571:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/5.1a06fd9c515fc952ccfe.png"},1836:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/6.0d85dd43873830986d29.png"},4921:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/7.91ac03e6c1779067de4d.png"},5720:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/8.5063dabd84ec246ace7b.png"},3421:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/9.e67a672949148e3bb23d.png"},434:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},7071:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},7462:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:()=>r})},3366:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:()=>r})},3733:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}n.d(t,{Z:()=>i});const i=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Ge,SDK_VERSION:()=>mn,_DEFAULT_ENTRY_NAME:()=>Jt,_addComponent:()=>rn,_addOrOverwriteComponent:()=>on,_apps:()=>en,_clearComponents:()=>dn,_components:()=>nn,_getProvider:()=>an,_isFirebaseApp:()=>cn,_isFirebaseServerApp:()=>un,_registerComponent:()=>sn,_removeServiceInstance:()=>ln,_serverApps:()=>tn,deleteApp:()=>bn,getApp:()=>yn,getApps:()=>_n,initializeApp:()=>gn,initializeServerApp:()=>vn,onLog:()=>Sn,registerVersion:()=>wn,setLogLevel:()=>kn});var t,r=n(2791),i=n.t(r,2),o=n(1250),s=n(4164),a=n.t(s,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const c="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,d=t.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){d=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:d,location:b.location,delta:n})}function _(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:p(e);return u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let b={get action(){return d},get location(){return e(o,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(c,y),m=e,()=>{o.removeEventListener(c,y),m=null}},createHref:e=>n(o,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){d=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=v()+1;let l=h(i,g),c=b.createHref(i);try{a.pushState(l,"",c)}catch(WS){if(WS instanceof DOMException&&"DataCloneError"===WS.name)throw WS;o.location.assign(c)}s&&m&&m({action:d,location:b.location,delta:1})},replace:function(e,n){d=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=v();let o=h(i,g),l=b.createHref(i);a.replaceState(o,"",l),s&&m&&m({action:d,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=A(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s)o=N(i[s],R(r));return o}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(u(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=F([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=b(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:[\w-]+$/,S=3,k=2,E=1,I=10,T=-2,C=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=T),t&&(r+=k),n.filter((e=>!C(e))).reduce(((e,t)=>e+(w.test(t)?S:""===t?E:I)),r)}function N(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:F([i,c.pathname]),pathnameBase:U(F([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=F([i,c.pathnameBase]))}return o}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(WS){return d(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+WS+")."),e}}(l||"",r),e}),{});return{params:l,pathname:o,pathnameBase:s,pattern:e}}function R(e){try{return decodeURI(e)}catch(WS){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+WS+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=D(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=l({},e),u(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:j(r),hash:z(i)}}(i,o),d=a&&"/"!==a&&a.endsWith("/"),h=(s||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!h||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}const W=r.createContext(null);const H=r.createContext(null);const K=r.createContext(null);const G=r.createContext(null);const Q=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=r.createContext(null);function $(){return null!=r.useContext(G)}function J(){return $()||u(!1),r.useContext(G).location}function X(e){r.useContext(K).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Q);return e?function(){let{router:e}=ce(ae.UseNavigateStable),t=de(le.UseNavigateStable),n=r.useRef(!1);return X((()=>{n.current=!0})),r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Z({fromRouteId:t},i)))}),[e,t])}():function(){$()||u(!1);let e=r.useContext(W),{basename:t,future:n,navigator:i}=r.useContext(K),{matches:o}=r.useContext(Q),{pathname:s}=J(),a=JSON.stringify(L(o,n.v7_relativeSplatPath)),l=r.useRef(!1);return X((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let o=M(n,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:F([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,a,s,e])}()}function te(e,n,i,o){$()||u(!1);let{navigator:s}=r.useContext(K),{matches:a}=r.useContext(Q),l=a[a.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=J();if(n){var p;let e="string"===typeof n?m(n):n;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||u(!1),h=e}else h=f;let g=h.pathname||"/",v=y(e,{pathname:"/"===d?g:g.slice(d.length)||"/"});let _=se(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([d,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:F([d,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,o);return n&&_?r.createElement(G.Provider,{value:{location:Z({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},_):_}function ne(){let e=function(){var e;let t=r.useContext(Y),n=ue(le.UseRouteError),i=de(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const re=r.createElement(ne,null);class ie extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Q.Provider,{value:this.props.routeContext},r.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(W);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Q.Provider,{value:t},i)}function se(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,d=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=d>=0?a.slice(0,d+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,u=!1,h=null,f=null;var p;n&&(s=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||re,c&&(d<0&&0===o?(p="route-fallback",!1||he[p]||(he[p]=!0),u=!0,f=null):d===o&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?h:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(oe,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(ie,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=r.useContext(W);return t||u(!1),t}function ue(e){let t=r.useContext(H);return t||u(!1),t}function de(e){let t=function(e){let t=r.useContext(Q);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const he={};i.startTransition;function fe(e){u(!1)}function pe(e){let{basename:n="/",children:i=null,location:o,navigationType:s=t.Pop,navigator:a,static:l=!1,future:c}=e;$()&&u(!1);let d=n.replace(/^\/*/,"/"),h=r.useMemo((()=>({basename:d,navigator:a,static:l,future:Z({v7_relativeSplatPath:!1},c)})),[d,c,a,l]);"string"===typeof o&&(o=m(o));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=o,_=r.useMemo((()=>{let e=A(f,d);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:s}}),[d,f,p,g,v,y,s]);return null==_?null:r.createElement(K.Provider,{value:h},r.createElement(G.Provider,{children:i,value:_}))}function me(e){let{children:t,location:n}=e;return te(ge(t),n)}new Promise((()=>{}));r.Component;function ge(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ge(e.props.children,o));e.type!==fe&&u(!1),e.props.index&&e.props.children&&u(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ge(e.props.children,o)),n.push(s)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;const ve=i.startTransition;a.flushSync,i.useId;function ye(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=s.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=r.useCallback((e=>{d&&ve?ve((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>l.listen(h)),[l,h]),r.createElement(pe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var _e,be;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_e||(_e={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(be||(be={}));const we=!1,Se=!1,ke="${JSCORE_VERSION}",Ee=function(e,t){if(!e)throw Ie(t)},Ie=function(e){return new Error("Firebase Database ("+ke+") INTERNAL ASSERT FAILED: "+e)},Te=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;a||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Te(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new xe;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(e){const t=Te(e);return Ce.encodeByteArray(t,!0)},Pe=function(e){return Ne(e).replace(/\./g,"")},Re=function(e){try{return Ce.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ae(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ae(e[n],t[n]));return e}const Oe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,De=()=>{try{return Oe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Re(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Le=()=>{var e;return null===(e=De())||void 0===e?void 0:e.config};class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Fe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(o)),""].join(".")}function Ue(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function ze(){var e;const t=null===(e=De())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Ve(){return"object"===typeof self&&self.self===self}function Be(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function qe(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ze(){const e=Ue();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function We(){return!0===we||!0===Se}function He(){return!ze()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Ge extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ye,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ge(n,o,t)}}const Ye=/\{\$([^}]+)}/g;function $e(e){return JSON.parse(e)}function Je(e){return JSON.stringify(e)}const Xe=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=$e(Re(o[0])||""),n=$e(Re(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function et(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function nt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function rt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function it(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(ot(n)&&ot(o)){if(!it(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ot(e){return null!==e&&"object"===typeof e}function st(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function at(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function lt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ct{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^s&(a^l),i=1518500249):(r=s^a^l,i=1859775393):u<60?(r=s&a|l&(s|a),i=2400959708):(r=s^a^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function ut(e,t){const n=new dt(e,t);return n.subscribe.bind(n)}class dt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ht),void 0===r.error&&(r.error=ht),void 0===r.complete&&(r.complete=ht);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ht(){}const ft=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function pt(e,t){return"".concat(e," failed: ").concat(t," argument ")}function mt(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(pt(e,t)+"must be a valid function.")}function gt(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(pt(e,t)+"must be a valid context object.")}const vt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function yt(e){return e&&e._delegate?e._delegate:e}class _t{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const bt="[DEFAULT]";class wt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Me;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bt})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:St(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return this.component?this.component.multipleInstances?e:bt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function St(e){return e===bt?void 0:e}class kt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Et=[];var It;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(It||(It={}));const Tt={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},Ct=It.INFO,xt={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},Nt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=xt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Pt{constructor(e){this.name=e,this._logLevel=Ct,this._logHandler=Nt,this._userLogHandler=null,Et.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in It))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Tt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...t),this._logHandler(this,It.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...t),this._logHandler(this,It.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.INFO,...t),this._logHandler(this,It.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.WARN,...t),this._logHandler(this,It.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.ERROR,...t),this._logHandler(this,It.ERROR,...t)}}const Rt=(e,t)=>t.some((t=>e instanceof t));let At,Ot;const Dt=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,Ft=new WeakMap,Ut=new WeakMap;let jt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Lt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Mt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function zt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ot||(Ot=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(qt(this),n),Bt(Dt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bt(e.apply(qt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(qt(this),t,...r);return Mt.set(o,t.sort?t.sort():[t]),Bt(o)}}function Vt(e){return"function"===typeof e?zt(e):(e instanceof IDBTransaction&&function(e){if(Lt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Lt.set(e,t)}(e),Rt(e,At||(At=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,jt):e)}function Bt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Bt(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Dt.set(t,e)})).catch((()=>{})),Ut.set(t,e),t}(e);if(Ft.has(e))return Ft.get(e);const t=Vt(e);return t!==e&&(Ft.set(e,t),Ut.set(t,e)),t}const qt=e=>Ut.get(e);const Zt=["get","getKey","getAll","getAllKeys","count"],Wt=["put","add","delete","clear"],Ht=new Map;function Kt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ht.get(t))return Ht.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Wt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Zt.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return Ht.set(t,o),o}jt=(e=>({...e,get:(t,n,r)=>Kt(t,n)||e.get(t,n,r),has:(t,n)=>!!Kt(t,n)||e.has(t,n)}))(jt);class Gt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Qt="@firebase/app",Yt="0.10.3",$t=new Pt("@firebase/app"),Jt="[DEFAULT]",Xt={[Qt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,tn=new Map,nn=new Map;function rn(e,t){try{e.container.addComponent(t)}catch(n){$t.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function on(e,t){e.container.addOrOverwriteComponent(t)}function sn(e){const t=e.name;if(nn.has(t))return $t.debug("There were multiple attempts to register component ".concat(t,".")),!1;nn.set(t,e);for(const n of en.values())rn(n,e);for(const n of tn.values())rn(n,e);return!0}function an(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ln(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jt;an(e,t).clearInstance(n)}function cn(e){return void 0!==e.options}function un(e){return void 0!==e.settings}function dn(){nn.clear()}const hn=new Qe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class fn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new _t("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}class pn extends fn{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,wn(Qt,Yt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){bn(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw hn.create("server-app-deleted")}}const mn="10.12.0";function gn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Jt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw hn.create("bad-app-name",{appName:String(i)});if(n||(n=Le()),!n)throw hn.create("no-options");const o=en.get(i);if(o){if(it(n,o.options)&&it(r,o.config))return o;throw hn.create("duplicate-app",{appName:i})}const s=new kt(i);for(const l of nn.values())s.addComponent(l);const a=new fn(n,r,s);return en.set(i,a),a}function vn(e,t){if(Ve())throw hn.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=cn(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw hn.create("finalization-registry-not-supported",{});const i=""+(o=JSON.stringify(r),[...o].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var o;const s=tn.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;const a=new kt(i);for(const c of nn.values())a.addComponent(c);const l=new pn(n,t,i,a);return tn.set(i,l),l}function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt;const t=en.get(e);if(!t&&e===Jt&&Le())return gn();if(!t)throw hn.create("no-app",{appName:e});return t}function _n(){return Array.from(en.values())}async function bn(e){let t=!1;const n=e.name;if(en.has(n))t=!0,en.delete(n);else if(tn.has(n)){e.decRefCount()<=0&&(tn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function wn(e,t,n){var r;let i=null!==(r=Xt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void $t.warn(e.join(" "))}sn(new _t("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Sn(e,t){if(null!==e&&"function"!==typeof e)throw hn.create("invalid-log-argument");!function(e,t){for(const n of Et){let r=null;t&&t.level&&(r=Tt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:It[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function kn(e){var t;t=e,Et.forEach((e=>{e.setLogLevel(t)}))}const En="firebase-heartbeat-database",In=1,Tn="firebase-heartbeat-store";let Cn=null;function xn(){return Cn||(Cn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Bt(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Bt(s.result),e.oldVersion,e.newVersion,Bt(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(En,In,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Tn)}catch(n){console.warn(n)}}}).catch((e=>{throw hn.create("idb-open",{originalErrorMessage:e.message})}))),Cn}async function Nn(e,t){try{const n=(await xn()).transaction(Tn,"readwrite"),r=n.objectStore(Tn);await r.put(t,Pn(e)),await n.done}catch(n){if(n instanceof Ge)$t.warn(n.message);else{const e=hn.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});$t.warn(e.message)}}}function Pn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Rn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new On(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=An();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=An(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Dn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Pe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function An(){return(new Date).toISOString().substring(0,10)}class On{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ke()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(WS){t(WS)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await xn()).transaction(Tn),n=await t.objectStore(Tn).get(Pn(e));return await t.done,n}catch(t){if(t instanceof Ge)$t.warn(t.message);else{const e=hn.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});$t.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Dn(e){return Pe(JSON.stringify({version:2,heartbeats:e})).length}var Ln;Ln="",sn(new _t("platform-logger",(e=>new Gt(e)),"PRIVATE")),sn(new _t("heartbeat",(e=>new Rn(e)),"PRIVATE")),wn(Qt,Yt,Ln),wn(Qt,Yt,"esm2017"),wn("fire-js","");class Mn{constructor(e,t){this._delegate=e,this.firebase=t,rn(e,new _t("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),bn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){rn(this._delegate,e)}_addOrOverwriteComponent(e){on(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Fn=new Qe("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Un=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=gn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(et(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:wn,setLogLevel:kn,onLog:Sn,apps:null,SDK_VERSION:mn,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(sn(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw Fn.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&Ae(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!et(n,e=e||Jt))throw Fn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Mn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ae(n,e)},createSubscribe:ut,ErrorFactory:Qe,deepExtend:Ae}),n}(),jn=new Pt("@firebase/app-compat");if(Ve()&&void 0!==self.firebase){jn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&jn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const zn=Un;!function(e){wn("@firebase/app-compat","0.2.33",e)}();zn.registerVersion("firebase","10.12.0","app-compat");function Vn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Bn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},qn="EMAIL_SIGNIN",Zn="PASSWORD_RESET",Wn="RECOVER_EMAIL",Hn="REVERT_SECOND_FACTOR_ADDITION",Kn="VERIFY_AND_CHANGE_EMAIL",Gn="VERIFY_EMAIL";function Qn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},$n=Qn,Jn=new Qe("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xn=new Pt("@firebase/auth");function er(e){if(Xn.logLevel<=It.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xn.error("Auth (".concat(mn,"): ").concat(e),...n)}}function tr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw sr(e,...n)}function nr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sr(e,...n)}function rr(e,t,n){const r=Object.assign(Object.assign({},$n()),{[t]:n});return new Qe("auth","Firebase",r).create(t,{appName:e.name})}function ir(e){return rr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function or(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&tr(e,"argument-error"),rr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function sr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Jn.create(e,...n)}function ar(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw sr(t,...r)}}function lr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw er(t),new Error(t)}function cr(e,t){e||lr(t)}function ur(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function dr(){return"http:"===hr()||"https:"===hr()}function hr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class fr{constructor(e,t){this.shortDelay=e,this.longDelay=t,cr(t>e,"Short delay should be less than long delay!"),this.isMobile=je()||qe()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(dr()||Be()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function pr(e,t){cr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class mr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},vr=new fr(3e4,6e4);function yr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function _r(e,t,n,r){return br(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=st(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),mr.fetch()(Sr(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function br(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},gr),t);try{const t=new Er(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ir(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ir(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Ir(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Ir(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw rr(e,a,s);tr(e,a)}}catch(i){if(i instanceof Ge)throw i;tr(e,"network-request-failed",{message:String(i)})}}async function wr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await _r(e,t,n,r,i);return"mfaPendingCredential"in o&&tr(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Sr(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?pr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function kr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Er{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(nr(this.auth,"network-request-failed"))),vr.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ir(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nr(e,t,r);return i.customData._tokenResponse=n,i}function Tr(e){return void 0!==e&&void 0!==e.getResponse}function Cr(e){return void 0!==e&&void 0!==e.enterprise}class xr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Nr(e,t){return _r(e,"GET","/v2/recaptchaConfig",yr(e,t))}async function Pr(e,t){return _r(e,"POST","/v1/accounts:lookup",t)}function Rr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Ar(e){return 1e3*Number(e)}function Or(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return er("JWT malformed, contained fewer than 3 sections"),null;try{const e=Re(n);return e?JSON.parse(e):(er("Failed to decode base64 JWT payload"),null)}catch(i){return er("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Dr(e){const t=Or(e);return ar(t,"internal-error"),ar("undefined"!==typeof t.exp,"internal-error"),ar("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Lr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Ge&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Mr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Fr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rr(this.lastLoginAt),this.creationTime=Rr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ur(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Lr(e,Pr(n,{idToken:r}));ar(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?jr(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Fr(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function jr(e){return e.map((e=>{var{providerId:t}=e,n=Vn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class zr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ar(e.idToken,"internal-error"),ar("undefined"!==typeof e.idToken,"internal-error"),ar("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Dr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ar(0!==e.length,"internal-error");const t=Dr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ar(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await br(e,{},(async()=>{const n=st({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Sr(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",mr.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new zr;return n&&(ar("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(ar("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(ar("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zr,this.toJSON())}_performRefresh(){return lr("not implemented")}}function Vr(e,t){ar("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Br{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Vn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Lr(this,this.stsTokenManager.getToken(this.auth,e));return ar(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=yt(e),r=await n.getIdToken(t),i=Or(r);ar(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Rr(Ar(i.auth_time)),issuedAtTime:Rr(Ar(i.iat)),expirationTime:Rr(Ar(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=yt(e);await Ur(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ar(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ar(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ur(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await Lr(this,async function(e,t){return _r(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:S}=t;ar(y&&S,e,"internal-error");const k=zr.fromJSON(this.name,S);ar("string"===typeof y,e,"internal-error"),Vr(u,e.name),Vr(d,e.name),ar("boolean"===typeof _,e,"internal-error"),ar("boolean"===typeof b,e,"internal-error"),Vr(h,e.name),Vr(f,e.name),Vr(p,e.name),Vr(m,e.name),Vr(g,e.name),Vr(v,e.name);const E=new Br({uid:y,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new zr;r.updateFromServerResponse(t);const i=new Br({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ur(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ar(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?jr(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new zr;s.updateFromIdToken(n);const a=new Br({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Fr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const qr=new Map;function Zr(e){cr(e instanceof Function,"Expected a class definition");let t=qr.get(e);return t?(cr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qr.set(e,t),t)}class Wr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Wr.type="NONE";const Hr=Wr;function Kr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Gr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Kr(this.userKey,r.apiKey,i),this.fullPersistenceKey=Kr("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Gr(Zr(Hr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Zr(Hr);const o=Kr(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=Br._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new Gr(i,e,n)):new Gr(i,e,n)}}function Qr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Yr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ti(t))return"Blackberry";if(ni(t))return"Webos";if($r(t))return"Safari";if((t.includes("chrome/")||Jr(t))&&!t.includes("edge/"))return"Chrome";if(ei(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/firefox\//i.test(e)}function $r(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/crios\//i.test(e)}function Xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/iemobile/i.test(e)}function ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/android/i.test(e)}function ti(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/blackberry/i.test(e)}function ni(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/webos/i.test(e)}function ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return ri(e)||ei(e)||ni(e)||ti(e)||/windows phone/i.test(e)||Xr(e)}function oi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qr(Ue());break;case"Worker":t="".concat(Qr(Ue()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(mn,"/").concat(r)}class si{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ai{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class li{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ui(this),this.idTokenSubscription=new ui(this),this.beforeStateQueue=new si(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Gr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Pr(this,{idToken:e}),n=await Br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(un(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ar(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ur(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(ir(this));const t=e?yt(e):null;return t&&ar(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ar(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return un(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(ir(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Zr(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return _r(e,"GET","/v2/passwordPolicy",yr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ai(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qe("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return _r(e,"POST","/v2/accounts:revokeToken",yr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zr(e)||this._popupRedirectResolver;ar(t,this,"argument-error"),this.redirectPersistenceManager=await Gr.create(this,[Zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ar(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ar(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xn.logLevel<=It.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xn.warn("Auth (".concat(mn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ci(e){return yt(e)}class ui{constructor(e){this.auth=e,this.observer=null,this.addObserver=ut((e=>this.observer=e))}get next(){return ar(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let di={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hi(e){return di.loadJS(e)}function fi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class pi{constructor(e){this.type="recaptcha-enterprise",this.auth=ci(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Cr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Nr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new xr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Cr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=di.recaptchaEnterpriseScript;0!==t.length&&(t+=i),hi(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function mi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new pi(e);let o;try{o=await i.verify(n)}catch(WS){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function gi(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await mi(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await mi(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function vi(e,t,n){const r=ci(e);ar(r._canInitEmulator,r,"emulator-config-failed"),ar(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=yi(t),{host:s,port:a}=function(e){const t=yi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:_i(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:_i(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function yi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function _i(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class bi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,t){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}async function wi(e,t){return _r(e,"POST","/v1/accounts:resetPassword",yr(e,t))}async function Si(e,t){return _r(e,"POST","/v1/accounts:signUp",t)}async function ki(e,t){return wr(e,"POST","/v1/accounts:signInWithPassword",yr(e,t))}async function Ei(e,t){return _r(e,"POST","/v1/accounts:sendOobCode",yr(e,t))}async function Ii(e,t){return Ei(e,t)}async function Ti(e,t){return Ei(e,t)}class Ci extends bi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ci(e,t,"password")}static _fromEmailAndCode(e,t){return new Ci(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return gi(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ki);case"emailLink":return async function(e,t){return wr(e,"POST","/v1/accounts:signInWithEmailLink",yr(e,t))}(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return gi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Si);case"emailLink":return async function(e,t){return wr(e,"POST","/v1/accounts:signInWithEmailLink",yr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xi(e,t){return wr(e,"POST","/v1/accounts:signInWithIdp",yr(e,t))}class Ni extends bi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ni(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Vn(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Ni(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return xi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=st(t)}return e}}const Pi={USER_NOT_FOUND:"user-not-found"};class Ri extends bi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ri({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ri({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return wr(e,"POST","/v1/accounts:signInWithPhoneNumber",yr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await wr(e,"POST","/v1/accounts:signInWithPhoneNumber",yr(e,t));if(n.temporaryProof)throw Ir(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return wr(e,"POST","/v1/accounts:signInWithPhoneNumber",yr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Pi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ri({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ai{constructor(e){var t,n,r,i,o,s;const a=at(lt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ar(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=at(lt(e)).link,n=t?at(lt(t)).deep_link_id:null,r=at(lt(e)).deep_link_id;return(r?at(lt(r)).link:null)||r||n||t||e}(e);try{return new Ai(t)}catch(n){return null}}}class Oi{constructor(){this.providerId=Oi.PROVIDER_ID}static credential(e,t){return Ci._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ai.parseLink(t);return ar(n,"argument-error"),Ci._fromEmailAndCode(e,n.code,n.tenantId)}}Oi.PROVIDER_ID="password",Oi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Oi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Di{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Li extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Mi extends Li{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return ar("providerId"in t&&"signInMethod"in t,"argument-error"),Ni._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ar(e.idToken||e.accessToken,"argument-error"),Ni._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Mi.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Mi.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new Mi(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(l){return null}}}class Fi extends Li{constructor(){super("facebook.com")}static credential(e){return Ni._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fi.credential(t.oauthAccessToken)}catch(n){return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fi.PROVIDER_ID="facebook.com";class Ui extends Li{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ni._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ui.credential(n,r)}catch(i){return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com",Ui.PROVIDER_ID="google.com";class ji extends Li{constructor(){super("github.com")}static credential(e){return Ni._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ji.credential(t.oauthAccessToken)}catch(n){return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com",ji.PROVIDER_ID="github.com";class zi extends bi{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return xi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new zi(n,i):null}static _create(e,t){return new zi(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vi extends Di{constructor(e){ar(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Vi.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Vi.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=zi.fromJSON(e);return ar(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return zi._create(r,n)}catch(i){return null}}}class Bi extends Li{constructor(){super("twitter.com")}static credential(e,t){return Ni._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Bi.credential(n,r)}catch(i){return null}}}async function qi(e,t){return wr(e,"POST","/v1/accounts:signUp",yr(e,t))}Bi.TWITTER_SIGN_IN_METHOD="twitter.com",Bi.PROVIDER_ID="twitter.com";class Zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Br._fromIdTokenResponse(e,n,r),o=Wi(n);return new Zi({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Wi(n);return new Zi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Wi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Hi extends Ge{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Hi.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Hi(e,t,n,r)}}function Ki(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Hi._fromErrorAndOperation(e,n,t,r);throw n}))}function Gi(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Qi(e,t){const n=yt(e);await $i(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return _r(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Gi(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Yi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Lr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Zi._forOperation(e,"link",r)}async function $i(e,t,n){await Ur(t);const r=!1===e?"provider-already-linked":"no-such-provider";ar(Gi(t.providerData).has(n)===e,t.auth,r)}async function Ji(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(un(r.app))return Promise.reject(ir(r));const i="reauthenticate";try{const o=await Lr(e,Ki(r,i,t,e),n);ar(o.idToken,r,"internal-error");const s=Or(o.idToken);ar(s,r,"internal-error");const{sub:a}=s;return ar(e.uid===a,r,"user-mismatch"),Zi._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&tr(r,"user-mismatch"),o}}async function Xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(un(e.app))return Promise.reject(ir(e));const r="signIn",i=await Ki(e,r,t),o=await Zi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function eo(e,t){return Xi(ci(e),t)}async function to(e,t){const n=yt(e);return await $i(!1,n,t.providerId),Yi(n,t)}async function no(e,t){return Ji(yt(e),t)}async function ro(e,t){if(un(e.app))return Promise.reject(ir(e));const n=ci(e),r=await async function(e,t){return wr(e,"POST","/v1/accounts:signInWithCustomToken",yr(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Zi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class io{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?oo._fromServerResponse(e,t):"totpInfo"in t?so._fromServerResponse(e,t):tr(e,"internal-error")}}class oo extends io{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new oo(t)}}class so extends io{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new so(t)}}function ao(e,t,n){var r;ar((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ar("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ar(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ar(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function lo(e){const t=ci(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function co(e,t,n){const r=ci(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ao(r,i,n),await gi(r,i,"getOobCode",Ii)}async function uo(e,t){await async function(e,t){return _r(e,"POST","/v1/accounts:update",yr(e,t))}(yt(e),{oobCode:t})}async function ho(e,t){const n=yt(e),r=await wi(n,{oobCode:t}),i=r.requestType;switch(ar(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ar(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ar(r.mfaInfo,n,"internal-error");default:ar(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=io._fromServerResponse(ci(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function fo(e,t,n){if(un(e.app))return Promise.reject(ir(e));const r=ci(e),i=gi(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qi),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&lo(e),t})),s=await Zi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function po(e,t,n){return un(e.app)?Promise.reject(ir(e)):eo(yt(e),Oi.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&lo(e),t}))}async function mo(e,t){const n={identifier:t,continueUri:dr()?ur():"http://localhost"},{signinMethods:r}=await async function(e,t){return _r(e,"POST","/v1/accounts:createAuthUri",yr(e,t))}(yt(e),n);return r||[]}async function go(e,t){const n=yt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ao(n.auth,r,t);const{email:i}=await async function(e,t){return Ei(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function vo(e,t,n){const r=yt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&ao(r.auth,i,n);const{email:o}=await async function(e,t){return Ei(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function yo(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=yt(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await Lr(i,async function(e,t){return _r(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function _o(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await Lr(e,async function(e,t){return _r(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class bo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class wo extends bo{constructor(e,t,n,r){super(e,t,n),this.username=r}}class So extends bo{constructor(e,t){super(e,"facebook.com",t)}}class ko extends wo{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Eo extends bo{constructor(e,t){super(e,"google.com",t)}}class Io extends wo{constructor(e,t,n){super(e,"twitter.com",t,n)}}function To(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Or(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new bo(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new So(o,i);case"github.com":return new ko(o,i);case"google.com":return new Eo(o,i);case"twitter.com":return new Io(o,i,e.screenName||null);case"custom":case"anonymous":return new bo(o,null);default:return new bo(o,r,i)}}(n)}class Co{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Co("enroll",e,t)}static _fromMfaPendingCredential(e){return new Co("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Co._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Co._fromIdtoken(e.multiFactorSession.idToken)}return null}}class xo{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=ci(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>io._fromServerResponse(n,e)));ar(r.mfaPendingCredential,n,"internal-error");const o=Co._fromMfaPendingCredential(r.mfaPendingCredential);return new xo(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Zi._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return ar(t.user,n,"internal-error"),Zi._forOperation(t.user,t.operationType,s);default:tr(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class No{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>io._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new No(e)}async getSession(){return Co._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Lr(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Lr(this.user,function(e,t){return _r(e,"POST","/v2/accounts/mfaEnrollment:withdraw",yr(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const Po=new WeakMap;const Ro="__sak";class Ao{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ro,"1"),this.storage.removeItem(Ro),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Oo extends Ao{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ue();return $r(e)||ri(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ii(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ze()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Oo.type="LOCAL";const Do=Oo;class Lo extends Ao{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Lo.type="SESSION";const Mo=Lo;class Fo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Fo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Uo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fo.receivers=[];class jo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=Uo("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function zo(){return window}function Vo(){return"undefined"!==typeof zo().WorkerGlobalScope&&"function"===typeof zo().importScripts}const Bo="firebaseLocalStorageDb",qo="firebaseLocalStorage",Zo="fbase_key";class Wo{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ho(e,t){return e.transaction([qo],t?"readwrite":"readonly").objectStore(qo)}function Ko(){const e=indexedDB.open(Bo,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(qo,{keyPath:Zo})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(qo)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Bo);return new Wo(e).toPromise()}(),t(await Ko()))}))}))}async function Go(e,t,n){const r=Ho(e,!0).put({[Zo]:t,value:n});return new Wo(r).toPromise()}function Qo(e,t){const n=Ho(e,!0).delete(t);return new Wo(n).toPromise()}class Yo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ko()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vo()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fo._getInstance(Vo()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new jo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ko();return await Go(e,Ro,"1"),await Qo(e,Ro),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Go(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ho(e,!1).get(t),r=await new Wo(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Qo(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ho(e,!1).getAll();return new Wo(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Yo.type="LOCAL";const $o=Yo;const Jo=1e12;class Xo{constructor(e){this.auth=e,this.counter=Jo,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new es(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Jo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Jo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Jo;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class es{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ar(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ts=fi("rcb"),ns=new fr(3e4,6e4);class rs{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=zo().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ar(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Tr(zo().grecaptcha)?Promise.resolve(zo().grecaptcha):new Promise(((n,r)=>{const i=zo().setTimeout((()=>{r(nr(e,"network-request-failed"))}),ns.get());zo()[ts]=()=>{zo().clearTimeout(i),delete zo()[ts];const o=zo().grecaptcha;if(!o||!Tr(o))return void r(nr(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};hi("".concat(di.recaptchaV2Script,"?").concat(st({onload:ts,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(nr(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=zo().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class is{async load(e){return new Xo(e)}clearedOneInstance(){}}const os="recaptcha",ss={theme:"light",type:"image"};class as{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},ss);this.parameters=n,this.type=os,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ci(e),this.isInvisible="invisible"===this.parameters.size,ar("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;ar(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new is:new rs,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ar(!this.parameters.sitekey,this.auth,"argument-error"),ar(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ar("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=zo()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ar(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ar(dr()&&!Vo(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await _r(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ar(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ar(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ls{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ri._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function cs(e,t,n){var r;const i=await n.verify();try{let o;if(ar("string"===typeof i,e,"argument-error"),ar(n.type===os,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){ar("enroll"===t.type,e,"internal-error");const n=await function(e,t){return _r(e,"POST","/v2/accounts/mfaEnrollment:start",yr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ar("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;ar(n,e,"missing-multi-factor-info");const s=await function(e,t){return _r(e,"POST","/v2/accounts/mfaSignIn:start",yr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return _r(e,"POST","/v1/accounts:sendVerificationCode",yr(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class us{constructor(e){this.providerId=us.PROVIDER_ID,this.auth=ci(e)}verifyPhoneNumber(e,t){return cs(this.auth,e,yt(t))}static credential(e,t){return Ri._fromVerification(e,t)}static credentialFromResult(e){const t=e;return us.credentialFromTaggedObject(t)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ri._fromTokenResponse(n,r):null}}function ds(e,t){return t?Zr(t):(ar(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}us.PROVIDER_ID="phone",us.PHONE_SIGN_IN_METHOD="phone";class hs extends bi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fs(e){return Xi(e.auth,new hs(e),e.bypassAuthState)}function ps(e){const{auth:t,user:n}=e;return ar(n,t,"internal-error"),Ji(n,new hs(e),e.bypassAuthState)}async function ms(e){const{auth:t,user:n}=e;return ar(n,t,"internal-error"),Yi(n,new hs(e),e.bypassAuthState)}class gs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fs;case"linkViaPopup":case"linkViaRedirect":return ms;case"reauthViaPopup":case"reauthViaRedirect":return ps;default:tr(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vs=new fr(2e3,1e4);class ys extends gs{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ys.currentPopupAction&&ys.currentPopupAction.cancel(),ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ar(e,this.auth,"internal-error"),e}async onExecution(){cr(1===this.filter.length,"Popup operations only handle one event");const e=Uo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(nr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,vs.get())};e()}}ys.currentPopupAction=null;const _s="pendingRedirect",bs=new Map;class ws extends gs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=bs.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Is(t),r=Es(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}bs.set(this.auth._key(),e)}return this.bypassAuthState||bs.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Ss(e,t){return Es(e)._set(Is(t),"true")}function ks(e,t){bs.set(e._key(),t)}function Es(e){return Zr(e._redirectPersistence)}function Is(e){return Kr(_s,e.config.apiKey,e.name)}function Ts(e,t,n){return async function(e,t,n){if(un(e.app))return Promise.reject(ir(e));const r=ci(e);or(e,t,Di),await r._initializationPromise;const i=ds(r,n);return await Ss(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Cs(e,t,n){return async function(e,t,n){const r=yt(e);if(or(r.auth,t,Di),un(r.auth.app))return Promise.reject(ir(r.auth));await r.auth._initializationPromise;const i=ds(r.auth,n);await Ss(i,r.auth);const o=await Ps(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function xs(e,t,n){return async function(e,t,n){const r=yt(e);or(r.auth,t,Di),await r.auth._initializationPromise;const i=ds(r.auth,n);await $i(!1,r,t.providerId),await Ss(i,r.auth);const o=await Ps(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function Ns(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(un(e.app))return Promise.reject(ir(e));const r=ci(e),i=ds(r,t),o=new ws(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function Ps(e){const t=Uo("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Rs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Os(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Os(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(As(e))}saveEventToCache(e){this.cachedEventUids.add(As(e)),this.lastProcessedEventTime=Date.now()}}function As(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Os(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Ds(e){return _r(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Ls=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ms=/^https?/;function Fs(e){const t=ur(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ms.test(n))return!1;if(Ls.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Us=new fr(3e4,6e4);function js(){const e=zo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function zs(e){return new Promise(((t,n)=>{var r,i,o;function s(){js(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{js(),n(nr(e,"network-request-failed"))},timeout:Us.get()})}if(null===(i=null===(r=zo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=zo().gapi)||void 0===o?void 0:o.load)){const t=fi("iframefcb");return zo()[t]=()=>{gapi.load?s():n(nr(e,"network-request-failed"))},hi("".concat(di.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw Vs=null,e}))}let Vs=null;const Bs=new fr(5e3,15e3),qs="__/auth/iframe",Zs="emulator/auth/iframe",Ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ks(e){const t=e.config;ar(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?pr(t,Zs):"https://".concat(e.config.authDomain,"/").concat(qs),r={apiKey:t.apiKey,appName:e.name,v:mn},i=Hs.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(st(r).slice(1))}async function Gs(e){const t=await function(e){return Vs=Vs||zs(e),Vs}(e),n=zo().gapi;return ar(n,e,"internal-error"),t.open({where:document.body,url:Ks(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ws,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=nr(e,"network-request-failed"),o=zo().setTimeout((()=>{r(i)}),Bs.get());function s(){zo().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const Qs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ys{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function $s(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Qs),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Ue().toLowerCase();n&&(a=Jr(c)?"_blank":n),Yr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ri(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Ys(null);const d=window.open(t||"",a,u);ar(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Ys(d)}const Js="__/auth/handler",Xs="emulator/auth/handler",ea=encodeURIComponent("fac");async function ta(e,t,n,r,i,o){ar(e.config.authDomain,e,"auth-domain-config-required"),ar(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mn,eventId:i};if(t instanceof Di){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",nt(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Li){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ea,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Js);return pr(t,Xs)}(e),"?").concat(st(a).slice(1)).concat(c)}const na="webStorageSupport";const ra=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mo,this._completeRedirectFn=Ns,this._overrideRedirectResult=ks}async _openPopup(e,t,n,r){var i;cr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return $s(e,await ta(e,t,n,ur(),r),Uo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){zo().location.href=e}(await ta(e,t,n,ur(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(cr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Gs(e),n=new Rs(e);return t.register("authEvent",(t=>{ar(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(na,{type:na},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[na];void 0!==i&&t(!!i),tr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ds(e);for(const r of t)try{if(Fs(r))return}catch(n){}tr(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ii()||$r()||ri()}};class ia{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return lr("unexpected MultiFactorSessionType")}}}class oa extends ia{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new oa(e)}_finalizeEnroll(e,t,n){return function(e,t){return _r(e,"POST","/v2/accounts/mfaEnrollment:finalize",yr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return _r(e,"POST","/v2/accounts/mfaSignIn:finalize",yr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class sa{constructor(){}static assertion(e){return oa._fromCredential(e)}}sa.FACTOR_ID="phone";var aa="@firebase/auth",la="1.7.3";class ca{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ar(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=De())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var ua,da;function ha(){return window}ua={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=nr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},di=ua,da="Browser",sn(new _t("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ar(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:da,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oi(da)},c=new li(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),sn(new _t("auth-internal",(e=>(e=>new ca(e))(ci(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),wn(aa,la,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(da)),wn(aa,la,"esm2017");async function fa(e,t,n){var r;const{BuildInfo:i}=ha();cr(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(cr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),s={};return ri()?s.ibi=i.packageName:ei()?s.apn=i.packageName:tr(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,ta(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function pa(e){const{cordova:t}=ha();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const ma=20;class ga extends Rs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function va(e){const t=await ba()._get(wa(e));return t&&await ba()._remove(wa(e)),t}function ya(e,t){var n,r;const i=function(e){const t=Sa(e),n=t.link?decodeURIComponent(t.link):void 0,r=Sa(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Sa(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Sa(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?nr(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function _a(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<ma;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function ba(){return Zr(Do)}function wa(e){return Kr("authEvent",e.config.apiKey,e.name)}function Sa(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return at(n.join("?"))}const ka=class{constructor(){this._redirectPersistence=Mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ns,this._overrideRedirectResult=ks}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new ga(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){tr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,l,c,u;const d=ha();ar("function"===typeof(null===(t=null===d||void 0===d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ar("undefined"!==typeof(null===(n=null===d||void 0===d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ar("function"===typeof(null===(o=null===(i=null===(r=null===d||void 0===d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ar("function"===typeof(null===(l=null===(a=null===(s=null===d||void 0===d?void 0:d.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ar("function"===typeof(null===(u=null===(c=null===d||void 0===d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),bs.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:_a(),postBody:null,tenantId:e.tenantId,error:nr(e,"no-auth-event")}}(e,n,r);await function(e,t){return ba()._set(wa(e),t)}(e,o);const s=await fa(e,o,t);return async function(e,t,n){const{cordova:r}=ha();let i=()=>{};try{await new Promise(((o,s)=>{let a=null;function l(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{s(nr(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),ei()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await pa(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=ha(),n={};ri()?n.iosBundleId=t.packageName:ei()?n.androidPackageName=t.packageName:tr(e,"operation-not-supported-in-this-environment"),await Ds(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=ha(),o=setTimeout((async()=>{await va(e),t.onEvent(Ea())}),500),s=async n=>{clearTimeout(o);const r=await va(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=ya(r,n.url)),t.onEvent(i||Ea())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,l="".concat(i.packageName.toLowerCase(),"://");ha().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&s({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Ea(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:nr("no-auth-event")}}function Ia(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return!("file:"!==Ia()&&"ionic:"!==Ia()&&"capacitor:"!==Ia()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return Ze()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue();return/Edge\/\d+/.test(e)}(e)}function xa(){try{const e=self.localStorage,t=Uo();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ca()||Ke()}catch(e){return Na()&&Ke()}return!1}function Na(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Pa(){return("http:"===Ia()||"https:"===Ia()||Be()||Ta())&&!(qe()||ze())&&xa()&&!Na()}function Ra(){return Ta()&&"undefined"!==typeof document}const Aa={LOCAL:"local",NONE:"none",SESSION:"session"},Oa=ar,Da="persistence";async function La(e){await e._initializationPromise;const t=Ma(),n=Kr(Da,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Ma(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const Fa=ar;class Ua{constructor(){this.browserResolver=Zr(ra),this.cordovaResolver=Zr(ka),this.underlyingResolver=null,this._redirectPersistence=Mo,this._completeRedirectFn=Ns,this._overrideRedirectResult=ks}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ra()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fa(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Ra()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function ja(e){return e.unwrap()}function za(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Za(e,function(e,t){var n;const r=yt(e),i=t;return ar(t.customData.operationType,r,"argument-error"),ar(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),xo._fromError(r,i)}(e,t))}else if(r){const e=Va(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Va(e){const{_tokenResponse:t}=e instanceof Ge?e.customData:e;if(!t)return null;if(!(e instanceof Ge)&&"temporaryProof"in t&&"phoneNumber"in t)return us.credentialFromResult(e);const n=t.providerId;if(!n||n===Bn.PASSWORD)return null;let r;switch(n){case Bn.GOOGLE:r=Ui;break;case Bn.FACEBOOK:r=Fi;break;case Bn.GITHUB:r=ji;break;case Bn.TWITTER:r=Bi;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?zi._create(n,s):Ni._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new Mi(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Ge?r.credentialFromError(e):r.credentialFromResult(e)}function Ba(e,t){return t.catch((t=>{throw t instanceof Ge&&za(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Va(r)),additionalUserInfo:To(e),user:Wa.getOrCreate(n)};var r}))}async function qa(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Ba(e,n.confirm(t))}}class Za{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ba(ja(this.auth),this.resolver.resolveSignIn(e))}}class Wa{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=yt(e);return Po.has(t)||Po.set(t,No._fromUser(t)),Po.get(t)}(e)}static getOrCreate(e){return Wa.USER_MAP.has(e)||Wa.USER_MAP.set(e,new Wa(e)),Wa.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ba(this.auth,to(this._delegate,e))}async linkWithPhoneNumber(e,t){return qa(this.auth,async function(e,t,n){const r=yt(e);await $i(!1,r,"phone");const i=await cs(r.auth,t,yt(n));return new ls(i,(e=>to(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Ba(this.auth,async function(e,t,n){const r=yt(e);or(r.auth,t,Di);const i=ds(r.auth,n);return new ys(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Ua))}async linkWithRedirect(e){return await La(ci(this.auth)),xs(this._delegate,e,Ua)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ba(this.auth,no(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return qa(this.auth,async function(e,t,n){const r=yt(e);if(un(r.auth.app))return Promise.reject(ir(r.auth));const i=await cs(r.auth,t,yt(n));return new ls(i,(e=>no(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Ba(this.auth,async function(e,t,n){const r=yt(e);if(un(r.auth.app))return Promise.reject(nr(r.auth,"operation-not-supported-in-this-environment"));or(r.auth,t,Di);const i=ds(r.auth,n);return new ys(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Ua))}async reauthenticateWithRedirect(e){return await La(ci(this.auth)),Cs(this._delegate,e,Ua)}sendEmailVerification(e){return go(this._delegate,e)}async unlink(e){return await Qi(this._delegate,e),this}updateEmail(e){return function(e,t){const n=yt(e);return un(n.auth.app)?Promise.reject(ir(n.auth)):_o(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return _o(yt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=yt(e);if(un(n.auth.app))return Promise.reject(ir(n.auth));await Yi(n,t)}(this._delegate,e)}updateProfile(e){return yo(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return vo(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wa.USER_MAP=new WeakMap;const Ha=ar;class Ka{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ha(n,"invalid-api-key",{appName:e.name}),Ha(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Ua:void 0;this._delegate=t.initialize({options:{persistence:Qa(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Yn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){vi(this._delegate,e,t)}applyActionCode(e){return uo(this._delegate,e)}checkActionCode(e){return ho(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await wi(yt(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&lo(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ba(this._delegate,fo(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return mo(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ai.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Ha(Pa(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await ci(e)._initializationPromise,Ns(e,t,!1)}(this._delegate,Ua);return e?Ba(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){ci(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=Ga(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=Ga(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=ci(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){ar(t.handleCodeInApp,r,"argument-error"),t&&ao(r,e,t)}(i,n),await gi(r,i,"getOobCode",Ti)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return co(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Oa(Object.values(Aa).includes(t),e,"invalid-persistence-type"),qe()?Oa(t!==Aa.SESSION,e,"unsupported-persistence-type"):ze()?Oa(t===Aa.NONE,e,"unsupported-persistence-type"):Na()?Oa(t===Aa.NONE||t===Aa.LOCAL&&Ke(),e,"unsupported-persistence-type"):Oa(t===Aa.NONE||xa(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Aa.SESSION:t=Mo;break;case Aa.LOCAL:t=await Zr($o)._isAvailable()?$o:Do;break;case Aa.NONE:t=Hr;break;default:return tr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ba(this._delegate,async function(e){var t;if(un(e.app))return Promise.reject(ir(e));const n=ci(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Zi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await qi(n,{returnSecureToken:!0}),i=await Zi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Ba(this._delegate,eo(this._delegate,e))}signInWithCustomToken(e){return Ba(this._delegate,ro(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ba(this._delegate,po(this._delegate,e,t))}signInWithEmailLink(e,t){return Ba(this._delegate,async function(e,t,n){if(un(e.app))return Promise.reject(ir(e));const r=yt(e),i=Oi.credentialWithLink(t,n||ur());return ar(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),eo(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return qa(this._delegate,async function(e,t,n){if(un(e.app))return Promise.reject(ir(e));const r=ci(e),i=await cs(r,t,yt(n));return new ls(i,(e=>eo(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Ha(Pa(),this._delegate,"operation-not-supported-in-this-environment"),Ba(this._delegate,async function(e,t,n){if(un(e.app))return Promise.reject(nr(e,"operation-not-supported-in-this-environment"));const r=ci(e);or(e,t,Di);const i=ds(r,n);return new ys(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Ua))}async signInWithRedirect(e){return Ha(Pa(),this._delegate,"operation-not-supported-in-this-environment"),await La(this._delegate),Ts(this._delegate,e,Ua)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ho(yt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Ga(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Wa.getOrCreate(e)),error:t,complete:n}}function Qa(e,t){const n=function(e,t){const n=Ma();if(!n)return[];const r=Kr(Da,e,t);switch(n.getItem(r)){case Aa.NONE:return[Hr];case Aa.LOCAL:return[$o,Mo];case Aa.SESSION:return[Mo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes($o)||n.push($o),"undefined"!==typeof window)for(const r of[Do,Mo])n.includes(r)||n.push(r);return n.includes(Hr)||n.push(Hr),n}Ka.Persistence=Aa;class Ya{constructor(){this.providerId="phone",this._delegate=new us(ja(zn.auth()))}static credential(e,t){return us.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Ya.PHONE_SIGN_IN_METHOD=us.PHONE_SIGN_IN_METHOD,Ya.PROVIDER_ID=us.PROVIDER_ID;const $a=ar;class Ja{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zn.app();var r;$a(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new as(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Xa;(Xa=zn).INTERNAL.registerComponent(new _t("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ka(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qn,PASSWORD_RESET:Zn,RECOVER_EMAIL:Wn,REVERT_SECOND_FACTOR_ADDITION:Hn,VERIFY_AND_CHANGE_EMAIL:Kn,VERIFY_EMAIL:Gn}},EmailAuthProvider:Oi,FacebookAuthProvider:Fi,GithubAuthProvider:ji,GoogleAuthProvider:Ui,OAuthProvider:Mi,SAMLAuthProvider:Vi,PhoneAuthProvider:Ya,PhoneMultiFactorGenerator:sa,RecaptchaVerifier:Ja,TwitterAuthProvider:Bi,Auth:Ka,AuthCredential:bi,Error:Ge}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Xa.registerVersion("@firebase/auth-compat","0.5.8");var el,tl,nl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},rl={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,s=0;s<t;){if(0==o)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,i),o=0;break}}else for(;s<t;)if(i[o++]=e[s++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(s(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),o=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=s(n)).j(t);d(c)||0<c.l(e);)c=(o=s(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],s=0;s<i;s++)o[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var s=i+(65535&this.i(o))+(65535&e.i(o)),a=(s>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=a>>>16,s&=65535,a&=65535,n[o]=a<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=f*g,p(n,2*i+2*o),n[2*i+2*o+1]+=l*g,p(n,2*i+2*o+1),n[2*i+2*o+1]+=f*m,p(n,2*i+2*o+1),n[2*i+2*o+2]+=l*m,p(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,tl=rl.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),i=a,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=s(Math.pow(n,l)),i=i.j(l).add(s(c))):i=(i=i.j(r)).add(s(c))}return i},el=rl.Integer=r}).apply("undefined"!==typeof nl?nl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var il,ol,sl,al,ll,cl,ul,dl,hl,fl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},pl={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof fl&&fl];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in i))break e;i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,x=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(R)}};var R=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){k(n)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function A(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,O);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=q(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new j(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var Z="closure_lm_"+(1e6*Math.random()|0),W={};function H(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,s(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=s(i)?!!i.capture:!!i,l=X(e);if(l||(e[Z]=l=new V(e)),(n=l.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)G(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,s(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Q(e,t[o],n,r,i);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(o=e.g[t],n,r,i))&&(z(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=X(t))?(B(n,e),0==n.h&&(n.src=null,t[Z]=null)):z(e)}}}function $(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function X(e){return(e=e[Z])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;w(t=new O(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ie(s,r,!0,t)&&i}if(i=ie(s=t.g=e,r,!0,t)&&i,i=ie(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(s=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.da&&s.capture==n){var a=s.listener,l=s.ha||s.src;s.fa&&B(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function se(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,A),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}d(le,A);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function _e(){O.call(this,"c")}d(ye,O),d(_e,O);var be={},we=null;function Se(){return we=we||new ne}function ke(e){O.call(this,be.La,e)}function Ee(e){const t=Se();re(t,new ke(t))}function Ie(e,t){O.call(this,be.STAT_EVENT,e),this.stat=t}function Te(e){const t=Se();re(t,new Ie(t,e))}function Ce(e,t){O.call(this,be.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Pe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",d(ke,O),be.STAT_EVENT="statevent",d(Ie,O),be.Ma="timingevent",d(Ce,O),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Re,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Re=new De;var Fe={},Ue={};function je(e,t,n){e.L=1,e.v=dt(st(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),qe(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var s=H(n,i[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,Ze(e,e.I)}function Ze(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(c(e.ba,e),t)}function We(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Xe(n.h,e)))if(!e.K&&Xe(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var a=s,l=r.L;l&&(a.I=l),a.B&&(We(a),qe(a)),r.g=s}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Wt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=Wt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=h||7==t||Ee(),We(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Ht(this.g);e="";var o=r.length,s=4==Wt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ke(this),He(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==h&&(this.s=4,Te(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Te(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Ge(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),on(d),d.M=!0,Te(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),He(this)}else Pe(this.i,this.l,a,null),Ge(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Wt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ke(this),He(this)}}}catch(h){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),Te(17)),Ke(this),this.s=2,He(this)):Ze(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function st(e){return new ot(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),It(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,_t)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,_t=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){St(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return St(e),t=Tt(e,t),e.g.has(t)}function It(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),h(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function xt(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;s(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){St(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,Et(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")},d(Pt,pe),Pt.prototype.g=function(){return new Rt(this.l,this.j)},Pt.prototype.i=(mt={},function(){return mt}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Dt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Ft,ne);var Ut=/^https?$/i,jt=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),qt(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Wt(e)||2!=e.Z()))if(e.u&&4==Wt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==Wt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var s=String(e.D).match(it)[1]||null;!s&&i.self&&i.self.location&&(s=i.self.location.protocol.slice(0,-1)),o=!Ut.test(s?s.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Wt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Vt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Zt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Zt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Wt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(vl){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if($t(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(st(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}dn(e)}function Yt(e){e.g&&(on(e),e.g.cancel(),e.g=null)}function $t(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||P(),x||(C(),x=!0),N.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Nt(l,e,"req"+n+"_")}catch(o){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||P(),x||(C(),x=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function on(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(st(t)),n.m=null,n.P=!0,ze(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),on(e),e.g=null;var r=2}else{if(!Xe(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Ce(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),dn(e),$t(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof ot?st(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var s=new ot(null);r&&at(s,r),t&&(s.g=t),o&&lt(s,o),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Pt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){_e.call(this),this.status=1}function _n(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void zt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zt(this),this.u=!0,this.g.send(e),this.u=!1}catch(s){zt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let o=this.o;if(this.S&&(o?(o=_(o),w(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Lt(o)))+"&"+t:this.m&&Mt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||$e(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(vn,ye),d(yn,_e),d(_n,pn),_n.prototype.ua=function(){re(this.g,"a")},_n.prototype.ta=function(e){re(this.g,new vn(e))},_n.prototype.sa=function(e){re(this.g,new yn)},_n.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,hl=pl.createWebChannelTransport=function(){return new mn},dl=pl.getStatEventTarget=function(){return Se()},ul=pl.Event=be,cl=pl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,ll=pl.ErrorCode=Ae,Oe.COMPLETE="complete",al=pl.EventType=Oe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,sl=pl.WebChannel=ge,ol=pl.FetchXmlHttpFactory=Pt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,il=pl.XhrIo=Ft}).apply("undefined"!==typeof fl?fl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ml="@firebase/firestore";class gl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gl.UNAUTHENTICATED=new gl(null),gl.GOOGLE_CREDENTIALS=new gl("google-credentials-uid"),gl.FIRST_PARTY=new gl("first-party-uid"),gl.MOCK_USER=new gl("mock-user");let vl="10.12.0";const yl=new Pt("@firebase/firestore");function _l(){return yl.logLevel}function bl(e){if(yl.logLevel<=It.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(kl);yl.debug("Firestore (".concat(vl,"): ").concat(e),...i)}}function wl(e){if(yl.logLevel<=It.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(kl);yl.error("Firestore (".concat(vl,"): ").concat(e),...i)}}function Sl(e){if(yl.logLevel<=It.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(kl);yl.warn("Firestore (".concat(vl,"): ").concat(e),...i)}}function kl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function El(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(vl,") INTERNAL ASSERTION FAILED: ")+e;throw wl(t),new Error(t)}function Il(e,t){e||El()}function Tl(e,t){return e}const Cl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xl extends Ge{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Nl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Pl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Rl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gl.UNAUTHENTICATED)))}shutdown(){}}class Al{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ol{constructor(e){this.t=e,this.currentUser=gl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Nl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nl,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{bl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(bl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nl)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(bl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Il("string"==typeof t.accessToken),new Pl(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Il(null===e||"string"==typeof e),new gl(e)}}class Dl{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=gl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ll{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Dl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(gl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ml{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&bl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,bl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{bl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):bl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Il("string"==typeof e.token),this.R=e.token,new Ml(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ul(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class jl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ul(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function zl(e,t){return e<t?-1:e>t?1:0}function Vl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Bl(e){return e+"\0"}class ql{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xl(Cl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xl(Cl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xl(Cl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xl(Cl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ql.fromMillis(Date.now())}static fromDate(e){return ql.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ql(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zl(this.nanoseconds,e.nanoseconds):zl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zl(e)}static min(){return new Zl(new ql(0,0))}static max(){return new Zl(new ql(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Wl{constructor(e,t,n){void 0===t?t=0:t>e.length&&El(),void 0===n?n=e.length-t:n>e.length-t&&El(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Wl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Hl extends Wl{construct(e,t,n){return new Hl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new xl(Cl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Hl(e)}static emptyPath(){return new Hl([])}}const Kl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gl extends Wl{construct(e,t,n){return new Gl(e,t,n)}static isValidIdentifier(e){return Kl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new xl(Cl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new xl(Cl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new xl(Cl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new xl(Cl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gl(t)}static emptyPath(){return new Gl([])}}class Ql{constructor(e){this.path=e}static fromPath(e){return new Ql(Hl.fromString(e))}static fromName(e){return new Ql(Hl.fromString(e).popFirst(5))}static empty(){return new Ql(Hl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Hl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ql(new Hl(e.slice()))}}class Yl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function $l(e){return e.fields.find((e=>2===e.kind))}function Jl(e){return e.fields.filter((e=>2!==e.kind))}Yl.UNKNOWN_ID=-1;class Xl{constructor(e,t){this.fieldPath=e,this.kind=t}}class ec{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ec(0,rc.min())}}function tc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zl.fromTimestamp(1e9===r?new ql(n+1,0):new ql(n,r));return new rc(i,Ql.empty(),t)}function nc(e){return new rc(e.readTime,e.key,-1)}class rc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new rc(Zl.min(),Ql.empty(),-1)}static max(){return new rc(Zl.max(),Ql.empty(),-1)}}function ic(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ql.comparator(e.documentKey,t.documentKey),0!==n?n:zl(e.largestBatchId,t.largestBatchId))}const oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ac(e){if(e.code!==Cl.FAILED_PRECONDITION||e.message!==oc)throw e;bl("LocalStore","Unexpectedly lost primary lease")}class lc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&El(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new lc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof lc?t:lc.resolve(t)}catch(e){return lc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):lc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):lc.reject(t)}static resolve(e){return new lc(((t,n)=>{t(e)}))}static reject(e){return new lc(((t,n)=>{n(e)}))}static waitFor(e){return new lc(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=lc.resolve(!1);for(const n of e)t=t.next((e=>e?lc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new lc(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new lc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class cc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Nl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new fc(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=yc(t.target.error);this.V.reject(new fc(e,n))}}static open(e,t,n,r){try{return new cc(t,e.transaction(r,n))}catch(e){throw new fc(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(bl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mc(t)}}class uc{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===uc.S(Ue())&&wl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return bl("SimpleDb","Removing database:",e),gc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ke())return!1;if(uc.C())return!0;const e=Ue(),t=uc.S(e),n=0<t&&t<10,r=dc(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(bl("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new fc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new xl(Cl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new xl(Cl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new fc(e,r))},r.onupgradeneeded=e=>{bl("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{bl("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.M(e);const t=cc.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),lc.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(bl("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function dc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class hc{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return gc(this.B.delete())}}class fc extends xl{constructor(e,t){super(Cl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function pc(e){return"IndexedDbTransactionError"===e.name}class mc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(bl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(bl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),gc(n)}add(e){return bl("SimpleDb","ADD",this.store.name,e,e),gc(this.store.add(e))}get(e){return gc(this.store.get(e)).next((t=>(void 0===t&&(t=null),bl("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return bl("SimpleDb","DELETE",this.store.name,e),gc(this.store.delete(e))}count(){return bl("SimpleDb","COUNT",this.store.name),gc(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new lc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new lc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){bl("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new lc(((n,r)=>{t.onerror=e=>{const t=yc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new lc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new hc(i),s=t(i.primaryKey,i.value,o);if(s instanceof lc){const e=s.catch((e=>(o.done(),lc.reject(e))));n.push(e)}o.isDone?r():null===o.K?i.continue():i.continue(o.K)}})).next((()=>lc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gc(e){return new lc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=yc(e.target.error);n(t)}}))}let vc=!1;function yc(e){const t=uc.S(Ue());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new xl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return vc||(vc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class _c{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){bl("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{bl("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){pc(e)?bl("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await ac(e)}await this.X(6e4)}))}}class bc{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return lc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return bl("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(bl("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=nc(t);ic(r,n)>0&&(n=r)})),new rc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class wc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Sc(e){return null==e}function kc(e){return 0===e&&1/e==-1/0}function Ec(e){return"number"==typeof e&&Number.isInteger(e)&&!kc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ic(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Cc(t)),t=Tc(e.get(n),t);return Cc(t)}function Tc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Cc(e){return e+"\x01\x01"}function xc(e){const t=e.length;if(Il(t>=2),2===t)return Il("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Hl.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&El(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:El()}o=t+2}return new Hl(r)}wc.oe=-1;const Nc=["userId","batchId"];function Pc(e,t){return[e,Ic(t)]}function Rc(e,t,n){return[e,Ic(t),n]}const Ac={},Oc=["prefixPath","collectionGroup","readTime","documentId"],Dc=["prefixPath","collectionGroup","documentId"],Lc=["collectionGroup","readTime","prefixPath","documentId"],Mc=["canonicalId","targetId"],Fc=["targetId","path"],Uc=["path","targetId"],jc=["collectionId","parent"],zc=["indexId","uid"],Vc=["uid","sequenceNumber"],Bc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qc=["indexId","uid","orderedDocumentKey"],Zc=["userId","collectionPath","documentId"],Wc=["userId","collectionPath","largestBatchId"],Hc=["userId","collectionGroup","largestBatchId"],Kc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gc=[...Kc,"documentOverlays"],Qc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yc=Qc,$c=[...Yc,"indexConfiguration","indexState","indexEntries"],Jc=$c;class Xc extends sc{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function eu(e,t){const n=Tl(e);return uc.F(n._e,t)}function tu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ru(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class iu{constructor(e,t){this.comparator=e,this.root=t||su.EMPTY}insert(e,t){return new iu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,su.BLACK,null,null))}remove(e){return new iu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,su.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ou(this.root,e,this.comparator,!0)}}class ou{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class su{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:su.RED,this.left=null!=r?r:su.EMPTY,this.right=null!=i?i:su.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new su(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return su.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return su.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,su.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,su.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw El();if(this.right.isRed())throw El();const e=this.left.check();if(e!==this.right.check())throw El();return e+(this.isRed()?0:1)}}su.EMPTY=null,su.RED=!0,su.BLACK=!1,su.EMPTY=new class{constructor(){this.size=0}get key(){throw El()}get value(){throw El()}get color(){throw El()}get left(){throw El()}get right(){throw El()}copy(e,t,n,r,i){return this}insert(e,t,n){return new su(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class au{constructor(e){this.comparator=e,this.data=new iu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lu(this.data.getIterator())}getIteratorFrom(e){return new lu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof au))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new au(this.comparator);return t.data=e,t}}class lu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cu(e){return e.hasNext()?e.getNext():void 0}class uu{constructor(e){this.fields=e,e.sort(Gl.comparator)}static empty(){return new uu([])}unionWith(e){let t=new au(Gl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new uu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class du extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new du("Invalid base64 string: "+e):e}}(e);return new hu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new hu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hu.EMPTY_BYTE_STRING=new hu("");const fu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pu(e){if(Il(!!e),"string"==typeof e){let t=0;const n=fu.exec(e);if(Il(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:mu(e.seconds),nanos:mu(e.nanos)}}function mu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gu(e){return"string"==typeof e?hu.fromBase64String(e):hu.fromUint8Array(e)}function vu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function yu(e){const t=e.mapValue.fields.__previous_value__;return vu(t)?yu(t):t}function _u(e){const t=pu(e.mapValue.fields.__local_write_time__.timestampValue);return new ql(t.seconds,t.nanos)}class bu{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class wu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}const Su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ku={nullValue:"NULL_VALUE"};function Eu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vu(e)?4:Uu(e)?9007199254740991:10:El()}function Iu(e,t){if(e===t)return!0;const n=Eu(e);if(n!==Eu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _u(e).isEqual(_u(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pu(e.timestampValue),r=pu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gu(e.bytesValue).isEqual(gu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mu(e.geoPointValue.latitude)===mu(t.geoPointValue.latitude)&&mu(e.geoPointValue.longitude)===mu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mu(e.integerValue)===mu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=mu(e.doubleValue),r=mu(t.doubleValue);return n===r?kc(n)===kc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Vl(e.arrayValue.values||[],t.arrayValue.values||[],Iu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(tu(n)!==tu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Iu(n[i],r[i])))return!1;return!0}(e,t);default:return El()}}function Tu(e,t){return void 0!==(e.values||[]).find((e=>Iu(e,t)))}function Cu(e,t){if(e===t)return 0;const n=Eu(e),r=Eu(t);if(n!==r)return zl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=mu(e.integerValue||e.doubleValue),r=mu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return xu(e.timestampValue,t.timestampValue);case 4:return xu(_u(e),_u(t));case 5:return zl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=gu(e),r=gu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=zl(n[i],r[i]);if(0!==e)return e}return zl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=zl(mu(e.latitude),mu(t.latitude));return 0!==n?n:zl(mu(e.longitude),mu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Cu(n[i],r[i]);if(e)return e}return zl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Su.mapValue&&t===Su.mapValue)return 0;if(e===Su.mapValue)return 1;if(t===Su.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=zl(r[s],o[s]);if(0!==e)return e;const t=Cu(n[r[s]],i[o[s]]);if(0!==t)return t}return zl(r.length,o.length)}(e.mapValue,t.mapValue);default:throw El()}}function xu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zl(e,t);const n=pu(e),r=pu(t),i=zl(n.seconds,r.seconds);return 0!==i?i:zl(n.nanos,r.nanos)}function Nu(e){return Pu(e)}function Pu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return gu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ql.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Pu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Pu(e.fields[i]));return n+"}"}(e.mapValue):El()}function Ru(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Au(e){return!!e&&"integerValue"in e}function Ou(e){return!!e&&"arrayValue"in e}function Du(e){return!!e&&"nullValue"in e}function Lu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mu(e){return!!e&&"mapValue"in e}function Fu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Fu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Uu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ju(e){return"nullValue"in e?ku:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ru(wu.empty(),Ql.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:El()}function zu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ru(wu.empty(),Ql.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Su:El()}function Vu(e,t){const n=Cu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Bu(e,t){const n=Cu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class qu{constructor(e){this.value=e}static empty(){return new qu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Mu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fu(t)}setAll(e){let t=Gl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Fu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Mu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Mu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){nu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new qu(Fu(this.value))}}function Zu(e){const t=[];return nu(e.fields,((e,n)=>{const r=new Gl([e]);if(Mu(n)){const e=Zu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new uu(t)}class Wu{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Wu(e,0,Zl.min(),Zl.min(),Zl.min(),qu.empty(),0)}static newFoundDocument(e,t,n,r){return new Wu(e,1,t,Zl.min(),n,r,0)}static newNoDocument(e,t){return new Wu(e,2,t,Zl.min(),Zl.min(),qu.empty(),0)}static newUnknownDocument(e,t){return new Wu(e,3,t,Zl.min(),Zl.min(),qu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Hu{constructor(e,t){this.position=e,this.inclusive=t}}function Ku(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Ql.comparator(Ql.fromName(s.referenceValue),n.key):Cu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Gu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Iu(e.position[n],t.position[n]))return!1;return!0}class Qu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Yu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class $u{}class Ju extends $u{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ld(e,t,n):"array-contains"===t?new hd(e,n):"in"===t?new fd(e,n):"not-in"===t?new pd(e,n):"array-contains-any"===t?new md(e,n):new Ju(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new cd(e,n):new ud(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Cu(t,this.value)):null!==t&&Eu(this.value)===Eu(t)&&this.matchesComparison(Cu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return El()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xu extends $u{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Xu(e,t)}matches(e){return ed(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ed(e){return"and"===e.op}function td(e){return"or"===e.op}function nd(e){return rd(e)&&ed(e)}function rd(e){for(const t of e.filters)if(t instanceof Xu)return!1;return!0}function id(e){if(e instanceof Ju)return e.field.canonicalString()+e.op.toString()+Nu(e.value);if(nd(e))return e.filters.map((e=>id(e))).join(",");{const t=e.filters.map((e=>id(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function od(e,t){return e instanceof Ju?function(e,t){return t instanceof Ju&&e.op===t.op&&e.field.isEqual(t.field)&&Iu(e.value,t.value)}(e,t):e instanceof Xu?function(e,t){return t instanceof Xu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&od(n,t.filters[r])),!0)}(e,t):void El()}function sd(e,t){const n=e.filters.concat(t);return Xu.create(n,e.op)}function ad(e){return e instanceof Ju?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Nu(e.value))}(e):e instanceof Xu?function(e){return e.op.toString()+" {"+e.getFilters().map(ad).join(" ,")+"}"}(e):"Filter"}class ld extends Ju{constructor(e,t,n){super(e,t,n),this.key=Ql.fromName(n.referenceValue)}matches(e){const t=Ql.comparator(e.key,this.key);return this.matchesComparison(t)}}class cd extends Ju{constructor(e,t){super(e,"in",t),this.keys=dd("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ud extends Ju{constructor(e,t){super(e,"not-in",t),this.keys=dd("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ql.fromName(e.referenceValue)))}class hd extends Ju{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ou(t)&&Tu(t.arrayValue,this.value)}}class fd extends Ju{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tu(this.value.arrayValue,t)}}class pd extends Ju{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tu(this.value.arrayValue,t)}}class md extends Ju{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Tu(this.value.arrayValue,e)))}}class gd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ue=null}}function vd(e){return new gd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function yd(e){const t=Tl(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>id(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Sc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Nu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Nu(e))).join(",")),t.ue=e}return t.ue}function _d(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!od(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gu(e.startAt,t.startAt)&&Gu(e.endAt,t.endAt)}function bd(e){return Ql.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function wd(e,t){return e.filters.filter((e=>e instanceof Ju&&e.field.isEqual(t)))}function Sd(e,t,n){let r=ku,i=!0;for(const o of wd(e,t)){let e=ku,t=!0;switch(o.op){case"<":case"<=":e=ju(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=ku}Vu({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Vu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function kd(e,t,n){let r=Su,i=!0;for(const o of wd(e,t)){let e=Su,t=!0;switch(o.op){case">=":case">":e=zu(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Su}Bu({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Bu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Ed{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Id(e,t,n,r,i,o,s,a){return new Ed(e,t,n,r,i,o,s,a)}function Td(e){return new Ed(e)}function Cd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function xd(e){return null!==e.collectionGroup}function Nd(e){const t=Tl(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new au(Gl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Qu(r,n))})),e.has(Gl.keyField().canonicalString())||t.ce.push(new Qu(Gl.keyField(),n))}return t.ce}function Pd(e){const t=Tl(e);return t.le||(t.le=Rd(t,Nd(e))),t.le}function Rd(e,t){if("F"===e.limitType)return vd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Qu(e.field,t)}));const n=e.endAt?new Hu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hu(e.startAt.position,e.startAt.inclusive):null;return vd(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ad(e,t){const n=e.filters.concat([t]);return new Ed(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Od(e,t,n){return new Ed(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Dd(e,t){return _d(Pd(e),Pd(t))&&e.limitType===t.limitType}function Ld(e){return"".concat(yd(Pd(e)),"|lt:").concat(e.limitType)}function Md(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>ad(e))).join(", "),"]")),Sc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Nu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Nu(e))).join(",")),"Target(".concat(t,")")}(Pd(e)),"; limitType=").concat(e.limitType,")")}function Fd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ql.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Nd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ku(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Nd(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ku(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Nd(e),t))}(e,t)}function Ud(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jd(e){return(t,n)=>{let r=!1;for(const i of Nd(e)){const e=zd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function zd(e,t,n){const r=e.field.isKeyField()?Ql.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Cu(r,i):El()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return El()}}class Vd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ru(this.inner)}size(){return this.innerSize}}const Bd=new iu(Ql.comparator);function qd(){return Bd}const Zd=new iu(Ql.comparator);function Wd(){let e=Zd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Hd(e){let t=Zd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Kd(){return Qd()}function Gd(){return Qd()}function Qd(){return new Vd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Yd=new iu(Ql.comparator),$d=new au(Ql.comparator);function Jd(){let e=$d;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Xd=new au(zl);function eh(){return Xd}function th(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(t)?"-0":t}}function nh(e){return{integerValue:""+e}}function rh(e,t){return Ec(t)?nh(t):th(e,t)}class ih{constructor(){this._=void 0}}function oh(e,t,n){return e instanceof lh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&vu(t)&&(t=yu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ch?uh(e,t):e instanceof dh?hh(e,t):function(e,t){const n=ah(e,t),r=ph(n)+ph(e.Pe);return Au(n)&&Au(e.Pe)?nh(r):th(e.serializer,r)}(e,t)}function sh(e,t,n){return e instanceof ch?uh(e,t):e instanceof dh?hh(e,t):n}function ah(e,t){return e instanceof fh?function(e){return Au(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class lh extends ih{}class ch extends ih{constructor(e){super(),this.elements=e}}function uh(e,t){const n=mh(t);for(const r of e.elements)n.some((e=>Iu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class dh extends ih{constructor(e){super(),this.elements=e}}function hh(e,t){let n=mh(t);for(const r of e.elements)n=n.filter((e=>!Iu(e,r)));return{arrayValue:{values:n}}}class fh extends ih{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ph(e){return mu(e.integerValue||e.doubleValue)}function mh(e){return Ou(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class gh{constructor(e,t){this.field=e,this.transform=t}}class vh{constructor(e,t){this.version=e,this.transformResults=t}}class yh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yh}static exists(e){return new yh(void 0,e)}static updateTime(e){return new yh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class bh{}function wh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Rh(e.key,yh.none()):new Th(e.key,e.data,yh.none());{const n=e.data,r=qu.empty();let i=new au(Gl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ch(e.key,r,new uu(i.toArray()),yh.none())}}function Sh(e,t,n){e instanceof Th?function(e,t,n){const r=e.value.clone(),i=Nh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ch?function(e,t,n){if(!_h(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Nh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function kh(e,t,n,r){return e instanceof Th?function(e,t,n,r){if(!_h(e.precondition,t))return n;const i=e.value.clone(),o=Ph(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ch?function(e,t,n,r){if(!_h(e.precondition,t))return n;const i=Ph(e.fieldTransforms,r,t),o=t.data;return o.setAll(xh(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return _h(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Eh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ah(r.transform,e||null);null!=i&&(null===n&&(n=qu.empty()),n.set(r.field,i))}return n||null}function Ih(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Vl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ch&&t instanceof ch||e instanceof dh&&t instanceof dh?Vl(e.elements,t.elements,Iu):e instanceof fh&&t instanceof fh?Iu(e.Pe,t.Pe):e instanceof lh&&t instanceof lh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Th extends bh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ch extends bh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Nh(e,t,n){const r=new Map;Il(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,sh(s,a,n[i]))}return r}function Ph(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,oh(e,o,t))}return r}class Rh extends bh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ah extends bh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Oh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Sh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=kh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=kh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Gd();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=wh(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Zl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Jd())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,((e,t)=>Ih(e,t)))&&Vl(this.baseMutations,e.baseMutations,((e,t)=>Ih(e,t)))}}class Dh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Il(e.mutations.length===n.length);let r=Yd;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Dh(e,t,n,r)}}class Lh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Mh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Fh,Uh;function jh(e){switch(e){default:return El();case Cl.CANCELLED:case Cl.UNKNOWN:case Cl.DEADLINE_EXCEEDED:case Cl.RESOURCE_EXHAUSTED:case Cl.INTERNAL:case Cl.UNAVAILABLE:case Cl.UNAUTHENTICATED:return!1;case Cl.INVALID_ARGUMENT:case Cl.NOT_FOUND:case Cl.ALREADY_EXISTS:case Cl.PERMISSION_DENIED:case Cl.FAILED_PRECONDITION:case Cl.ABORTED:case Cl.OUT_OF_RANGE:case Cl.UNIMPLEMENTED:case Cl.DATA_LOSS:return!0}}function zh(e){if(void 0===e)return wl("GRPC error has no .code"),Cl.UNKNOWN;switch(e){case Fh.OK:return Cl.OK;case Fh.CANCELLED:return Cl.CANCELLED;case Fh.UNKNOWN:return Cl.UNKNOWN;case Fh.DEADLINE_EXCEEDED:return Cl.DEADLINE_EXCEEDED;case Fh.RESOURCE_EXHAUSTED:return Cl.RESOURCE_EXHAUSTED;case Fh.INTERNAL:return Cl.INTERNAL;case Fh.UNAVAILABLE:return Cl.UNAVAILABLE;case Fh.UNAUTHENTICATED:return Cl.UNAUTHENTICATED;case Fh.INVALID_ARGUMENT:return Cl.INVALID_ARGUMENT;case Fh.NOT_FOUND:return Cl.NOT_FOUND;case Fh.ALREADY_EXISTS:return Cl.ALREADY_EXISTS;case Fh.PERMISSION_DENIED:return Cl.PERMISSION_DENIED;case Fh.FAILED_PRECONDITION:return Cl.FAILED_PRECONDITION;case Fh.ABORTED:return Cl.ABORTED;case Fh.OUT_OF_RANGE:return Cl.OUT_OF_RANGE;case Fh.UNIMPLEMENTED:return Cl.UNIMPLEMENTED;case Fh.DATA_LOSS:return Cl.DATA_LOSS;default:return El()}}(Uh=Fh||(Fh={}))[Uh.OK=0]="OK",Uh[Uh.CANCELLED=1]="CANCELLED",Uh[Uh.UNKNOWN=2]="UNKNOWN",Uh[Uh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Uh[Uh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Uh[Uh.NOT_FOUND=5]="NOT_FOUND",Uh[Uh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Uh[Uh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Uh[Uh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Uh[Uh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Uh[Uh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Uh[Uh.ABORTED=10]="ABORTED",Uh[Uh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Uh[Uh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Uh[Uh.INTERNAL=13]="INTERNAL",Uh[Uh.UNAVAILABLE=14]="UNAVAILABLE",Uh[Uh.DATA_LOSS=15]="DATA_LOSS";let Vh=null;function Bh(){return new TextEncoder}const qh=new el([4294967295,4294967295],0);function Zh(e){const t=Bh().encode(e),n=new tl;return n.update(t),new Uint8Array(n.digest())}function Wh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new el([n,r],0),new el([i,o],0)]}class Hh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Kh("Invalid padding: ".concat(t));if(n<0)throw new Kh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Kh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Kh("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=el.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(el.fromNumber(n)));return 1===r.compare(qh)&&(r=new el([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Zh(e),[n,r]=Wh(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hh(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ie)return;const t=Zh(e),[n,r]=Wh(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Kh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Qh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Gh(Zl.min(),r,new iu(zl),qd(),Jd())}}class Qh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Qh(n,t,Jd(),Jd(),Jd())}}class Yh{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class $h{constructor(e,t){this.targetId=e,this.me=t}}class Jh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Xh{constructor(){this.fe=0,this.ge=nf(),this.pe=hu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Jd(),t=Jd(),n=Jd();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:El()}})),new Qh(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=nf()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Il(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ef{constructor(e){this.Le=e,this.Be=new Map,this.ke=qd(),this.qe=tf(),this.Qe=new iu(zl)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:El()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(bd(i))if(0===n){const e=new Ql(i.path);this.Ue(t,e,Wu.newNoDocument(e,Zl.min()))}else Il(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Vh||Vh.et(function(e,t,n,r,i){var o,s,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=gu(n).toUint8Array()}catch(e){if(e instanceof du)return Sl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Hh(o,r,i)}catch(e){return Sl(e instanceof Kh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Ie?null:s}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&bd(i.target)){const t=new Ql(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Wu.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Jd();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new Gh(e,t,this.Qe,this.ke,n);return this.ke=qd(),this.qe=tf(),this.Qe=new iu(zl),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Xh,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new au(zl),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||bl("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function tf(){return new iu(Ql.comparator)}function nf(){return new iu(Ql.comparator)}const rf={asc:"ASCENDING",desc:"DESCENDING"},of={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sf={and:"AND",or:"OR"};class af{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lf(e,t){return e.useProto3Json||Sc(t)?t:{value:t}}function cf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function uf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function df(e,t){return cf(e,t.toTimestamp())}function hf(e){return Il(!!e),Zl.fromTimestamp(function(e){const t=pu(e);return new ql(t.seconds,t.nanos)}(e))}function ff(e,t){return pf(e,t).canonicalString()}function pf(e,t){const n=function(e){return new Hl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function mf(e){const t=Hl.fromString(e);return Il(Ff(t)),t}function gf(e,t){return ff(e.databaseId,t.path)}function vf(e,t){const n=mf(t);if(n.get(1)!==e.databaseId.projectId)throw new xl(Cl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xl(Cl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ql(wf(n))}function yf(e,t){return ff(e.databaseId,t)}function _f(e){const t=mf(e);return 4===t.length?Hl.emptyPath():wf(t)}function bf(e){return new Hl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function wf(e){return Il(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Sf(e,t,n){return{name:gf(e,t),fields:n.value.mapValue.fields}}function kf(e,t,n){const r=vf(e,t.name),i=hf(t.updateTime),o=t.createTime?hf(t.createTime):Zl.min(),s=new qu({mapValue:{fields:t.fields}}),a=Wu.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ef(e,t){let n;if(t instanceof Th)n={update:Sf(e,t.key,t.value)};else if(t instanceof Rh)n={delete:gf(e,t.key)};else if(t instanceof Ch)n={update:Sf(e,t.key,t.data),updateMask:Mf(t.fieldMask)};else{if(!(t instanceof Ah))return El();n={verify:gf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof lh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ch)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof dh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fh)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw El()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:df(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:El()}(e,t.precondition)),n}function If(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?yh.updateTime(hf(e.updateTime)):void 0!==e.exists?yh.exists(e.exists):yh.none()}(t.currentDocument):yh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Il("REQUEST_TIME"===t.setToServerValue),n=new lh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ch(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new dh(e)}else"increment"in t?n=new fh(e,t.increment):El();const r=Gl.fromServerFormat(t.fieldPath);return new gh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=vf(e,t.update.name),o=new qu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new uu(t.map((e=>Gl.fromServerFormat(e))))}(t.updateMask);return new Ch(i,o,e,n,r)}return new Th(i,o,n,r)}if(t.delete){const r=vf(e,t.delete);return new Rh(r,n)}if(t.verify){const r=vf(e,t.verify);return new Ah(r,n)}return El()}function Tf(e,t){return{documents:[yf(e,t.path)]}}function Cf(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yf(e,i);const o=function(e){if(0!==e.length)return Lf(Xu.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Of(e.field),direction:Pf(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=lf(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function xf(e){let t=_f(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Il(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Nf(e);return t instanceof Xu&&nd(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Qu(Df(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Sc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Hu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Hu(n,t)}(n.endAt)),Id(t,i,s,o,a,"F",l,c)}function Nf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Df(e.unaryFilter.field);return Ju.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Df(e.unaryFilter.field);return Ju.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Df(e.unaryFilter.field);return Ju.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Df(e.unaryFilter.field);return Ju.create(i,"!=",{nullValue:"NULL_VALUE"});default:return El()}}(e):void 0!==e.fieldFilter?function(e){return Ju.create(Df(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return El()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Xu.create(e.compositeFilter.filters.map((e=>Nf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return El()}}(e.compositeFilter.op))}(e):El()}function Pf(e){return rf[e]}function Rf(e){return of[e]}function Af(e){return sf[e]}function Of(e){return{fieldPath:e.canonicalString()}}function Df(e){return Gl.fromServerFormat(e.fieldPath)}function Lf(e){return e instanceof Ju?function(e){if("=="===e.op){if(Lu(e.value))return{unaryFilter:{field:Of(e.field),op:"IS_NAN"}};if(Du(e.value))return{unaryFilter:{field:Of(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Lu(e.value))return{unaryFilter:{field:Of(e.field),op:"IS_NOT_NAN"}};if(Du(e.value))return{unaryFilter:{field:Of(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Of(e.field),op:Rf(e.op),value:e.value}}}(e):e instanceof Xu?function(e){const t=e.getFilters().map((e=>Lf(e)));return 1===t.length?t[0]:{compositeFilter:{op:Af(e.op),filters:t}}}(e):El()}function Mf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ff(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Uf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zl.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Uf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Uf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class jf{constructor(e){this.ct=e}}function zf(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:gf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:cf(e,t.version.toTimestamp()),createTime:cf(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Bf(t.version)};else{if(!t.isUnknownDocument())return El();r.unknownDocument={path:n.path.toArray(),version:Bf(t.version)}}return r}function Vf(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Bf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qf(e){const t=new ql(e.seconds,e.nanoseconds);return Zl.fromTimestamp(t)}function Zf(e,t){const n=(t.baseMutations||[]).map((t=>If(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>If(e.ct,t))),i=ql.fromMillis(t.localWriteTimeMs);return new Oh(t.batchId,i,n,r)}function Wf(e){const t=qf(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?qf(e.lastLimboFreeSnapshotVersion):Zl.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Il(1===e.documents.length),Pd(Td(_f(e.documents[0])))}(e.query):function(e){return Pd(xf(e))}(e.query),new Uf(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,hu.fromBase64String(e.resumeToken))}function Hf(e,t){const n=Bf(t.snapshotVersion),r=Bf(t.lastLimboFreeSnapshotVersion);let i;i=bd(t.target)?Tf(e.ct,t.target):Cf(e.ct,t.target)._t;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:yd(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Kf(e){const t=xf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Od(t,t.limit,"L"):t}function Gf(e,t){return new Lh(t.largestBatchId,If(e.ct,t.overlayMutation))}function Qf(e,t){const n=t.path.lastSegment();return[e,Ic(t.path.popLast()),n]}function Yf(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Bf(r.readTime),documentKey:Ic(r.documentKey.path),largestBatchId:r.largestBatchId}}class $f{getBundleMetadata(e,t){return Jf(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:qf(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Jf(e).put(function(e){return{bundleId:e.id,createTime:Bf(hf(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Xf(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Kf(e.bundledQuery),readTime:qf(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Xf(e).put(function(e){return{name:e.name,readTime:Bf(hf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Jf(e){return eu(e,"bundles")}function Xf(e){return eu(e,"namedQueries")}class ep{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new ep(e,n)}getOverlay(e,t){return tp(e).get(Qf(this.userId,t)).next((e=>e?Gf(this.serializer,e):null))}getOverlays(e,t){const n=Kd();return lc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new Lh(t,i);r.push(this.ht(e,o))})),lc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Ic(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(tp(e).j("collectionPathOverlayIndex",r))})),lc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Kd(),i=Ic(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return tp(e).U("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=Gf(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Kd();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tp(e).J({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=Gf(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return tp(e).put(function(e,t,n){const[r,i,o]=Qf(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ef(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function tp(e){return eu(e,"documentOverlays")}class np{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(mu(e.integerValue));else if("doubleValue"in e){const n=mu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),kc(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=pu(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(gu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Uu(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):El()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Ql.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function rp(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ip(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=rp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}np.bt=new np;class op{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=ip(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=ip(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class sp{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class ap{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class lp{constructor(){this.Gt=new op,this.zt=new sp(this.Gt),this.jt=new ap(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class cp{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new cp(this.indexId,this.documentKey,this.arrayValue,n)}}function up(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=dp(e.arrayValue,t.arrayValue),0!==n?n:(n=dp(e.directionalValue,t.directionalValue),0!==n?n:Ql.comparator(e.documentKey,t.documentKey)))}function dp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class hp{constructor(e){this.Yt=new au(((e,t)=>Gl.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Il(e.collectionGroup===this.collectionId),this.en)return!1;const t=$l(e);if(void 0!==t&&!this.nn(t))return!1;const n=Jl(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new au(Gl.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Xl(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Xl(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Xl(n.field,"asc"===n.dir?0:1)));return new Yl(Yl.UNKNOWN_ID,this.collectionId,t,ec.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fp(e){var t,n;if(Il(e instanceof Ju||e instanceof Xu),e instanceof Ju){if(e instanceof fd){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Ju.create(e.field,"==",t))))||[];return Xu.create(r,"or")}return e}const r=e.filters.map((e=>fp(e)));return Xu.create(r,e.op)}function pp(e){if(0===e.getFilters().length)return[];const t=yp(fp(e));return Il(vp(t)),mp(t)||gp(t)?[t]:t.getFilters()}function mp(e){return e instanceof Ju}function gp(e){return e instanceof Xu&&nd(e)}function vp(e){return mp(e)||gp(e)||function(e){if(e instanceof Xu&&td(e)){for(const t of e.getFilters())if(!mp(t)&&!gp(t))return!1;return!0}return!1}(e)}function yp(e){if(Il(e instanceof Ju||e instanceof Xu),e instanceof Ju)return e;if(1===e.filters.length)return yp(e.filters[0]);const t=e.filters.map((e=>yp(e)));let n=Xu.create(t,e.op);return n=wp(n),vp(n)?n:(Il(n instanceof Xu),Il(ed(n)),Il(n.filters.length>1),n.filters.reduce(((e,t)=>_p(e,t))))}function _p(e,t){let n;return Il(e instanceof Ju||e instanceof Xu),Il(t instanceof Ju||t instanceof Xu),n=e instanceof Ju?t instanceof Ju?function(e,t){return Xu.create([e,t],"and")}(e,t):bp(e,t):t instanceof Ju?bp(t,e):function(e,t){if(Il(e.filters.length>0&&t.filters.length>0),ed(e)&&ed(t))return sd(e,t.getFilters());const n=td(e)?e:t,r=td(e)?t:e,i=n.filters.map((e=>_p(e,r)));return Xu.create(i,"or")}(e,t),wp(n)}function bp(e,t){if(ed(t))return sd(t,e.getFilters());{const n=t.filters.map((t=>_p(e,t)));return Xu.create(n,"or")}}function wp(e){if(Il(e instanceof Ju||e instanceof Xu),e instanceof Ju)return e;const t=e.getFilters();if(1===t.length)return wp(t[0]);if(rd(e))return e;const n=t.map((e=>wp(e))),r=[];return n.forEach((t=>{t instanceof Ju?r.push(t):t instanceof Xu&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Xu.create(r,e.op)}class Sp{constructor(){this._n=new kp}addToCollectionParentIndex(e,t){return this._n.add(t),lc.resolve()}getCollectionParents(e,t){return lc.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return lc.resolve()}deleteFieldIndex(e,t){return lc.resolve()}deleteAllFieldIndexes(e){return lc.resolve()}createTargetIndexes(e,t){return lc.resolve()}getDocumentsMatchingTarget(e,t){return lc.resolve(null)}getIndexType(e,t){return lc.resolve(0)}getFieldIndexes(e,t){return lc.resolve([])}getNextCollectionGroupToUpdate(e){return lc.resolve(null)}getMinOffset(e,t){return lc.resolve(rc.min())}getMinOffsetFromCollectionGroup(e,t){return lc.resolve(rc.min())}updateCollectionGroup(e,t,n){return lc.resolve()}updateIndexEntries(e,t){return lc.resolve()}}class kp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new au(Hl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new au(Hl.comparator)).toArray()}}const Ep=new Uint8Array(0);class Ip{constructor(e,t){this.databaseId=t,this.an=new kp,this.un=new Vd((e=>yd(e)),((e,t)=>_d(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Ic(r)};return Tp(e).put(i)}return lc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Bl(t),""],!1,!0);return Tp(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(xc(r.parent))}return n}))}addFieldIndex(e,t){const n=xp(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Np(e);return i.next((e=>{n.put(Yf(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=xp(e),r=Np(e),i=Cp(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=xp(e),n=Cp(e),r=Np(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return lc.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new hp(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Cp(e);let r=!0;const i=new Map;return lc.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Jd();const r=[];return lc.forEach(i,((i,o)=>{bl("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(yd(t)));const s=function(e,t){const n=$l(t);if(void 0===n)return null;for(const r of wd(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Jl(t))for(const t of wd(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Jl(t)){const t=0===i.kind?Sd(e,i.fieldPath,e.startAt):kd(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Hu(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of Jl(t)){const t=0===i.kind?kd(e,i.fieldPath,e.endAt):Sd(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Hu(n,r)}(o,i),u=this.hn(i,o,l),d=this.hn(i,o,c),h=this.Pn(i,o,a),f=this.In(i.indexId,s,u,l.inclusive,d,c.inclusive,h);return lc.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=Ql.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return lc.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:pp(Xu.create(e.filters,"and")).map((t=>vd(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Ep,d=this.En(e,a,n[u%l],r),h=this.dn(e,a,i[u%l],o),f=s.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(d,h,f))}return c}En(e,t,n,r){const i=new cp(e,Ql.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new cp(e,Ql.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new hp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return lc.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new au(Gl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new lp;for(const r of Jl(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);np.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new lp;return np.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new lp;return np.bt.Pt(Ru(this.databaseId,t),n.Ht(function(e){const t=Jl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new lp);let i=0;for(const o of Jl(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&Ou(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);np.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new lp;n.seed(e.Wt()),np.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Ju&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=xp(e),r=Np(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return lc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new ec(t.sequenceNumber,new rc(qf(t.readTime),new Ql(xc(t.documentKey)),t.largestBatchId)):ec.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Xl(Gl.fromServerFormat(t),n)}));return new Yl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:zl(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=xp(e),i=Np(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>lc.forEach(t,(t=>i.put(Yf(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return lc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?lc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),lc.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?lc.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Cp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Cp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Cp(e);let i=new au(up);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new cp(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new au(up);const r=this.An(t,e);if(null==r)return n;const i=$l(t);if(null!=i){const o=e.data.field(i.fieldPath);if(Ou(o))for(const i of o.arrayValue.values||[])n=n.add(new cp(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new cp(t.indexId,e.key,Ep,r));return n}wn(e,t,n,r,i){bl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=cu(o),l=cu(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=cu(s)):t?(i(a),a=cu(o)):(a=cu(o),l=cu(s))}}(r,i,up,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),lc.waitFor(o)}gn(e){let t=1;return Np(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>up(e,t))).filter(((e,t,n)=>!t||0!==up(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=up(o,e),i=up(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Ep,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Ep,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return up(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Pp)}getMinOffset(e,t){return lc.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||El())))).next(Pp)}}function Tp(e){return eu(e,"collectionParents")}function Cp(e){return eu(e,"indexEntries")}function xp(e){return eu(e,"indexConfiguration")}function Np(e){return eu(e,"indexState")}function Pp(e){Il(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ic(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new rc(t.readTime,t.documentKey,n)}const Rp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ap{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ap(e,Ap.DEFAULT_COLLECTION_PERCENTILE,Ap.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Op(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:s},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{Il(1===a)})));const c=[];for(const u of n.mutations){const e=Rc(t,u.key.path,n.batchId);o.push(i.delete(e)),c.push(u.key)}return lc.waitFor(o).next((()=>c))}function Dp(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw El();t=e.noDocument}return JSON.stringify(t).length}Ap.DEFAULT_COLLECTION_PERCENTILE=10,Ap.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ap.DEFAULT=new Ap(41943040,Ap.DEFAULT_COLLECTION_PERCENTILE,Ap.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ap.DISABLED=new Ap(-1,0,0);class Lp{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Il(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Lp(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fp(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Up(e),o=Fp(e);return o.add({}).next((s=>{Il("number"==typeof s);const a=new Oh(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Ef(e.ct,t))),i=n.mutations.map((t=>Ef(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new au(((e,t)=>zl(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Rc(this.userId,e.key.path,s);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(i.put(t,Ac))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),lc.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Fp(e).get(t).next((e=>e?(Il(e.userId===this.userId),Zf(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?lc.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Fp(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Il(t.batchId>=n),i=Zf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Fp(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fp(e).U("userMutationsIndex",t).next((e=>e.map((e=>Zf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Pc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Up(e).J({range:r},((n,r,o)=>{const[s,a,l]=n,c=xc(a);if(s===this.userId&&t.path.isEqual(c))return Fp(e).get(l).next((e=>{if(!e)throw El();Il(e.userId===this.userId),i.push(Zf(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new au(zl);const r=[];return t.forEach((t=>{const i=Pc(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=Up(e).J({range:o},((e,r,i)=>{const[o,s,a]=e,l=xc(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(s)})),lc.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Pc(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new au(zl);return Up(e).J({range:o},((e,t,i)=>{const[o,a,l]=e,c=xc(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(s=s.add(l)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Fp(e).get(t).next((e=>{if(null===e)throw El();Il(e.userId===this.userId),n.push(Zf(this.serializer,e))})))})),lc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Op(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),lc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return lc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Up(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=xc(e[1]);r.push(t)}else n.done()})).next((()=>{Il(0===r.length)}))}))}containsKey(e,t){return Mp(e,this.userId,t)}xn(e){return jp(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Mp(e,t,n){const r=Pc(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Up(e).J({range:o,H:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function Fp(e){return eu(e,"mutations")}function Up(e){return eu(e,"documentMutations")}function jp(e){return eu(e,"mutationQueues")}class zp{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new zp(0)}static Ln(){return new zp(-1)}}class Vp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new zp(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Zl.fromTimestamp(new ql(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Bp(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Il(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Bp(e).J(((o,s)=>{const a=Wf(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>lc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Bp(e).J(((e,n)=>{const r=Wf(n);t(r)}))}Bn(e){return qp(e).get("targetGlobalKey").next((e=>(Il(null!==e),e)))}kn(e,t){return qp(e).put("targetGlobalKey",t)}qn(e,t){return Bp(e).put(Hf(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=yd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Bp(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=Wf(n);_d(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Zp(e);return t.forEach((t=>{const o=Ic(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),lc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Zp(e);return lc.forEach(t,(t=>{const i=Ic(t.path);return lc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Zp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zp(e);let i=Jd();return r.J({range:n,H:!0},((e,t,n)=>{const r=xc(e[1]),o=new Ql(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Ic(t.path),r=IDBKeyRange.bound([n],[Bl(n)],!1,!0);let i=0;return Zp(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return Bp(e).get(t).next((e=>e?Wf(e):null))}}function Bp(e){return eu(e,"targets")}function qp(e){return eu(e,"targetGlobal")}function Zp(e){return eu(e,"targetDocuments")}function Wp(e,t){let[n,r]=e,[i,o]=t;const s=zl(n,i);return 0===s?zl(r,o):s}class Hp{constructor(e){this.Kn=e,this.buffer=new au(Wp),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Wp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Kp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){bl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){pc(e)?bl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ac(e)}await this.zn(3e5)}))}}class Gp{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return lc.resolve(wc.oe);const n=new Hp(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(bl("LruGarbageCollector","Garbage collection skipped; disabled"),lc.resolve(Rp)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(bl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Rp):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(bl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),_l()<=It.DEBUG&&bl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),lc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Qp(e,t){return new Gp(e,t)}class Yp{constructor(e,t){this.db=e,this.garbageCollector=Qp(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return $p(e,n)}removeReference(e,t,n){return $p(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return $p(e,t)}er(e,t){return function(e,t){let n=!1;return jp(e).Y((r=>Mp(e,r,t).next((e=>(e&&(n=!0),lc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Zl.min()),Zp(e).delete(function(e){return[0,Ic(e.path)]}(o)))))}));r.push(t)}})).next((()=>lc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return $p(e,t)}Xn(e,t){const n=Zp(e);let r,i=wc.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:l}=n;0===o?(i!==wc.oe&&t(new Ql(xc(r)),i),i=l,r=a):i=wc.oe})).next((()=>{i!==wc.oe&&t(new Ql(xc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $p(e,t){return Zp(e).put(function(e,t){return{targetId:0,path:Ic(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Jp{constructor(){this.changes=new Vd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?lc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return rm(e).put(n)}removeEntry(e,t,n){return rm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Vf(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Wu.newInvalidDocument(t);return rm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(im(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Wu.newInvalidDocument(t)};return rm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(im(t))},((e,r)=>{n={document:this.nr(t,r),size:Dp(r)}})).next((()=>n))}getEntries(e,t){let n=qd();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=qd(),r=new iu(Ql.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Dp(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return lc.resolve();let r=new au(sm);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(im(r.first()),im(r.last())),o=r.getIterator();let s=o.getNext();return rm(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ql.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&sm(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.$(im(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Vf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rm(e).U(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=qd();for(const i of e){const e=this.nr(Ql.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Fd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=qd();const o=om(t,n),s=om(t,rc.max());return rm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(Ql.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new tm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return nm(e).get("remoteDocumentGlobalKey").next((e=>(Il(!!e),e)))}tr(e,t){return nm(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=kf(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ql.fromSegments(t.noDocument.path),r=qf(t.noDocument.readTime);n=Wu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return El();{const e=Ql.fromSegments(t.unknownDocument.path),r=qf(t.unknownDocument.version);n=Wu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ql(e[0],e[1]);return Zl.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Zl.min()))return e}return Wu.newInvalidDocument(e)}}function em(e){return new Xp(e)}class tm extends Jp{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Vd((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new au(((e,t)=>zl(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=zf(this.ar.serializer,o);r=r.add(i.path.popLast());const l=Dp(a);n+=l-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=zf(this.ar.serializer,o.convertToNoDocument(Zl.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),lc.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function nm(e){return eu(e,"remoteDocumentGlobal")}function rm(e){return eu(e,"remoteDocumentsV14")}function im(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function om(e,t){const n=t.documentKey.path.toArray();return[e,Vf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function sm(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=zl(n[o],r[o]),i)return i;return i=zl(n.length,r.length),i||(i=zl(n[n.length-2],r[r.length-2]),i||zl(n[n.length-1],r[r.length-1]))}class am{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&kh(n.mutation,e,uu.empty(),ql.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Jd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jd();const r=Kd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Wd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Kd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Jd())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=qd();const o=Qd(),s=Qd();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Ch)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),kh(s.mutation,t,s.mutation.getFieldMask(),ql.now())):o.set(t.key,uu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new am(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Qd();let r=new iu(((e,t)=>e-t)),i=Jd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||uu.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Jd()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Gd();l.forEach((e=>{if(!i.has(e)){const r=wh(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return lc.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ql.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):lc.resolve(Kd());let s=-1,a=i;return o.next((t=>lc.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?lc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Jd()))).next((e=>({batchId:s,changes:Hd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ql(t)).next((e=>{let t=Wd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Wd();return this.indexManager.getCollectionParents(e,i).next((s=>lc.forEach(s,(s=>{const a=function(e,t){return new Ed(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Wu.newInvalidDocument(r)))}));let n=Wd();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&kh(o.mutation,r,uu.empty(),ql.now()),Fd(t,r)&&(n=n.insert(e,r))})),n}))}}class cm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return lc.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:hf(e.createTime)}}(t)),lc.resolve()}getNamedQuery(e,t){return lc.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Kf(e.bundledQuery),readTime:hf(e.readTime)}}(t)),lc.resolve()}}class um{constructor(){this.overlays=new iu(Ql.comparator),this.hr=new Map}getOverlay(e,t){return lc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Kd();return lc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),lc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),lc.resolve()}getOverlaysForCollection(e,t,n){const r=Kd(),i=t.length+1,o=new Ql(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return lc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new iu(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Kd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Kd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return lc.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Lh(t,n));let i=this.hr.get(t);void 0===i&&(i=Jd(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class dm{constructor(){this.Pr=new au(hm.Ir),this.Tr=new au(hm.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new hm(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new hm(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Ql(new Hl([])),n=new hm(t,e),r=new hm(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Ql(new Hl([])),n=new hm(t,e),r=new hm(t,e+1);let i=Jd();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new hm(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class hm{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Ql.comparator(e.key,t.key)||zl(e.pr,t.pr)}static Er(e,t){return zl(e.pr,t.pr)||Ql.comparator(e.key,t.key)}}class fm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new au(hm.Ir)}checkEmpty(e){return lc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Oh(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new hm(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return lc.resolve(o)}lookupMutationBatch(e,t){return lc.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return lc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return lc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return lc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new hm(t,0),r=new hm(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),lc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new au(zl);return t.forEach((e=>{const t=new hm(e,0),r=new hm(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),lc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ql.isDocumentKey(i)||(i=i.child(""));const o=new hm(new Ql(i),0);let s=new au(zl);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),lc.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Il(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return lc.forEach(t.mutations,(r=>{const i=new hm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new hm(t,0),r=this.wr.firstAfterOrEqual(n);return lc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,lc.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class pm{constructor(e){this.vr=e,this.docs=new iu(Ql.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return lc.resolve(n?n.document.mutableCopy():Wu.newInvalidDocument(t))}getEntries(e,t){let n=qd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wu.newInvalidDocument(e))})),lc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=qd();const o=t.path,s=new Ql(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ic(nc(s),n)<=0||(r.has(s.key)||Fd(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return lc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){El()}Fr(e,t){return lc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new mm(this)}getSize(e){return lc.resolve(this.size)}}class mm extends Jp{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),lc.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class gm{constructor(e){this.persistence=e,this.Mr=new Vd((e=>yd(e)),_d),this.lastRemoteSnapshotVersion=Zl.min(),this.highestTargetId=0,this.Or=0,this.Nr=new dm,this.targetCount=0,this.Lr=zp.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),lc.resolve()}getLastRemoteSnapshotVersion(e){return lc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lc.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),lc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),lc.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new zp(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,lc.resolve()}updateTargetData(e,t){return this.qn(t),lc.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,lc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),lc.waitFor(i).next((()=>r))}getTargetCount(e){return lc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return lc.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),lc.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),lc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),lc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return lc.resolve(n)}containsKey(e,t){return lc.resolve(this.Nr.containsKey(t))}}class vm{constructor(e,t){this.Br={},this.overlays={},this.kr=new wc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new gm(this),this.indexManager=new Sp,this.remoteDocumentCache=function(e){return new pm(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new jf(t),this.$r=new cm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new um,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new fm(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){bl("MemoryPersistence","Starting transaction:",e);const r=new ym(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return lc.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class ym extends sc{constructor(e){super(),this.currentSequenceNumber=e}}class _m{constructor(e){this.persistence=e,this.zr=new dm,this.jr=null}static Hr(e){return new _m(e)}get Jr(){if(this.jr)return this.jr;throw El()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),lc.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),lc.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),lc.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lc.forEach(this.Jr,(n=>{const r=Ql.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Zl.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return lc.or([()=>lc.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class bm{constructor(e){this.serializer=e}O(e,t,n,r){const i=new cc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nc,{unique:!0}),e.createObjectStore("documentMutations")}(e),wm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=lc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),wm(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return lc.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Zc});t.createIndex("collectionPathOverlayIndex",Wc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Hc,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Oc});t.createIndex("documentKeyIndex",Dc),t.createIndex("collectionGroupIndex",Lc)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:zc}).createIndex("sequenceNumberIndex",Vc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Bc}).createIndex("documentKeyIndex",qc,{unique:!1})}(e)))),n<16&&r>=16&&(o=o.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),o}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=Dp(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>lc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>lc.forEach(n,(n=>{Il(n.userId===t.userId);const r=Zf(this.serializer,n);return Op(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const o=new Hl(n),s=function(e){return[0,Ic(e)]}(o);r.push(t.get(s).next((n=>n?lc.resolve():(n=>t.put({targetId:0,path:Ic(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>lc.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:jc});const n=t.store("collectionParents"),r=new kp,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ic(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new Hl(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,o]=e;const s=xc(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=Wf(n),i=Hf(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new Ql(Hl.fromString(e.document.name).popFirst(5)):e.noDocument?Ql.fromSegments(e.noDocument.path):e.unknownDocument?Ql.fromSegments(e.unknownDocument.path):El()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>lc.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=em(this.serializer),i=new vm(_m.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Jd();Zf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),lc.forEach(n,((e,n)=>{const o=new gl(n),s=ep.lt(this.serializer,o),a=i.getIndexManager(o),l=Lp.lt(o,this.serializer,a,i.referenceDelegate);return new lm(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Xc(t,wc.oe),e).next()}))}))}}function wm(e){e.createObjectStore("targetDocuments",{keyPath:Fc}).createIndex("documentTargetsIndex",Uc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Mc,{unique:!0}),e.createObjectStore("targetGlobal")}const Sm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class km{constructor(e,t,n,r,i,o,s,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!km.D())throw new xl(Cl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yp(this,r),this.Ti=t+"main",this.serializer=new jf(a),this.Ei=new uc(this.Ti,this.ui,new bm(this.serializer)),this.Qr=new Vp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=em(this.serializer),this.$r=new $f,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&wl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xl(Cl.FAILED_PRECONDITION,Sm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new wc(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Im(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(pc(e))return bl("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return bl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Em(e).get("owner").next((e=>lc.resolve(this.Si(e))))}bi(e){return Im(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=eu(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return lc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?lc.resolve(!0):Em(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new xl(Cl.FAILED_PRECONDITION,Sm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Im(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&bl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Xc(e,wc.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Im(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Lp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ip(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ep.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){bl("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?Jc:15===e?$c:14===e?Yc:13===e?Qc:12===e?Gc:11===e?Kc:void El()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new Xc(r,this.kr?this.kr.next():wc.oe),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw wl("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new xl(Cl.FAILED_PRECONDITION,oc);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return Em(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new xl(Cl.FAILED_PRECONDITION,Sm)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Em(e).put("owner",t)}static D(){return uc.D()}yi(e){const t=Em(e);return t.get("owner").next((e=>this.Si(e)?(bl("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):lc.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(wl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;He()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return bl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return wl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){wl("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Em(e){return eu(e,"owner")}function Im(e){return eu(e,"clientMetadata")}function Tm(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Cm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Jd(),r=Jd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Cm(e,t.fromCache,n,r)}}class xm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Nm{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=He()?8:dc(Ue())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new xm;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(_l()<=It.DEBUG&&bl("QueryEngine","SDK will not create cache indexes for query:",Md(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),lc.resolve()):(_l()<=It.DEBUG&&bl("QueryEngine","Query:",Md(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(_l()<=It.DEBUG&&bl("QueryEngine","The SDK decides to create cache indexes for query:",Md(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pd(t))):lc.resolve())}ji(e,t){if(Cd(t))return lc.resolve(null);let n=Pd(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Od(t,null,"F"),n=Pd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Jd(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,Od(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return Cd(t)||r.isEqual(Zl.min())?lc.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?lc.resolve(null):(_l()<=It.DEBUG&&bl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Md(t)),this.es(e,o,t,tc(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new au(jd(e));return t.forEach(((t,r)=>{Fd(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return _l()<=It.DEBUG&&bl("QueryEngine","Using full collection scan to execute query:",Md(t)),this.zi.getDocumentsMatchingQuery(e,t,rc.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Pm{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new iu(zl),this.rs=new Vd((e=>yd(e)),_d),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Rm(e,t,n,r){return new Pm(e,t,n,r)}async function Am(e,t){const n=Tl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Jd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Om(e){const t=Tl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Dm(e,t,n){let r=Jd(),i=Jd();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=qd();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Zl.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):bl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function Lm(e,t){const n=Tl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Mm(e,t){const n=Tl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,lc.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Uf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Fm(e,t,n){const r=Tl(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!pc(e))throw e;bl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Um(e,t,n){const r=Tl(e);let i=Zl.min(),o=Jd();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Tl(e),i=r.rs.get(n);return void 0!==i?lc.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Pd(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Zl.min(),n?o:Jd()))).next((e=>(Vm(r,Ud(t),e),{documents:e,hs:o})))))}function jm(e,t){const n=Tl(e),r=Tl(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function zm(e,t){const n=Tl(e),r=n.ss.get(t)||Zl.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,tc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Vm(n,t,e),e)))}function Vm(e,t,n){let r=e.ss.get(t)||Zl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Bm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jd();const r=await Mm(e,Pd(Kf(t.bundledQuery))),i=Tl(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=hf(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(hu.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function qm(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zm(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Wm(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Hm{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new xl(r.error.code,r.error.message))),o?new Hm(e,t,r.state,i):(wl("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Km{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new xl(n.error.code,n.error.message))),i?new Km(e,n.state,r):(wl("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=eh();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Ec(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Gm(e,i):(wl("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Qm{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Qm(t.clientId,t.onlineState):(wl("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Ym{constructor(){this.activeTargetIds=eh()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $m{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new iu(zl),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=qm(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Ym),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(qm(this.persistenceKey,n));if(e){const t=Gm.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Wm(this.persistenceKey,e));if(n){const r=Km.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wm(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return bl("SharedClientState","READ",e,t),t}setItem(e,t){bl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){bl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(bl("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void wl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=wc.oe;if(null!=e)try{const n=JSON.parse(e);Il("number"==typeof n),t=n}catch(e){wl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==wc.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new Hm(this.currentUser,e,t,n),i=Zm(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=Zm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Wm(this.persistenceKey,e),i=new Km(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Gm.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Hm.Es(new gl(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Km.Es(r,t)}xs(e){return Qm.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);bl("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=eh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Jm{constructor(){this.no=new Ym,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ym,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xm{io(e){}shutdown(){}}class eg{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){bl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){bl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tg=null;function ng(){return null===tg?tg=268435456+Math.round(2147483648*Math.random()):tg++,"0x"+tg.toString(16)}const rg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ig{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const og="WebChannelConnection";class sg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const o=ng(),s=this.vo(e,t.toUriEncodedString());bl("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,s,a,n).then((t=>(bl("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Sl("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}xo(e,t,n,r,i,o){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+vl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=rg[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=ng();return new Promise(((o,s)=>{const a=new il;a.setWithCredentials(!0),a.listenOnce(al.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ll.NO_ERROR:const t=a.getResponseJson();bl(og,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case ll.TIMEOUT:bl(og,"RPC '".concat(e,"' ").concat(i," timed out")),s(new xl(Cl.DEADLINE_EXCEEDED,"Request time out"));break;case ll.HTTP_ERROR:const n=a.getStatus();if(bl(og,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Cl).indexOf(t)>=0?t:Cl.UNKNOWN}(t.status);s(new xl(e,t.message))}else s(new xl(Cl.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new xl(Cl.UNAVAILABLE,"Connection failed."));break;default:El()}}finally{bl(og,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);bl(og,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=ng(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hl(),s=dl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new ol({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");bl(og,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let d=!1,h=!1;const f=new ig({lo:t=>{h?bl(og,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(bl(og,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),bl(og,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,sl.EventType.OPEN,(()=>{h||(bl(og,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(u,sl.EventType.CLOSE,(()=>{h||(h=!0,bl(og,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(u,sl.EventType.ERROR,(t=>{h||(h=!0,Sl(og,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new xl(Cl.UNAVAILABLE,"The operation could not be completed")))})),p(u,sl.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Il(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){bl(og,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Fh[e];if(void 0!==t)return zh(t)}(t),i=s.message;void 0===n&&(n=Cl.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),h=!0,f.po(new xl(n,i)),u.close()}else bl(og,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(s,ul.STAT_EVENT,(t=>{t.stat===cl.PROXY?bl(og,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===cl.NOPROXY&&bl(og,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function ag(){return"undefined"!=typeof window?window:null}function lg(){return"undefined"!=typeof document?document:null}function cg(e){return new af(e,!0)}class ug{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&bl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class dg{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ug(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Cl.RESOURCE_EXHAUSTED?(wl(t.toString()),wl("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Cl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new xl(Cl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return bl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(bl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hg extends dg{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:El()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Il(void 0===t||"string"==typeof t),hu.fromBase64String(t||"")):(Il(void 0===t||t instanceof Buffer||t instanceof Uint8Array),hu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Cl.UNKNOWN:zh(e.code);return new xl(t,e.message||"")}(s);n=new Jh(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=vf(e,r.document.name),o=hf(r.document.updateTime),s=r.document.createTime?hf(r.document.createTime):Zl.min(),a=new qu({mapValue:{fields:r.document.fields}}),l=Wu.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=vf(e,r.document),o=r.readTime?hf(r.readTime):Zl.min(),s=Wu.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Yh([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=vf(e,r.document),o=r.removedTargetIds||[];n=new Yh([],o,i,null)}else{if(!("filter"in t))return El();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Mh(r,i),s=e.targetId;n=new $h(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zl.min():t.readTime?hf(t.readTime):Zl.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=bf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=bd(r)?{documents:Tf(e,r)}:{query:Cf(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=uf(e,t.resumeToken);const r=lf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zl.min())>0){n.readTime=cf(e,t.snapshotVersion.toTimestamp());const r=lf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return El()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=bf(this.serializer),t.removeTarget=e,this.i_(t)}}class fg extends dg{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Il(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Il(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?hf(e.updateTime):hf(t);return n.isEqual(Zl.min())&&(n=hf(t)),new vh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=hf(e.commitTime);return this.listener.A_(n,t)}return Il(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=bf(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ef(this.serializer,e)))};this.i_(t)}}class pg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new xl(Cl.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Co(e,pf(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Cl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xl(Cl.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.xo(e,pf(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Cl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new xl(Cl.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class mg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(wl(t),this.y_=!1):bl("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class gg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{Ig(this)&&(bl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Tl(e);t.M_.add(4),await yg(t),t.N_.set("Unknown"),t.M_.delete(4),await vg(t)}(this))}))})),this.N_=new mg(n,r)}}async function vg(e){if(Ig(e))for(const t of e.x_)await t(!0)}async function yg(e){for(const t of e.x_)await t(!1)}function _g(e,t){const n=Tl(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Eg(n)?kg(n):Zg(n).Xo()&&wg(n,t))}function bg(e,t){const n=Tl(e),r=Zg(n);n.F_.delete(t),r.Xo()&&Sg(n,t),0===n.F_.size&&(r.Xo()?r.n_():Ig(n)&&n.N_.set("Unknown"))}function wg(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Zg(e).P_(t)}function Sg(e,t){e.L_.xe(t),Zg(e).I_(t)}function kg(e){e.L_=new ef({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Zg(e).start(),e.N_.w_()}function Eg(e){return Ig(e)&&!Zg(e).Zo()&&e.F_.size>0}function Ig(e){return 0===Tl(e).M_.size}function Tg(e){e.L_=void 0}async function Cg(e){e.N_.set("Online")}async function xg(e){e.F_.forEach(((t,n)=>{wg(e,t)}))}async function Ng(e,t){Tg(e),Eg(e)?(e.N_.D_(t),kg(e)):e.N_.set("Unknown")}async function Pg(e,t,n){if(e.N_.set("Online"),t instanceof Jh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){bl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Rg(e,n)}else if(t instanceof Yh?e.L_.Ke(t):t instanceof $h?e.L_.He(t):e.L_.We(t),!n.isEqual(Zl.min()))try{const t=await Om(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(hu.EMPTY_BYTE_STRING,r.snapshotVersion)),Sg(e,t);const i=new Uf(r.target,t,n,r.sequenceNumber);wg(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){bl("RemoteStore","Failed to raise snapshot:",t),await Rg(e,t)}}async function Rg(e,t,n){if(!pc(t))throw t;e.M_.add(1),await yg(e),e.N_.set("Offline"),n||(n=()=>Om(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{bl("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await vg(e)}))}function Ag(e,t){return t().catch((n=>Rg(e,n,t)))}async function Og(e){const t=Tl(e),n=Wg(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Dg(t);)try{const e=await Lm(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,Lg(t,e)}catch(e){await Rg(t,e)}Mg(t)&&Fg(t)}function Dg(e){return Ig(e)&&e.v_.length<10}function Lg(e,t){e.v_.push(t);const n=Wg(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Mg(e){return Ig(e)&&!Wg(e).Zo()&&e.v_.length>0}function Fg(e){Wg(e).start()}async function Ug(e){Wg(e).V_()}async function jg(e){const t=Wg(e);for(const n of e.v_)t.d_(n.mutations)}async function zg(e,t,n){const r=e.v_.shift(),i=Dh.from(r,t,n);await Ag(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Og(e)}async function Vg(e,t){t&&Wg(e).E_&&await async function(e,t){if(function(e){return jh(e)&&e!==Cl.ABORTED}(t.code)){const n=e.v_.shift();Wg(e).t_(),await Ag(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Og(e)}}(e,t),Mg(e)&&Fg(e)}async function Bg(e,t){const n=Tl(e);n.asyncQueue.verifyOperationInProgress(),bl("RemoteStore","RemoteStore received new credentials");const r=Ig(n);n.M_.add(3),await yg(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await vg(n)}async function qg(e,t){const n=Tl(e);t?(n.M_.delete(2),await vg(n)):t||(n.M_.add(2),await yg(n),n.N_.set("Unknown"))}function Zg(e){return e.B_||(e.B_=function(e,t,n){const r=Tl(e);return r.f_(),new hg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Cg.bind(null,e),To:xg.bind(null,e),Ao:Ng.bind(null,e),h_:Pg.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Eg(e)?kg(e):e.N_.set("Unknown")):(await e.B_.stop(),Tg(e))}))),e.B_}function Wg(e){return e.k_||(e.k_=function(e,t,n){const r=Tl(e);return r.f_(),new fg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Ug.bind(null,e),Ao:Vg.bind(null,e),R_:jg.bind(null,e),A_:zg.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await Og(e)):(await e.k_.stop(),e.v_.length>0&&(bl("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class Hg{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Nl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Hg(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xl(Cl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kg(e,t){if(wl("AsyncQueue","".concat(t,": ").concat(e)),pc(e))return new xl(Cl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Gg{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ql.comparator(t.key,n.key):(e,t)=>Ql.comparator(e.key,t.key),this.keyedMap=Wd(),this.sortedSet=new iu(this.comparator)}static emptySet(e){return new Gg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Gg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Qg{constructor(){this.q_=new iu(Ql.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):El():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Yg{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Yg(e,t,Gg.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class $g{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class Jg{constructor(){this.queries=new Vd((e=>Ld(e)),Dd),this.onlineState="Unknown",this.z_=new Set}}async function Xg(e,t){const n=Tl(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.W_()&&t.G_()&&(r=2):(o=new $g,r=t.G_()?0:1);try{switch(r){case 0:o.K_=await n.onListen(i,!0);break;case 1:o.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Kg(e,"Initialization of query '".concat(Md(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.U_.push(t),t.j_(n.onlineState),o.K_&&t.H_(o.K_)&&rv(n)}async function ev(e,t){const n=Tl(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.U_.indexOf(t);e>=0&&(o.U_.splice(e,1),0===o.U_.length?i=t.G_()?0:1:!o.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tv(e,t){const n=Tl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&rv(n)}function nv(e,t,n){const r=Tl(e),i=r.queries.get(t);if(i)for(const o of i.U_)o.onError(n);r.queries.delete(t)}function rv(e){e.z_.forEach((e=>{e.next()}))}var iv,ov;(ov=iv||(iv={})).J_="default",ov.Cache="cache";class sv{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Yg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=Yg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==iv.Cache}}class av{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class lv{constructor(e){this.serializer=e}Ps(e){return vf(this.serializer,e)}Is(e){return e.metadata.exists?kf(this.serializer,e.document,!1):Wu.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return hf(e)}}class cv{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uv(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=Hl.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new lv(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Jd()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Tl(e);let o=Jd(),s=qd();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(o=o.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Mm(i,function(e){return Pd(Td(Hl.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Dm(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,o,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new lv(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await Bm(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function uv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class dv{constructor(e){this.key=e}}class hv{constructor(e){this.key=e}}class fv{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Jd(),this.mutatedKeys=Jd(),this.Ia=jd(e),this.Ta=new Gg(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new Qg,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Fd(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:o,Aa:n,Xi:s,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return El()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const s=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==o.length||l?{snapshot:new Yg(this.query,e.Ta,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:s}:{fa:s}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Qg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Jd(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new hv(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new dv(n))})),t}pa(e){this.la=e.hs,this.Pa=Jd();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Yg.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class pv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class mv{constructor(e){this.key=e,this.wa=!1}}class gv{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Vd((e=>Ld(e)),Dd),this.Da=new Map,this.Ca=new Set,this.va=new iu(Ql.comparator),this.Fa=new Map,this.Ma=new dm,this.xa={},this.Oa=new Map,this.Na=zp.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function vv(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Hv(e);let i;const o=r.ba.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=await _v(r,t,n,!0),i}async function yv(e,t){const n=Hv(e);await _v(n,t,!0,!1)}async function _v(e,t,n,r){const i=await Mm(e.localStore,Pd(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await bv(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&_g(e.remoteStore,i),a}async function bv(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await Um(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return Av(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const o=await Um(e.localStore,t,!0),s=new fv(t,o.hs),a=s.da(o.documents),l=Qh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);Av(e,n,c.fa);const u=new pv(t,n,s);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function wv(e,t,n){const r=Tl(e),i=r.ba.get(t),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter((e=>!Dd(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fm(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bg(r.remoteStore,i.targetId),Pv(r,i.targetId)})).catch(ac)):(Pv(r,i.targetId),await Fm(r.localStore,i.targetId,!0))}async function Sv(e,t){const n=Tl(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bg(n.remoteStore,r.targetId))}async function kv(e,t){const n=Tl(e);try{const e=await function(e,t){const n=Tl(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(hu.EMPTY_BYTE_STRING,Zl.min()).withLastLimboFreeSnapshotVersion(Zl.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.Qr.updateTargetData(e,c))}));let a=qd(),l=Jd();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Dm(e,o,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Zl.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return lc.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Il(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Il(r.wa):e.removedDocuments.size>0&&(Il(r.wa),r.wa=!1))})),await Lv(n,e,t)}catch(e){await ac(e)}}function Ev(e,t,n){const r=Tl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Tl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&rv(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Iv(e,t,n){const r=Tl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),o=i&&i.key;if(o){let e=new iu(Ql.comparator);e=e.insert(o,Wu.newNoDocument(o,Zl.min()));const n=Jd().add(o),i=new Gh(Zl.min(),new Map,new iu(zl),e,n);await kv(r,i),r.va=r.va.remove(o),r.Fa.delete(t),Dv(r)}else await Fm(r.localStore,t,!1).then((()=>Pv(r,t,n))).catch(ac)}async function Tv(e,t){const n=Tl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Tl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=lc.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Il(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Jd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Nv(n,r,null),xv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lv(n,e)}catch(e){await ac(e)}}async function Cv(e,t,n){const r=Tl(e);try{const e=await function(e,t){const n=Tl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Il(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Nv(r,t,n),xv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Lv(r,e)}catch(n){await ac(n)}}function xv(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Nv(e,t,n){const r=Tl(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Pv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||Rv(e,t)}))}function Rv(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(bg(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Dv(e))}function Av(e,t,n){for(const r of n)r instanceof dv?(e.Ma.addReference(r.key,t),Ov(e,r)):r instanceof hv?(bl("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Rv(e,r.key)):El()}function Ov(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(bl("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Dv(e))}function Dv(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ql(Hl.fromString(t)),r=e.Na.next();e.Fa.set(r,new mv(n)),e.va=e.va.insert(n,r),_g(e.remoteStore,new Uf(Pd(Td(n.path)),r,"TargetPurposeLimboResolution",wc.oe))}}async function Lv(e,t,n){const r=Tl(e),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{s.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Cm.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Sa.h_(i),await async function(e,t){const n=Tl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>lc.forEach(t,(t=>lc.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>lc.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!pc(e))throw e;bl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function Mv(e,t){const n=Tl(e);if(!n.currentUser.isEqual(t)){bl("SyncEngine","User change. New user:",t.toKey());const e=await Am(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new xl(Cl.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Lv(n,e.us)}}function Fv(e,t){const n=Tl(e),r=n.Fa.get(t);if(r&&r.wa)return Jd().add(r.key);{let e=Jd();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function Uv(e,t){const n=Tl(e),r=await Um(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&Av(n,t.targetId,i.fa),i}async function jv(e,t){const n=Tl(e);return zm(n.localStore,t).then((e=>Lv(n,e)))}async function zv(e,t,n,r){const i=Tl(e),o=await function(e,t){const n=Tl(e),r=Tl(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):lc.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await Og(i.remoteStore):"acknowledged"===n||"rejected"===n?(Nv(i,t,r||null),xv(i,t),function(e,t){Tl(Tl(e).mutationQueue).Mn(t)}(i.localStore,t)):El(),await Lv(i,o)):bl("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Vv(e,t,n){const r=Tl(e),i=[],o=[];for(const s of t){let e;const t=r.Da.get(s);if(t&&0!==t.length){e=await Mm(r.localStore,Pd(t[0]));for(const e of t){const t=r.ba.get(e),n=await Uv(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await jm(r.localStore,s);e=await Mm(r.localStore,t),await bv(r,Bv(t),s,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(o),i}function Bv(e){return Id(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function qv(e){return function(e){return Tl(Tl(e).persistence).Bi()}(Tl(e).localStore)}async function Zv(e,t,n,r){const i=Tl(e);if(i.La)return void bl("SyncEngine","Ignoring unexpected query state notification.");const o=i.Da.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await zm(i.localStore,Ud(o[0])),r=Gh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,hu.EMPTY_BYTE_STRING);await Lv(i,e,r);break}case"rejected":await Fm(i.localStore,t,!0),Pv(i,t,r);break;default:El()}}async function Wv(e,t,n){const r=Hv(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){bl("SyncEngine","Adding an already active target "+e);continue}const t=await jm(r.localStore,e),n=await Mm(r.localStore,t);await bv(r,Bv(t),n.targetId,!1,n.resumeToken),_g(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await Fm(r.localStore,e,!1).then((()=>{bg(r.remoteStore,e),Pv(r,e)})).catch(ac)}}function Hv(e){const t=Tl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=kv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Iv.bind(null,t),t.Sa.h_=tv.bind(null,t.eventManager),t.Sa.ka=nv.bind(null,t.eventManager),t}function Kv(e){const t=Tl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Tv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Cv.bind(null,t),t}class Gv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Rm(this.persistence,new Nm,e.initialUser,this.serializer)}createPersistence(e){return new vm(_m.Hr,this.serializer)}createSharedClientState(e){return new Jm}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Qv extends Gv{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await Kv(this.Qa.syncEngine),await Og(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Rm(this.persistence,new Nm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Kp(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new bc(t,this.persistence);return new _c(e.asyncQueue,n)}createPersistence(e){const t=Tm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ap.withCacheSize(this.cacheSizeBytes):Ap.DEFAULT;return new km(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ag(),lg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jm}}class Yv extends Qv{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof $m&&(this.sharedClientState.syncEngine={Zs:zv.bind(null,t),Xs:Zv.bind(null,t),eo:Wv.bind(null,t),Bi:qv.bind(null,t),Ys:jv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Tl(e);if(Hv(n),Kv(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Vv(n,e.toArray());n.La=!0,await qg(n.remoteStore,!0);for(const r of t)_g(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Pv(n,i),Fm(n.localStore,i,!0)))),bg(n.remoteStore,i)})),await t,await Vv(n,e),function(e){const t=Tl(e);t.Fa.forEach(((e,n)=>{bg(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new iu(Ql.comparator)}(n),n.La=!1,await qg(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=ag();if(!$m.D(t))throw new xl(Cl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Tm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $m(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class $v{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ev(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mv.bind(null,this.syncEngine),await qg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Jg}createDatastore(e){const t=cg(e.databaseInfo.databaseId),n=function(e){return new sg(e)}(e.databaseInfo);return function(e,t,n,r){return new pg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new gg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ev(this.syncEngine,e,0)),eg.D()?new eg:new Xm)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new gv(e,t,n,r,i,o);return s&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Tl(e);bl("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await yg(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Jv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):wl("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ey{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Nl,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new av(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class ty{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new xl(Cl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Tl(e),r={documents:t.map((e=>gf(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,Hl.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Il(!!t.found),t.found.name,t.found.updateTime;const n=vf(e,t.found.name),r=hf(t.found.updateTime),i=t.found.createTime?hf(t.found.createTime):Zl.min(),o=new qu({mapValue:{fields:t.found.fields}});return Wu.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Il(!!t.missing),Il(!!t.readTime);const n=vf(e,t.missing),r=hf(t.readTime);return Wu.newNoDocument(n,r)}(e,t):El()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());Il(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ql.fromPath(t);this.mutations.push(new Ah(n,this.precondition(n)))})),await async function(e,t){const n=Tl(e),r={writes:t.map((e=>Ef(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,Hl.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw El();t=Zl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new xl(Cl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zl.min())?yh.exists(!1):yh.updateTime(t):yh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zl.min()))throw new xl(Cl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yh.updateTime(t)}return yh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ny{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new ug(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new ty(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!Sc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!jh(t)}return!1}}class ry{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=gl.UNAUTHENTICATED,this.clientId=jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{bl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(bl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xl(Cl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Kg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function iy(e,t){e.asyncQueue.verifyOperationInProgress(),bl("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Am(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function oy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ay(e);bl("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Bg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Bg(t.remoteStore,n))),e._onlineComponents=t}function sy(e){return"FirebaseError"===e.name?e.code===Cl.FAILED_PRECONDITION||e.code===Cl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function ay(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){bl("FirestoreClient","Using user provided OfflineComponentProvider");try{await iy(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!sy(n))throw n;Sl("Error using user provided cache. Falling back to memory cache: "+n),await iy(e,new Gv)}}else bl("FirestoreClient","Using default OfflineComponentProvider"),await iy(e,new Gv);return e._offlineComponents}async function ly(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(bl("FirestoreClient","Using user provided OnlineComponentProvider"),await oy(e,e._uninitializedComponentsProvider._online)):(bl("FirestoreClient","Using default OnlineComponentProvider"),await oy(e,new $v))),e._onlineComponents}function cy(e){return ay(e).then((e=>e.persistence))}function uy(e){return ay(e).then((e=>e.localStore))}function dy(e){return ly(e).then((e=>e.remoteStore))}function hy(e){return ly(e).then((e=>e.syncEngine))}function fy(e){return ly(e).then((e=>e.datastore))}async function py(e){const t=await ly(e),n=t.eventManager;return n.onListen=vv.bind(null,t.syncEngine),n.onUnlisten=wv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=yv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Sv.bind(null,t.syncEngine),n}function my(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Nl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Xv({next:o=>{t.enqueueAndForget((()=>ev(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new xl(Cl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new xl(Cl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new sv(Td(n.path),o,{includeMetadataChanges:!0,ra:!0});return Xg(e,s)}(await py(e),e.asyncQueue,t,n,r))),r.promise}function gy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Nl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Xv({next:n=>{t.enqueueAndForget((()=>ev(e,s))),n.fromCache&&"server"===r.source?i.reject(new xl(Cl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new sv(n,o,{includeMetadataChanges:!0,ra:!0});return Xg(e,s)}(await py(e),e.asyncQueue,t,n,r))),r.promise}function vy(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Bh().encode(e):e,function(e,t){return new ey(e,t)}(function(e,t){if(e instanceof Uint8Array)return Jv(e,t);if(e instanceof ArrayBuffer)return Jv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,cg(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Tl(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Tl(e),r=hf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(uv(r));const i=new cv(r,e.localStore,t.serializer);let o=await t.qa();for(;o;){const e=await i._a(o);e&&n._updateProgress(e),o=await t.qa()}const s=await i.complete();return await Lv(e,s.ca,void 0),await function(e,t){const n=Tl(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ua)}catch(e){return Sl("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await hy(e),i,r)}))}function yy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _y=new Map;function by(e,t,n){if(!n)throw new xl(Cl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wy(e,t,n,r){if(!0===t&&!0===r)throw new xl(Cl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Sy(e){if(!Ql.isDocumentKey(e))throw new xl(Cl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ky(e){if(Ql.isDocumentKey(e))throw new xl(Cl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ey(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":El()}function Iy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xl(Cl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ey(e);throw new xl(Cl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ty(e,t){if(t<=0)throw new xl(Cl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Cy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new xl(Cl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xl(Cl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xl(Cl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new xl(Cl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new xl(Cl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xl(Cl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xl(Cl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Rl;switch(e.type){case"firstParty":return new Ll(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xl(Cl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_y.get(e);t&&(bl("ComponentProvider","Removing Datastore"),_y.delete(e),t.terminate())}(this),Promise.resolve()}}function Ny(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Iy(e,xy))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=gl.MOCK_USER;else{t=Fe(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new xl(Cl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new gl(o)}e._authCredentials=new Al(new Pl(t,n))}}class Py{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Py(this.firestore,e,this._query)}}class Ry{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ay(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ry(this.firestore,e,this._key)}}class Ay extends Py{constructor(e,t,n){super(e,t,Td(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ry(this.firestore,null,new Ql(e))}withConverter(e){return new Ay(this.firestore,e,this._path)}}function Oy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=yt(e),by("collection","path",t),e instanceof xy){const n=Hl.fromString(t,...r);return ky(n),new Ay(e,null,n)}{if(!(e instanceof Ry||e instanceof Ay))throw new xl(Cl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Hl.fromString(t,...r));return ky(n),new Ay(e.firestore,null,n)}}function Dy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=yt(e),1===arguments.length&&(t=jl.newId()),by("doc","path",t),e instanceof xy){const n=Hl.fromString(t,...r);return Sy(n),new Ry(e,null,new Ql(n))}{if(!(e instanceof Ry||e instanceof Ay))throw new xl(Cl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Hl.fromString(t,...r));return Sy(n),new Ry(e.firestore,e instanceof Ay?e.converter:null,new Ql(n))}}function Ly(e,t){return e=yt(e),t=yt(t),(e instanceof Ry||e instanceof Ay)&&(t instanceof Ry||t instanceof Ay)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function My(e,t){return e=yt(e),t=yt(t),e instanceof Py&&t instanceof Py&&e.firestore===t.firestore&&Dd(e._query,t._query)&&e.converter===t.converter}class Fy{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ug(this,"async_queue_retry"),this.hu=()=>{const e=lg();e&&bl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=lg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=lg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Nl;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!pc(e))throw e;bl("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw wl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Hg.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&El()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function Uy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class jy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zy extends xy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Fy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||By(this),this._firestoreClient.terminate()}}function Vy(e){return e._firestoreClient||By(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function By(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new bu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,yy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ry(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function qy(e,t,n){const r=new Nl;return e.asyncQueue.enqueue((async()=>{try{await iy(e,n),await oy(e,t),r.resolve()}catch(e){const n=e;if(!sy(n))throw n;Sl("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Zy(e){return function(e){const t=new Nl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Tl(e);Ig(n.remoteStore)||bl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Tl(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=Kg(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await hy(e),t))),t.promise}(Vy(e=Iy(e,zy)))}function Wy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await cy(e),n=await dy(e);return t.setNetworkEnabled(!0),function(e){const t=Tl(e);return t.M_.delete(0),vg(t)}(n)}))}(Vy(e=Iy(e,zy)))}function Hy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await cy(e),n=await dy(e);return t.setNetworkEnabled(!1),async function(e){const t=Tl(e);t.M_.add(0),await yg(t),t.N_.set("Offline")}(n)}))}(Vy(e=Iy(e,zy)))}function Ky(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Tl(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await uy(e),t)))}(Vy(e=Iy(e,zy)),t).then((t=>t?new Py(e,null,t.query):null))}function Gy(e){if(e._initialized||e._terminated)throw new xl(Cl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qy(hu.fromBase64String(e))}catch(e){throw new xl(Cl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Qy(hu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yy{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new xl(Cl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $y{constructor(e){this._methodName=e}}class Jy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xl(Cl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xl(Cl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zl(this._lat,e._lat)||zl(this._long,e._long)}}const Xy=/^__.*__$/;class e_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ch(e,this.data,this.fieldMask,t,this.fieldTransforms):new Th(e,this.data,t,this.fieldTransforms)}}class t_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ch(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function n_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw El()}}class r_{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new r_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return k_(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(n_(this.fu)&&Xy.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class i_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||cg(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new r_({fu:e,methodName:t,vu:n,path:Gl.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function o_(e){const t=e._freezeSettings(),n=cg(e._databaseId);return new i_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function s_(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Fu(o.merge||o.mergeFields?2:0,t,n,i);__("Data must be an object, but it was:",s,r);const a=v_(r,s);let l,c;if(o.merge)l=new uu(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=b_(t,r,n);if(!s.contains(i))throw new xl(Cl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));E_(e,i)||e.push(i)}l=new uu(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new e_(new qu(a),l,c)}class a_ extends $y{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof a_}}function l_(e,t,n){return new r_({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class c_ extends $y{_toFieldTransform(e){return new gh(e.path,new lh)}isEqual(e){return e instanceof c_}}class u_ extends $y{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=l_(this,e,!0),n=this.Mu.map((e=>g_(e,t))),r=new ch(n);return new gh(e.path,r)}isEqual(e){return e instanceof u_&&it(this.Mu,e.Mu)}}class d_ extends $y{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=l_(this,e,!0),n=this.Mu.map((e=>g_(e,t))),r=new dh(n);return new gh(e.path,r)}isEqual(e){return e instanceof d_&&it(this.Mu,e.Mu)}}class h_ extends $y{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new fh(e.serializer,rh(e.serializer,this.xu));return new gh(e.path,t)}isEqual(e){return e instanceof h_&&this.xu===e.xu}}function f_(e,t,n,r){const i=e.Fu(1,t,n);__("Data must be an object, but it was:",i,r);const o=[],s=qu.empty();nu(r,((e,r)=>{const a=S_(t,e,n);r=yt(r);const l=i.Su(a);if(r instanceof a_)o.push(a);else{const e=g_(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new uu(o);return new t_(s,a,i.fieldTransforms)}function p_(e,t,n,r,i,o){const s=e.Fu(1,t,n),a=[b_(t,r,n)],l=[i];if(o.length%2!=0)throw new xl(Cl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(b_(t,o[h])),l.push(o[h+1]);const c=[],u=qu.empty();for(let h=a.length-1;h>=0;--h)if(!E_(c,a[h])){const e=a[h];let t=l[h];t=yt(t);const n=s.Su(e);if(t instanceof a_)c.push(e);else{const r=g_(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new uu(c);return new t_(u,d,s.fieldTransforms)}function m_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return g_(n,e.Fu(r?4:3,t))}function g_(e,t){if(y_(e=yt(e)))return __("Unsupported field value:",t,e),v_(e,t);if(e instanceof $y)return function(e,t){if(!n_(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=g_(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=yt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ql.fromDate(e);return{timestampValue:cf(t.serializer,n)}}if(e instanceof ql){const n=new ql(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cf(t.serializer,n)}}if(e instanceof Jy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qy)return{bytesValue:uf(t.serializer,e._byteString)};if(e instanceof Ry){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ff(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(Ey(e)))}(e,t)}function v_(e,t){const n={};return ru(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nu(e,((e,r)=>{const i=g_(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function y_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ql||e instanceof Jy||e instanceof Qy||e instanceof Ry||e instanceof $y)}function __(e,t,n){if(!y_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ey(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function b_(e,t,n){if((t=yt(t))instanceof Yy)return t._internalPath;if("string"==typeof t)return S_(e,t);throw k_("Field path arguments must be of type string or ",e,!1,void 0,n)}const w_=new RegExp("[~\\*/\\[\\]]");function S_(e,t,n){if(t.search(w_)>=0)throw k_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Yy(...t.split("."))._internalPath}catch(r){throw k_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function k_(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new xl(Cl.INVALID_ARGUMENT,a+e+l)}function E_(e,t){return e.some((e=>e.isEqual(t)))}class I_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ry(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new T_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(C_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class T_ extends I_{data(){return super.data()}}function C_(e,t){return"string"==typeof t?S_(e,t):t instanceof Yy?t._internalPath:t._delegate._internalPath}function x_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new xl(Cl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N_{}class P_ extends N_{}function R_(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof N_&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof O_)).length,n=e.filter((e=>e instanceof A_)).length;if(t>1||t>0&&n>0)throw new xl(Cl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class A_ extends P_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new A_(e,t,n)}_apply(e){const t=this._parse(e);return V_(e._query,t),new Py(e.firestore,e.converter,Ad(e._query,t))}_parse(e){const t=o_(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new xl(Cl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){z_(s,o);const t=[];for(const n of s)t.push(j_(r,e,n));a={arrayValue:{values:t}}}else a=j_(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||z_(s,o),a=m_(n,t,s,"in"===o||"not-in"===o);return Ju.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class O_ extends N_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new O_(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Xu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)V_(n,i),n=Ad(n,i)}(e._query,t),new Py(e.firestore,e.converter,Ad(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class D_ extends P_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new D_(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qu(t,n)}(e._query,this._field,this._direction);return new Py(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ed(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class L_ extends P_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new L_(e,t,n)}_apply(e){return new Py(e.firestore,e.converter,Od(e._query,this._limit,this._limitType))}}class M_ extends P_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new M_(e,t,n)}_apply(e){const t=U_(e,this.type,this._docOrFields,this._inclusive);return new Py(e.firestore,e.converter,function(e,t){return new Ed(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class F_ extends P_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new F_(e,t,n)}_apply(e){const t=U_(e,this.type,this._docOrFields,this._inclusive);return new Py(e.firestore,e.converter,function(e,t){return new Ed(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function U_(e,t,n,r){if(n[0]=yt(n[0]),n[0]instanceof I_)return function(e,t,n,r,i){if(!r)throw new xl(Cl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of Nd(e))if(s.field.isKeyField())o.push(Ru(t,r.key));else{const e=r.data.field(s.field);if(vu(e))throw new xl(Cl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new Hu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=o_(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new xl(Cl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const o=i[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!xd(e)&&-1!==o.indexOf("/"))throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(Hl.fromString(o));if(!Ql.isDocumentKey(n))throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Ql(n);a.push(Ru(t,i))}else{const e=m_(n,r,o);a.push(e)}}return new Hu(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function j_(e,t,n){if("string"==typeof(n=yt(n))){if(""===n)throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xd(t)&&-1!==n.indexOf("/"))throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Hl.fromString(n));if(!Ql.isDocumentKey(r))throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ru(e,new Ql(r))}if(n instanceof Ry)return Ru(e,n._key);throw new xl(Cl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ey(n),"."))}function z_(e,t){if(!Array.isArray(e)||0===e.length)throw new xl(Cl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function V_(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new xl(Cl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new xl(Cl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class B_{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Eu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw El()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return nu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Jy(mu(e.latitude),mu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=yu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const t=pu(e);return new ql(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Hl.fromString(e);Il(Ff(n));const r=new wu(n.get(1),n.get(3)),i=new Ql(n.popFirst(5));return r.isEqual(t)||wl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function q_(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Z_ extends B_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ry(this.firestore,null,t)}}class W_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class H_ extends I_{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new K_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(C_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class K_ extends H_{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class G_{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new W_(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new K_(this._firestore,this._userDataWriter,n.key,n,new W_(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xl(Cl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new K_(e._firestore,e._userDataWriter,n.doc.key,n.doc,new W_(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new K_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new W_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Q_(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Q_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return El()}}function Y_(e,t){return e instanceof H_&&t instanceof H_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof G_&&t instanceof G_&&e._firestore===t._firestore&&My(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class $_ extends B_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ry(this.firestore,null,t)}}function J_(e){e=Iy(e,Ry);const t=Iy(e.firestore,zy),n=Vy(t),r=new $_(t);return function(e,t){const n=new Nl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Tl(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new xl(Cl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Kg(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await uy(e),t,n))),n.promise}(n,e._key).then((n=>new H_(t,r,e._key,n,new W_(null!==n&&n.hasLocalMutations,!0),e.converter)))}function X_(e){e=Iy(e,Py);const t=Iy(e.firestore,zy),n=Vy(t),r=new $_(t);return function(e,t){const n=new Nl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Um(e,t,!0),i=new fv(t,r.hs),o=i.da(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=Kg(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await uy(e),t,n))),n.promise}(n,e._query).then((n=>new G_(t,r,e,n)))}function eb(e,t,n){e=Iy(e,Ry);const r=Iy(e.firestore,zy),i=q_(e.converter,t,n);return ob(r,[s_(o_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,yh.none())])}function tb(e,t,n){e=Iy(e,Ry);const r=Iy(e.firestore,zy),i=o_(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=yt(t))||t instanceof Yy?p_(i,"updateDoc",e._key,t,n,a):f_(i,"updateDoc",e._key,t),ob(r,[o.toMutation(e._key,yh.exists(!0))])}function nb(e,t){const n=Iy(e.firestore,zy),r=Dy(e),i=q_(e.converter,t);return ob(n,[s_(o_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,yh.exists(!1))]).then((()=>r))}function rb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=yt(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Uy(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Uy(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,d,h;if(e instanceof Ry)d=Iy(e.firestore,zy),h=Td(e._key.path),u={next:t=>{n[l]&&n[l](sb(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Iy(e,Py);d=Iy(t.firestore,zy),h=t._query;const r=new $_(d);u={next:e=>{n[l]&&n[l](new G_(d,r,t,e))},error:n[l+1],complete:n[l+2]},x_(e._query)}return function(e,t,n,r){const i=new Xv(r),o=new sv(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Xg(await py(e),o))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>ev(await py(e),o)))}}(Vy(d),h,c,u)}function ib(e,t){return function(e,t){const n=new Xv(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Tl(e).z_.add(t),t.next()}(await py(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Tl(e).z_.delete(t)}(await py(e),n)))}}(Vy(e=Iy(e,zy)),Uy(t)?t:{next:t})}function ob(e,t){return function(e,t){const n=new Nl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Kv(e);try{const e=await function(e,t){const n=Tl(e),r=ql.now(),i=t.reduce(((e,t)=>e.add(t.key)),Jd());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=qd(),l=Jd();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Eh(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Ch(e.key,t,Zu(t.value.mapValue),yh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Hd(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new iu(zl)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Lv(r,e.changes),await Og(r.remoteStore)}catch(e){const t=Kg(e,"Failed to persist write");n.reject(t)}}(await hy(e),t,n))),n.promise}(Vy(e),t)}function sb(e,t,n){const r=n.docs.get(t._key),i=new $_(e);return new H_(e,i,t._key,r,new W_(n.hasPendingWrites,n.fromCache),t.converter)}const ab={maxAttempts:5};class lb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=o_(e)}set(e,t,n){this._verifyNotCommitted();const r=cb(e,this._firestore),i=q_(r.converter,t,n),o=s_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,yh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=cb(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=yt(t))||t instanceof Yy?p_(this._dataReader,"WriteBatch.update",r._key,t,n,s):f_(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,yh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cb(e,this._firestore);return this._mutations=this._mutations.concat(new Rh(t._key,yh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xl(Cl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cb(e,t){if((e=yt(e)).firestore!==t)throw new xl(Cl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class ub extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=o_(e)}get(e){const t=cb(e,this._firestore),n=new Z_(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return El();const r=e[0];if(r.isFoundDocument())return new I_(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new I_(this._firestore,n,t._key,null,t.converter);throw El()}))}set(e,t,n){const r=cb(e,this._firestore),i=q_(r.converter,t,n),o=s_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=cb(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=yt(t))||t instanceof Yy?p_(this._dataReader,"Transaction.update",r._key,t,n,s):f_(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=cb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cb(e,this._firestore),n=new $_(this._firestore);return super.get(e).then((e=>new H_(this._firestore,n,t._key,e._document,new W_(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){vl=e}(mn),sn(new _t("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new zy(new Ol(e.getProvider("auth-internal")),new Fl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xl(Cl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),wn(ml,"4.6.2",e),wn(ml,"4.6.2","esm2017")}();function db(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xl("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function hb(){if("undefined"===typeof Uint8Array)throw new xl("unimplemented","Uint8Arrays are not available in this environment.")}function fb(){if("undefined"==typeof atob)throw new xl("unimplemented","Blobs are unavailable in Firestore in this environment.")}class pb{constructor(e){this._delegate=e}static fromBase64String(e){return fb(),new pb(Qy.fromBase64String(e))}static fromUint8Array(e){return hb(),new pb(Qy.fromUint8Array(e))}toBase64(){return fb(),this._delegate.toBase64()}toUint8Array(){return hb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mb(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class gb{enableIndexedDbPersistence(e,t){return function(e,t){Gy(e=Iy(e,zy));const n=Vy(e);if(n._uninitializedComponentsProvider)throw new xl(Cl.FAILED_PRECONDITION,"SDK cache is already specified.");Sl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new $v;return qy(n,i,new Qv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Gy(e=Iy(e,zy));const t=Vy(e);if(t._uninitializedComponentsProvider)throw new xl(Cl.FAILED_PRECONDITION,"SDK cache is already specified.");Sl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new $v;return qy(t,r,new Yv(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new xl(Cl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Nl;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!uc.D())return Promise.resolve();const t=e+"main";await uc.delete(t)}(Tm(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class vb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof wu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Sl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ny(this._delegate,e,t,n)}enableNetwork(){return Wy(this._delegate)}disableNetwork(){return Hy(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,wy("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Zy(this._delegate)}onSnapshotsInSync(e){return ib(this._delegate,e)}get app(){if(!this._appCompat)throw new xl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rb(this,Oy(this._delegate,e))}catch(t){throw kb(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sb(this,Dy(this._delegate,e))}catch(t){throw kb(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xb(this,function(e,t){if(e=Iy(e,xy),by("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xl(Cl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Py(e,null,function(e){return new Ed(Hl.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw kb(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Iy(e,zy);const r=Object.assign(Object.assign({},ab),n);return function(e){if(e.maxAttempts<1)throw new xl(Cl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Nl;return e.asyncQueue.enqueueAndForget((async()=>{const i=await fy(e);new ny(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(Vy(e),(n=>t(new ub(e,n))),r)}(this._delegate,(t=>e(new _b(this,t))))}batch(){return Vy(this._delegate),new bb(new lb(this._delegate,(e=>ob(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Vy(e=Iy(e,zy)),r=new jy;return vy(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Ky(this._delegate,e).then((e=>e?new xb(this,e):null))}}class yb extends B_{constructor(e){super(),this.firestore=e}convertBytes(e){return new pb(new Qy(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sb.forKey(t,this.firestore,null)}}class _b{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yb(e)}get(e){const t=Ab(e);return this._delegate.get(t).then((e=>new Tb(this._firestore,new H_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Ab(e);return n?(db("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=Ab(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=Ab(e);return this._delegate.delete(t),this}}class bb{constructor(e){this._delegate=e}set(e,t,n){const r=Ab(e);return n?(db("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=Ab(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=Ab(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wb{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new K_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cb(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=wb.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new wb(e,new yb(e),t),r.set(t,i)),i}}wb.INSTANCES=new WeakMap;class Sb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yb(e)}static forPath(e,t,n){if(e.length%2!==0)throw new xl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Sb(t,new Ry(t._delegate,n,new Ql(e)))}static forKey(e,t,n){return new Sb(t,new Ry(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Rb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rb(this.firestore,Oy(this._delegate,e))}catch(t){throw kb(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=yt(e))instanceof Ry&&Ly(this._delegate,e)}set(e,t){t=db("DocumentReference.set",t);try{return t?eb(this._delegate,e,t):eb(this._delegate,e)}catch(n){throw kb(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tb(this._delegate,e):tb(this._delegate,e,t,...r)}catch(o){throw kb(o,"updateDoc()","DocumentReference.update()")}}delete(){return ob(Iy((e=this._delegate).firestore,zy),[new Rh(e._key,yh.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Eb(t),i=Ib(t,(e=>new Tb(this.firestore,new H_(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return rb(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?J_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Iy(e,Ry);const t=Iy(e.firestore,zy);return my(Vy(t),e._key,{source:"server"}).then((n=>sb(t,e,n)))}(this._delegate):function(e){e=Iy(e,Ry);const t=Iy(e.firestore,zy);return my(Vy(t),e._key).then((n=>sb(t,e,n)))}(this._delegate),t.then((e=>new Tb(this.firestore,new H_(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Sb(this.firestore,e?this._delegate.withConverter(wb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function kb(e,t,n){return e.message=e.message.replace(t,n),e}function Eb(e){for(const t of e)if("object"===typeof t&&!mb(t))return t;return{}}function Ib(e,t){var n,r;let i;return i=mb(e[0])?e[0]:mb(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Tb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sb(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Y_(this._delegate,e._delegate)}}class Cb extends Tb{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||El(),t}}class xb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yb(e)}where(e,t,n){try{return new xb(this.firestore,R_(this._delegate,function(e,t,n){const r=t,i=C_("where",e);return A_._create(i,r,n)}(e,t,n)))}catch(r){throw kb(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xb(this.firestore,R_(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=C_("orderBy",e);return D_._create(n,t)}(e,t)))}catch(n){throw kb(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xb(this.firestore,R_(this._delegate,(Ty("limit",t=e),L_._create("limit",t,"F"))))}catch(t){throw kb(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new xb(this.firestore,R_(this._delegate,(Ty("limitToLast",t=e),L_._create("limitToLast",t,"L"))))}catch(t){throw kb(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new xb(this.firestore,R_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return M_._create("startAt",t,!0)}(...arguments)))}catch(e){throw kb(e,"startAt()","Query.startAt()")}}startAfter(){try{return new xb(this.firestore,R_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return M_._create("startAfter",t,!1)}(...arguments)))}catch(e){throw kb(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new xb(this.firestore,R_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return F_._create("endBefore",t,!1)}(...arguments)))}catch(e){throw kb(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new xb(this.firestore,R_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return F_._create("endAt",t,!0)}(...arguments)))}catch(e){throw kb(e,"endAt()","Query.endAt()")}}isEqual(e){return My(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?X_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Iy(e,Py);const t=Iy(e.firestore,zy),n=Vy(t),r=new $_(t);return gy(n,e._query,{source:"server"}).then((n=>new G_(t,r,e,n)))}(this._delegate):function(e){e=Iy(e,Py);const t=Iy(e.firestore,zy),n=Vy(t),r=new $_(t);return x_(e._query),gy(n,e._query).then((n=>new G_(t,r,e,n)))}(this._delegate),t.then((e=>new Pb(this.firestore,new G_(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Eb(t),i=Ib(t,(e=>new Pb(this.firestore,new G_(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return rb(this._delegate,r,i)}withConverter(e){return new xb(this.firestore,e?this._delegate.withConverter(wb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Nb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xb(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Cb(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Nb(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Cb(this._firestore,n))}))}isEqual(e){return Y_(this._delegate,e._delegate)}}class Rb extends xb{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sb(this.firestore,e):null}doc(e){try{return new Sb(this.firestore,void 0===e?Dy(this._delegate):Dy(this._delegate,e))}catch(t){throw kb(t,"doc()","CollectionReference.doc()")}}add(e){return nb(this._delegate,e).then((e=>new Sb(this.firestore,e)))}isEqual(e){return Ly(this._delegate,e._delegate)}withConverter(e){return new Rb(this.firestore,e?this._delegate.withConverter(wb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ab(e){return Iy(e,Ry)}class Ob{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Yy(...t)}static documentId(){return new Ob(Gl.keyField().canonicalString())}isEqual(e){return(e=yt(e))instanceof Yy&&this._delegate._internalPath.isEqual(e._internalPath)}}class Db{constructor(e){this._delegate=e}static serverTimestamp(){const e=new c_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Db(e)}static delete(){const e=new a_("deleteField");return e._methodName="FieldValue.delete",new Db(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new u_("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Db(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new d_("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Db(e)}static increment(e){const t=new h_("increment",e);return t._methodName="FieldValue.increment",new Db(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Lb={Firestore:vb,GeoPoint:Jy,Timestamp:ql,Blob:pb,Transaction:_b,WriteBatch:bb,DocumentReference:Sb,DocumentSnapshot:Tb,Query:xb,QueryDocumentSnapshot:Cb,QuerySnapshot:Pb,CollectionReference:Rb,FieldPath:Ob,FieldValue:Db,setLogLevel:function(e){var t;t=e,yl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new _t("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Lb)))}(e,((e,t)=>new vb(e,t,new gb))),e.registerVersion("@firebase/firestore-compat","0.3.31")}(zn);const Mb="firebasestorage.googleapis.com",Fb="storageBucket";class Ub extends Ge{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Vb(e),"Firebase Storage: ".concat(t," (").concat(Vb(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ub.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var jb,zb;function Vb(e){return"storage/"+e}function Bb(){return new Ub(jb.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function qb(){return new Ub(jb.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Zb(){return new Ub(jb.CANCELED,"User canceled the upload/download.")}function Wb(){return new Ub(jb.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Hb(e){return new Ub(jb.INVALID_ARGUMENT,e)}function Kb(){return new Ub(jb.APP_DELETED,"The Firebase app was deleted.")}function Gb(e){return new Ub(jb.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qb(e,t){return new Ub(jb.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Yb(e){throw new Ub(jb.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(jb||(jb={}));class $b{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=$b.makeFromUrl(e,t)}catch(i){return new $b(e,"")}if(""===n.path)return n;throw r=e,new Ub(jb.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===Mb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new $b(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Ub(jb.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Jb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Xb(e){return"string"===typeof e||e instanceof String}function ew(e){return tw()&&e instanceof Blob}function tw(){return"undefined"!==typeof Blob}function nw(e,t,n,r){if(r<t)throw Hb("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Hb("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function rw(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function iw(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function ow(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(zb||(zb={}));class sw{constructor(e,t,n,r,i,o,s,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new aw(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===zb.NO_ERROR,i=n.getStatus();if(!t||ow(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===zb.ABORT;return void e(!1,new aw(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new aw(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(o){r(o)}else if(null!==i){const e=Bb();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Kb():Zb())}else{r(qb())}};this.canceled_?t(0,new aw(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){o&&clearTimeout(o)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||s)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class aw{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function lw(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function cw(){const e=lw();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(tw())return new Blob(n);throw new Ub(jb.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function uw(e){if("undefined"===typeof atob)throw t="base-64",new Ub(jb.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const dw={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hw{constructor(e,t){this.data=e,this.contentType=t||null}}function fw(e,t){switch(e){case dw.RAW:return new hw(pw(t));case dw.BASE64:case dw.BASE64URL:return new hw(mw(e,t));case dw.DATA_URL:return new hw(function(e){const t=new gw(e);return t.base64?mw(dw.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw Qb(dw.DATA_URL,"Malformed data URL.")}return pw(t)}(t.rest)}(t),new gw(t).contentType)}throw Bb()}function pw(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function mw(e,t){switch(e){case dw.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Qb(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case dw.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Qb(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=uw(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw Qb(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class gw{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Qb(dw.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class vw{constructor(e,t){let n=0,r="";ew(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ew(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new vw(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new vw(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(tw()){const e=t.map((e=>e instanceof vw?e.data_:e));return new vw(cw.apply(null,e))}{const e=t.map((e=>Xb(e)?fw(dw.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new vw(r,!0)}}uploadData(){return this.data_}}function yw(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function _w(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function bw(e,t){return t}class ww{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||bw}}let Sw=null;function kw(){if(Sw)return Sw;const e=[];e.push(new ww("bucket")),e.push(new ww("generation")),e.push(new ww("metageneration")),e.push(new ww("name","fullPath",!0));const t=new ww("name");t.xform=function(e,t){return function(e){return!Xb(e)||e.length<2?e:_w(e)}(t)},e.push(t);const n=new ww("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ww("timeCreated")),e.push(new ww("updated")),e.push(new ww("md5Hash",null,!0)),e.push(new ww("cacheControl",null,!0)),e.push(new ww("contentDisposition",null,!0)),e.push(new ww("contentEncoding",null,!0)),e.push(new ww("contentLanguage",null,!0)),e.push(new ww("contentType",null,!0)),e.push(new ww("metadata","customMetadata",!0)),Sw=e,Sw}function Ew(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new $b(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Iw(e,t,n){const r=yw(t);if(null===r)return null;return Ew(e,r,n)}function Tw(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Cw="prefixes",xw="items";function Nw(e,t,n){const r=yw(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Cw])for(const i of n[Cw]){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new $b(t,n));r.prefixes.push(o)}if(n[xw])for(const i of n[xw]){const n=e._makeStorageReference(new $b(t,i.name));r.items.push(n)}return r}(e,t,r)}class Pw{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Rw(e){if(!e)throw Bb()}function Aw(e,t){return function(n,r){const i=Iw(e,r,t);return Rw(null!==i),i}}function Ow(e,t){return function(n,r){const i=Iw(e,r,t);return Rw(null!==i),function(e,t,n,r){const i=yw(t);if(null===i)return null;if(!Xb(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return rw("/b/"+s(i)+"/o/"+s(o),n,r)+iw({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Dw(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Ub(jb.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ub(jb.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Ub(jb.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Ub(jb.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Lw(e){const t=Dw(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new Ub(jb.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Mw(e,t,n){const r=rw(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Pw(r,"GET",Aw(e,n),i);return o.errorHandler=Lw(t),o}function Fw(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=rw(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new Pw(s,"GET",function(e,t){return function(n,r){const i=Nw(e,t,r);return Rw(null!==i),i}}(e,t.bucket),a);return l.urlParams=o,l.errorHandler=Dw(t),l}function Uw(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function jw(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=Uw(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Tw(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=vw.getBlob(c,r,u);if(null===d)throw Wb();const h={name:l.fullPath},f=rw(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Pw(f,"POST",Aw(e,n),p);return m.urlParams=h,m.headers=s,m.body=d.uploadData(),m.errorHandler=Dw(t),m}class zw{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Vw(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Rw(!1)}return Rw(!!n&&-1!==(t||["active"]).indexOf(n)),n}const Bw=262144;function qw(e,t,n,r,i,o,s,a){const l=new zw(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Ub(jb.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(d,h);if(null===m)throw Wb();const g=t.maxUploadRetryTime,v=new Pw(n,"POST",(function(e,n){const i=Vw(e,["active","final"]),s=l.current+u,a=r.size();let c;return c="final"===i?Aw(t,o)(e,n):null,new zw(s,a,"final"===i,c)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=Dw(e),v}const Zw={STATE_CHANGED:"state_changed"},Ww={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Hw(e){switch(e){case"running":case"pausing":case"canceling":return Ww.RUNNING;case"paused":return Ww.PAUSED;case"success":return Ww.SUCCESS;case"canceled":return Ww.CANCELED;default:return Ww.ERROR}}class Kw{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function Gw(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let Qw=null;class Yw{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zb.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=zb.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=zb.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Yb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Yb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class $w extends Yw{initXhr(){this.xhr_.responseType="text"}}function Jw(){return Qw?Qw():new $w}class Xw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=kw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(jb.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(ow(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=qb()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(jb.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s=Uw(t,r,i),a={name:s.fullPath},l=rw(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},u=Tw(s,n),d=e.maxUploadRetryTime,h=new Pw(l,"POST",(function(e){let t;Vw(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Rw(!1)}return Rw(Xb(t)),t}),d);return h.urlParams=a,h.headers=c,h.body=u,h.errorHandler=Dw(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Jw,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new Pw(n,"POST",(function(e){const t=Vw(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Rw(!1)}n||Rw(!1);const i=Number(n);return Rw(!isNaN(i)),new zw(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Dw(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,Jw,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=Bw*this._chunkMultiplier,t=new zw(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=qw(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const s=this._ref.storage._makeRequest(o,Jw,r,i,!1);this._request=s,s.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(Bw*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Mw(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,Jw,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=jw(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Jw,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Zb(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Hw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new Kw(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Hw(this._state)){case Ww.SUCCESS:Gw(this._resolve.bind(null,this.snapshot))();break;case Ww.CANCELED:case Ww.ERROR:Gw(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Hw(this._state)){case Ww.RUNNING:case Ww.PAUSED:e.next&&Gw(e.next.bind(e,this.snapshot))();break;case Ww.SUCCESS:e.complete&&Gw(e.complete.bind(e))();break;default:e.error&&Gw(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class eS{constructor(e,t){this._service=e,this._location=t instanceof $b?t:$b.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new eS(e,t)}get root(){const e=new $b(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _w(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new $b(this._location.bucket,e);return new eS(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Gb(e)}}function tS(e){const t={prefixes:[],items:[]};return nS(e,t).then((()=>t))}async function nS(e,t,n){const r={pageToken:n},i=await rS(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await nS(e,t,i.nextPageToken)}function rS(e,t){null!=t&&"number"===typeof t.maxResults&&nw("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Fw(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Jw)}function iS(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=rw(t.fullServerUrl(),e.host,e._protocol),o=Tw(n,r),s=e.maxOperationRetryTime,a=new Pw(i,"PATCH",Aw(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Lw(t),a}(e.storage,e._location,t,kw());return e.storage.makeRequestWithTokens(n,Jw)}function oS(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=rw(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Pw(r,"GET",Ow(e,n),i);return o.errorHandler=Lw(t),o}(e.storage,e._location,kw());return e.storage.makeRequestWithTokens(t,Jw).then((e=>{if(null===e)throw new Ub(jb.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function sS(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=rw(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Pw(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Lw(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Jw)}function aS(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new $b(e._location.bucket,n);return new eS(e.storage,r)}function lS(e,t){if(e instanceof dS){const n=e;if(null==n._bucket)throw new Ub(jb.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fb+"' property when initializing the app?");const r=new eS(n,n._bucket);return null!=t?lS(r,t):r}return void 0!==t?aS(e,t):e}function cS(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof dS)return new eS(e,t);throw Hb("To use ref(service, url), the first argument must be a Storage instance.")}return lS(e,t)}function uS(e,t){const n=null===t||void 0===t?void 0:t[Fb];return null==n?null:$b.makeFromBucketSpec(n,e)}class dS{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Mb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?$b.makeFromBucketSpec(r,this._host):uS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=$b.makeFromBucketSpec(this._url,e):this._bucket=uS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eS(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Jb(Kb());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=iw(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new sw(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const hS="@firebase/storage",fS="0.12.5",pS="storage";function mS(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Xw(e,new vw(t),n)}(e=yt(e),t,n)}function gS(e){return function(e){e._throwIfRoot("getMetadata");const t=Mw(e.storage,e._location,kw());return e.storage.makeRequestWithTokens(t,Jw)}(e=yt(e))}function vS(e,t){return cS(e=yt(e),t)}function yS(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Fe(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function _S(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new dS(r,i,o,n,mn)}sn(new _t(pS,_S,"PUBLIC").setMultipleInstances(!0)),wn(hS,fS,""),wn(hS,fS,"esm2017");class bS{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class wS{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new bS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new bS(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new bS(e,this,this._ref)):{next:t.next?e=>t.next(new bS(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class SS{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new kS(e,this._service)))}get items(){return this._delegate.items.map((e=>new kS(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class kS{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return aS(e,t)}(this._delegate,e);return new kS(t,this.storage)}get root(){return new kS(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new kS(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new wS(mS(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dw.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=fw(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new wS(new Xw(this._delegate,new vw(r.data,!0),i),this)}listAll(){return function(e){return tS(e=yt(e))}(this._delegate).then((e=>new SS(e,this.storage)))}list(e){return function(e,t){return rS(e=yt(e),t)}(this._delegate,e||void 0).then((e=>new SS(e,this.storage)))}getMetadata(){return gS(this._delegate)}updateMetadata(e){return function(e,t){return iS(e=yt(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return oS(e=yt(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return sS(e=yt(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Gb(e)}}class ES{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(IS(e))throw Hb("ref() expected a child path but got a URL, use refFromURL instead.");return new kS(vS(this._delegate,e),this)}refFromURL(e){if(!IS(e))throw Hb("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$b.makeFromUrl(e,this._delegate.host)}catch(t){throw Hb("refFromUrl() expected a valid full URL but got an invalid one.")}return new kS(vS(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yS(this._delegate,e,t,n)}}function IS(e){return/^[A-Za-z]+:\/\//.test(e)}function TS(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new ES(r,i)}!function(e){const t={TaskState:Ww,TaskEvent:Zw,StringFormat:dw,Storage:ES,Reference:kS};e.INTERNAL.registerComponent(new _t("storage-compat",TS,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.8")}(zn);const CS="@firebase/database",xS="1.0.5";let NS="";function PS(e){NS=e}class RS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Je(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:$e(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class AS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return et(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const OS=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new RS(t)}}catch(t){}return new AS},DS=OS("localStorage"),LS=OS("sessionStorage"),MS=new Pt("@firebase/database"),FS=function(){let e=1;return function(){return e++}}(),US=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Ee(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ct;n.update(t);const r=n.digest();return Ce.encodeByteArray(r)},jS=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=jS.apply(null,n):e+="object"===typeof n?Je(n):n,e+=" "}return e};let zS=null,VS=!0;const BS=function(e,t){Ee(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(MS.logLevel=It.VERBOSE,zS=MS.log.bind(MS),t&&LS.set("logging_enabled",!0)):"function"===typeof e?zS=e:(zS=null,LS.remove("logging_enabled"))},qS=function(){if(!0===VS&&(VS=!1,null===zS&&!0===LS.get("logging_enabled")&&BS(!0)),zS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jS.apply(null,t);zS(r)}},ZS=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];qS(e,...n)}},WS=function(){const e="FIREBASE INTERNAL ERROR: "+jS(...arguments);MS.error(e)},HS=function(){const e="FIREBASE FATAL ERROR: ".concat(jS(...arguments));throw MS.error(e),new Error(e)},KS=function(){const e="FIREBASE WARNING: "+jS(...arguments);MS.warn(e)},GS=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},QS="[MIN_NAME]",YS="[MAX_NAME]",$S=function(e,t){if(e===t)return 0;if(e===QS||t===YS)return-1;if(t===QS||e===YS)return 1;{const n=ok(e),r=ok(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},JS=function(e,t){return e===t?0:e<t?-1:1},XS=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Je(t))},ek=function(e){if("object"!==typeof e||null===e)return Je(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Je(t[r]),n+=":",n+=ek(e[t[r]]);return n+="}",n},tk=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function nk(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const rk=function(e){Ee(!GS(e),"Invalid JSON number");const t=1023;let n,r,i,o,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const ik=new RegExp("^-?(0*)\\d{1,10}$"),ok=function(e){if(ik.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},sk=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw KS("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ak=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class lk{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){KS('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class ck{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(qS("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',KS(e)}}class uk{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}uk.OWNER="owner";const dk="5",hk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fk="ac",pk="websocket",mk="long_polling";class gk{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=DS.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&DS.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function vk(e,t,n){let r;if(Ee("string"===typeof t,"typeof type must == string"),Ee("object"===typeof n,"typeof params must == object"),t===pk)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==mk)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return nk(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class yk{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;et(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Ae(void 0,this.counters_)}}const _k={},bk={};function wk(e){const t=e.toString();return _k[t]||(_k[t]=new yk),_k[t]}class Sk{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&sk((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const kk="start";class Ek{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ZS(e),this.stats_=wk(t),this.urlFn=e=>(this.appCheckToken&&(e[fk]=this.appCheckToken),vk(t,mk,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Sk(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(We()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ik((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,s,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===kk)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[kk]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=dk,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[fk]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&hk.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ek.forceAllow_=!0}static forceDisallow(){Ek.forceDisallow_=!0}static isAvailable(){return!We()&&(!!Ek.forceAllow_||!Ek.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Je(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ne(t),r=tk(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(We())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Je(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ik{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,We())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=FS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ik.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){qS("frame writing exception"),i.stack&&qS(i.stack),qS(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||qS("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){We()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{qS("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let Tk=null;"undefined"!==typeof MozWebSocket?Tk=MozWebSocket:"undefined"!==typeof WebSocket&&(Tk=WebSocket);class Ck{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ZS(this.connId),this.stats_=wk(t),this.connURL=Ck.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=dk,!We()&&"undefined"!==typeof location&&location.hostname&&hk.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[fk]=r),i&&(o.p=i),vk(e,pk,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,DS.set("previous_websocket_failure",!0);try{let e;if(We()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(dk,"/").concat(NS,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Tk(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Ck.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Tk&&!Ck.forceDisallow_}static previouslyFailed(){return DS.isInMemoryStorage||!0===DS.get("previous_websocket_failure")}markConnectionHealthy(){DS.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=$e(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ee(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Je(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=tk(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ck.responsesRequiredToBeHealthy=2,Ck.healthyTimeout=3e4;class xk{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ek,Ck]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Ck&&Ck.isAvailable();let n=t&&!Ck.previouslyFailed();if(e.webSocketOnly&&(t||KS("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Ck];else{const e=this.transports_=[];for(const t of xk.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);xk.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xk.globalTransportInitialized_=!1;class Nk{constructor(e,t,n,r,i,o,s,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ZS("c:"+this.id+":"),this.transportManager_=new xk(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=ak((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=XS("t",e),n=XS("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=XS("t",e),n=XS("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=XS("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?WS("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WS("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),dk!==n&&KS("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),ak((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ak((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(DS.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Pk{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Rk{constructor(e){this.allowedEvents_=e,this.listeners_={},Ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Ee(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Ak extends Rk{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||je()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Ak}getInitialEvent(e){return Ee("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Ok=32,Dk=768;class Lk{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mk(){return new Lk("")}function Fk(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Uk(e){return e.pieces_.length-e.pieceNum_}function jk(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Lk(e.pieces_,t)}function zk(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Vk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Bk(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Lk(t,0)}function qk(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Lk)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Lk(n,0)}function Zk(e){return e.pieceNum_>=e.pieces_.length}function Wk(e,t){const n=Fk(e),r=Fk(t);if(null===n)return t;if(n===r)return Wk(jk(e),jk(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Hk(e,t){const n=Vk(e,0),r=Vk(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=$S(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Kk(e,t){if(Uk(e)!==Uk(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Gk(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Uk(e)>Uk(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Qk{constructor(e,t){this.errorPrefix_=t,this.parts_=Vk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=vt(this.parts_[n]);Yk(this)}}function Yk(e){if(e.byteLength_>Dk)throw new Error(e.errorPrefix_+"has a key path longer than "+Dk+" bytes ("+e.byteLength_+").");if(e.parts_.length>Ok)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ok+") or object contains a cycle "+$k(e))}function $k(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Jk extends Rk{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Jk}getInitialEvent(e){return Ee("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Xk=1e3;class eE extends Pk{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=eE.nextPersistentConnectionId_++,this.log_=ZS("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xk,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!We())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jk.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ak.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Je(i)),Ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Me,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ee(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;eE.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&et(e,"w")){const n=tt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();KS("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Xe(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Xe(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Je(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):WS("Unrecognized action received from server: "+Je(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xk,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xk,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xk),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+eE.nextConnectionId_++,i=this.lastSessionId;let o=!1,s=null;const a=function(){s?s.close():(o=!0,n())},l=function(e){Ee(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?qS("getToken() completed but was canceled"):(qS("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,s=new Nk(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{KS(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(WS){this.log_("Failed to get token: "+WS),o||(this.repoInfo_.nodeAdmin&&KS(WS),a())}}}interrupt(e){qS("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){qS("Resuming connection for reason: "+e),delete this.interruptReasons_[e],nt(this.interruptReasons_)&&(this.reconnectDelay_=Xk,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>ek(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Lk(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){qS("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){qS("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";We()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+NS.replace(/\./g,"-")]=1,je()?e["framework.cordova"]=1:qe()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ak.getInstance().currentlyOnline();return nt(this.interruptReasons_)&&e}}eE.nextPersistentConnectionId_=0,eE.nextConnectionId_=0;class tE{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tE(e,t)}}class nE{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new tE(QS,e),r=new tE(QS,t);return 0!==this.compare(n,r)}minPost(){return tE.MIN}}let rE;class iE extends nE{static get __EMPTY_NODE(){return rE}static set __EMPTY_NODE(e){rE=e}compare(e,t){return $S(e.name,t.name)}isDefinedOn(e){throw Ie("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tE.MIN}maxPost(){return new tE(YS,rE)}makePost(e,t){return Ee("string"===typeof e,"KeyIndex indexValue must always be a string."),new tE(e,rE)}toString(){return".key"}}const oE=new iE;class sE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class aE{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:aE.RED,this.left=null!=r?r:lE.EMPTY_NODE,this.right=null!=i?i:lE.EMPTY_NODE}copy(e,t,n,r,i){return new aE(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return lE.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return lE.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,aE.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,aE.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}aE.RED=!0,aE.BLACK=!1;class lE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lE.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new lE(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,aE.BLACK,null,null))}remove(e){return new lE(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,aE.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sE(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new sE(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new sE(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new sE(this.root_,null,this.comparator_,!0,e)}}function cE(e,t){return $S(e.name,t.name)}function uE(e,t){return $S(e,t)}let dE;lE.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new aE(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const hE=function(e){return"number"===typeof e?"number:"+rk(e):"string:"+e},fE=function(e){if(e.isLeafNode()){const t=e.val();Ee("string"===typeof t||"number"===typeof t||"object"===typeof t&&et(t,".sv"),"Priority must be a string or number.")}else Ee(e===dE||e.isEmpty(),"priority of unexpected type.");Ee(e===dE||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let pE,mE,gE;class vE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vE.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ee(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),fE(this.priorityNode_)}static set __childrenNodeConstructor(e){pE=e}static get __childrenNodeConstructor(){return pE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new vE(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:vE.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Zk(e)?this:".priority"===Fk(e)?this.priorityNode_:vE.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:vE.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Fk(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Ee(".priority"!==n||1===Uk(e),".priority must be the last token in a path"),this.updateImmediateChild(n,vE.__childrenNodeConstructor.EMPTY_NODE.updateChild(jk(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hE(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?rk(this.value_):this.value_,this.lazyHash_=US(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===vE.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof vE.__childrenNodeConstructor?-1:(Ee(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=vE.VALUE_TYPE_ORDER.indexOf(t),i=vE.VALUE_TYPE_ORDER.indexOf(n);return Ee(r>=0,"Unknown leaf type: "+t),Ee(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}vE.VALUE_TYPE_ORDER=["object","boolean","number","string"];const yE=new class extends nE{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?$S(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tE.MIN}maxPost(){return new tE(YS,new vE("[PRIORITY-POST]",gE))}makePost(e,t){const n=mE(e);return new tE(t,new vE("[PRIORITY-POST]",n))}toString(){return".priority"}},_E=Math.log(2);class bE{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/_E,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wE=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let s,a;if(0===o)return null;if(1===o)return s=e[t],a=n?n(s):s,new aE(a,s.node,aE.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return s=e[l],a=n?n(s):s,new aE(a,s.node,aE.BLACK,c,u)}},o=function(t){let r=null,o=null,s=e.length;const a=function(t,r){const o=s-t,a=s;s-=t;const c=i(o+1,a),u=e[o],d=n?n(u):u;l(new aE(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,aE.BLACK):(a(r,aE.BLACK),a(r,aE.RED))}return o}(new bE(e.length));return new lE(r||t,o)};let SE;const kE={};class EE{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ee(kE&&yE,"ChildrenNode.ts has not been loaded"),SE=SE||new EE({".priority":kE},{".priority":yE}),SE}get(e){const t=tt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof lE?t:null}hasIndex(e){return et(this.indexSet_,e.toString())}addIndex(e,t){Ee(e!==oE,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(tE.Wrap);let o,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?wE(n,e.getCompare()):kE;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=o,new EE(c,l)}addToIndexes(e,t){const n=rt(this.indexes_,((n,r)=>{const i=tt(this.indexSet_,r);if(Ee(i,"Missing index implementation for "+r),n===kE){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(tE.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),wE(n,i.getCompare())}return kE}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new tE(e.name,r))),i.insert(e,e.node)}}));return new EE(n,this.indexSet_)}removeFromIndexes(e,t){const n=rt(this.indexes_,(n=>{if(n===kE)return n;{const r=t.get(e.name);return r?n.remove(new tE(e.name,r)):n}}));return new EE(n,this.indexSet_)}}let IE;class TE{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&fE(this.priorityNode_),this.children_.isEmpty()&&Ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return IE||(IE=new TE(new lE(uE),null,EE.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||IE}updatePriority(e){return this.children_.isEmpty()?this:new TE(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?IE:t}}getChild(e){const t=Fk(e);return null===t?this:this.getImmediateChild(t).getChild(jk(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Ee(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new tE(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?IE:this.priorityNode_;return new TE(r,o,i)}}updateChild(e,t){const n=Fk(e);if(null===n)return t;{Ee(".priority"!==Fk(e)||1===Uk(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(jk(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(yE,((o,s)=>{t[o]=s.val(e),n++,i&&TE.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+hE(this.getPriority().val())+":"),this.forEachChild(yE,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":US(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new tE(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new tE(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new tE(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,tE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,tE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===CE?-1:0}withIndex(e){if(e===oE||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new TE(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===oE||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(yE),n=t.getIterator(yE);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===oE?null:this.indexMap_.get(e.toString())}}TE.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const CE=new class extends TE{constructor(){super(new lE(uE),TE.EMPTY_NODE,EE.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return TE.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(tE,{MIN:{value:new tE(QS,TE.EMPTY_NODE)},MAX:{value:new tE(YS,CE)}}),iE.__EMPTY_NODE=TE.EMPTY_NODE,vE.__childrenNodeConstructor=TE,dE=CE,function(e){gE=e}(CE);const xE=!0;function NE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return TE.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ee(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new vE(e,NE(t))}if(e instanceof Array||!xE){let n=TE.EMPTY_NODE;return nk(e,((t,r)=>{if(et(e,t)&&"."!==t.substring(0,1)){const e=NE(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(NE(t))}{const n=[];let r=!1;if(nk(e,((e,t)=>{if("."!==e.substring(0,1)){const i=NE(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new tE(e,i)))}})),0===n.length)return TE.EMPTY_NODE;const i=wE(n,cE,(e=>e.name),uE);if(r){const e=wE(n,yE.getCompare());return new TE(i,NE(t),new EE({".priority":e},{".priority":yE}))}return new TE(i,NE(t),EE.Default)}}!function(e){mE=e}(NE);class PE extends nE{constructor(e){super(),this.indexPath_=e,Ee(!Zk(e)&&".priority"!==Fk(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?$S(e.name,t.name):i}makePost(e,t){const n=NE(e),r=TE.EMPTY_NODE.updateChild(this.indexPath_,n);return new tE(t,r)}maxPost(){const e=TE.EMPTY_NODE.updateChild(this.indexPath_,CE);return new tE(YS,e)}toString(){return Vk(this.indexPath_,0).join("/")}}const RE=new class extends nE{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?$S(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tE.MIN}maxPost(){return tE.MAX}makePost(e,t){const n=NE(e);return new tE(t,n)}toString(){return".value"}};function AE(e){return{type:"value",snapshotNode:e}}function OE(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function DE(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function LE(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class ME{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){Ee(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(DE(t,s)):Ee(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(OE(t,n)):o.trackChildChange(LE(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(yE,((e,r)=>{t.hasChild(e)||n.trackChildChange(DE(e,r))})),t.isLeafNode()||t.forEachChild(yE,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(LE(t,r,i))}else n.trackChildChange(OE(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?TE.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class FE{constructor(e){this.indexedFilter_=new ME(e.getIndex()),this.index_=e.getIndex(),this.startPost_=FE.getStartPost_(e),this.endPost_=FE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new tE(t,n))||(n=TE.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=TE.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(TE.EMPTY_NODE);const i=this;return t.forEachChild(yE,((e,t)=>{i.matches(new tE(e,t))||(r=r.updateImmediateChild(e,TE.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class UE{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new FE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new tE(t,n))||(n=TE.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=TE.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=TE.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(TE.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,TE.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const s=e;Ee(s.numChildren()===this.limit_,"");const a=new tE(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(s.hasChild(t)){const e=s.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||s.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:o(u,a);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(LE(t,n,e)),s.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(DE(t,e));const n=s.updateImmediateChild(t,TE.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(OE(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&o(l,a)>=0?(null!=i&&(i.trackChildChange(DE(l.name,l.node)),i.trackChildChange(OE(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,TE.EMPTY_NODE)):e}}class jE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yE}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:QS}hasEnd(){return this.endSet_}getIndexEndValue(){return Ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:YS}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yE}copy(){const e=new jE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function zE(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function VE(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function BE(e,t){const n=e.copy();return n.index_=t,n}function qE(e){const t={};if(e.isDefault())return t;let n;if(e.index_===yE?n="$priority":e.index_===RE?n="$value":e.index_===oE?n="$key":(Ee(e.index_ instanceof PE,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Je(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Je(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Je(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Je(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Je(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function ZE(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==yE&&(t.i=e.index_.toString()),t}class WE extends Pk{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=ZS("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=WE.getListenId_(e,n),s={};this.listens_[o]=s;const a=qE(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),tt(this.listens_,o)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=WE.getListenId_(e,t);delete this.listens_[n]}get(e){const t=qE(e._queryParams),n=e._path.toString(),r=new Me;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+st(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=$e(a.responseText)}catch(e){KS("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&KS("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class HE{constructor(){this.rootNode_=TE.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function KE(){return{value:null,children:new Map}}function GE(e,t,n){if(Zk(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Fk(t);e.children.has(r)||e.children.set(r,KE());GE(e.children.get(r),t=jk(t),n)}}function QE(e,t){if(Zk(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(yE,((t,n)=>{GE(e,new Lk(t),n)})),QE(e,t)}}if(e.children.size>0){const n=Fk(t);if(t=jk(t),e.children.has(n)){QE(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function YE(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{YE(r,new Lk(t.toString()+"/"+e),n)}))}class $E{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&nk(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class JE{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new $E(e);const n=1e4+2e4*Math.random();ak(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;nk(e,((e,r)=>{r>0&&et(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),ak(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var XE;function eI(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(XE||(XE={}));class tI{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=XE.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Zk(this.path)){if(null!=this.affectedTree.value)return Ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Lk(e));return new tI(Mk(),t,this.revert)}}return Ee(Fk(this.path)===e,"operationForChild called for unrelated child."),new tI(jk(this.path),this.affectedTree,this.revert)}}class nI{constructor(e,t){this.source=e,this.path=t,this.type=XE.LISTEN_COMPLETE}operationForChild(e){return Zk(this.path)?new nI(this.source,Mk()):new nI(this.source,jk(this.path))}}class rI{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=XE.OVERWRITE}operationForChild(e){return Zk(this.path)?new rI(this.source,Mk(),this.snap.getImmediateChild(e)):new rI(this.source,jk(this.path),this.snap)}}class iI{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=XE.MERGE}operationForChild(e){if(Zk(this.path)){const t=this.children.subtree(new Lk(e));return t.isEmpty()?null:t.value?new rI(this.source,Mk(),t.value):new iI(this.source,Mk(),t)}return Ee(Fk(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new iI(this.source,jk(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class oI{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Zk(e))return this.isFullyInitialized()&&!this.filtered_;const t=Fk(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class sI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function aI(e,t,n,r,i,o){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Ie("Should only compare child_ events.");const r=new tE(t.childName,t.snapshotNode),i=new tE(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function lI(e,t){return{eventCache:e,serverCache:t}}function cI(e,t,n,r){return lI(new oI(t,n,r),e.serverCache)}function uI(e,t,n,r){return lI(e.eventCache,new oI(t,n,r))}function dI(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function hI(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let fI;class pI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(fI||(fI=new lE(JS)),fI);this.value=e,this.children=t}static fromObject(e){let t=new pI(null);return nk(e,((e,n)=>{t=t.set(new Lk(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mk(),value:this.value};if(Zk(e))return null;{const n=Fk(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(jk(e),t);if(null!=i){return{path:qk(new Lk(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Zk(e))return this;{const t=Fk(e),n=this.children.get(t);return null!==n?n.subtree(jk(e)):new pI(null)}}set(e,t){if(Zk(e))return new pI(t,this.children);{const n=Fk(e),r=(this.children.get(n)||new pI(null)).set(jk(e),t),i=this.children.insert(n,r);return new pI(this.value,i)}}remove(e){if(Zk(e))return this.children.isEmpty()?new pI(null):new pI(null,this.children);{const t=Fk(e),n=this.children.get(t);if(n){const r=n.remove(jk(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new pI(null):new pI(this.value,i)}return this}}get(e){if(Zk(e))return this.value;{const t=Fk(e),n=this.children.get(t);return n?n.get(jk(e)):null}}setTree(e,t){if(Zk(e))return t;{const n=Fk(e),r=(this.children.get(n)||new pI(null)).setTree(jk(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new pI(this.value,i)}}fold(e){return this.fold_(Mk(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(qk(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Mk(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Zk(e))return null;{const r=Fk(e),i=this.children.get(r);return i?i.findOnPath_(jk(e),qk(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mk(),t)}foreachOnPath_(e,t,n){if(Zk(e))return this;{this.value&&n(t,this.value);const r=Fk(e),i=this.children.get(r);return i?i.foreachOnPath_(jk(e),qk(t,r),n):new pI(null)}}foreach(e){this.foreach_(Mk(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(qk(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class mI{constructor(e){this.writeTree_=e}static empty(){return new mI(new pI(null))}}function gI(e,t,n){if(Zk(t))return new mI(new pI(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=Wk(i,t);return o=o.updateChild(s,n),new mI(e.writeTree_.set(i,o))}{const r=new pI(n),i=e.writeTree_.setTree(t,r);return new mI(i)}}}function vI(e,t,n){let r=e;return nk(n,((e,n)=>{r=gI(r,qk(t,e),n)})),r}function yI(e,t){if(Zk(t))return mI.empty();{const n=e.writeTree_.setTree(t,new pI(null));return new mI(n)}}function _I(e,t){return null!=bI(e,t)}function bI(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Wk(n.path,t)):null}function wI(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(yE,((e,n)=>{t.push(new tE(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new tE(e,n.value))})),t}function SI(e,t){if(Zk(t))return e;{const n=bI(e,t);return new mI(null!=n?new pI(n):e.writeTree_.subtree(t))}}function kI(e){return e.writeTree_.isEmpty()}function EI(e,t){return II(Mk(),e.writeTree_,t)}function II(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Ee(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=II(qk(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(qk(e,".priority"),r)),n}}function TI(e,t){return jI(t,e)}function CI(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Ee(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&xI(t,r.path)?i=!1:Gk(r.path,t.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=PI(e.allWrites,NI,Mk()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=yI(e.visibleWrites,r.path);else{nk(r.children,(t=>{e.visibleWrites=yI(e.visibleWrites,qk(r.path,t))}))}return!0}return!1}function xI(e,t){if(e.snap)return Gk(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Gk(qk(e.path,n),t))return!0;return!1}function NI(e){return e.visible}function PI(e,t,n){let r=mI.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)Gk(n,e)?(t=Wk(n,e),r=gI(r,t,o.snap)):Gk(e,n)&&(t=Wk(e,n),r=gI(r,Mk(),o.snap.getChild(t)));else{if(!o.children)throw Ie("WriteRecord should have .snap or .children");if(Gk(n,e))t=Wk(n,e),r=vI(r,t,o.children);else if(Gk(e,n))if(t=Wk(e,n),Zk(t))r=vI(r,Mk(),o.children);else{const e=tt(o.children,Fk(t));if(e){const n=e.getChild(jk(t));r=gI(r,Mk(),n)}}}}}return r}function RI(e,t,n,r,i){if(r||i){const o=SI(e.visibleWrites,t);if(!i&&kI(o))return n;if(i||null!=n||_I(o,Mk())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Gk(e.path,t)||Gk(t,e.path))};return EI(PI(e.allWrites,o,t),n||TE.EMPTY_NODE)}return null}{const r=bI(e.visibleWrites,t);if(null!=r)return r;{const r=SI(e.visibleWrites,t);if(kI(r))return n;if(null!=n||_I(r,Mk())){return EI(r,n||TE.EMPTY_NODE)}return null}}}function AI(e,t,n,r){return RI(e.writeTree,e.treePath,t,n,r)}function OI(e,t){return function(e,t,n){let r=TE.EMPTY_NODE;const i=bI(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(yE,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=SI(e.visibleWrites,t);return n.forEachChild(yE,((e,t)=>{const n=EI(SI(i,new Lk(e)),t);r=r.updateImmediateChild(e,n)})),wI(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return wI(SI(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function DI(e,t,n,r){return function(e,t,n,r,i){Ee(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=qk(t,n);if(_I(e.visibleWrites,o))return null;{const t=SI(e.visibleWrites,o);return kI(t)?i.getChild(n):EI(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function LI(e,t){return function(e,t){return bI(e.visibleWrites,t)}(e.writeTree,qk(e.treePath,t))}function MI(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){let a;const l=SI(e.visibleWrites,t),c=bI(l,Mk());if(null!=c)a=c;else{if(null==n)return[];a=EI(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function FI(e,t,n){return function(e,t,n,r){const i=qk(t,n),o=bI(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return EI(SI(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function UI(e,t){return jI(qk(e.treePath,t),e.writeTree)}function jI(e,t){return{treePath:e,writeTree:t}}class zI{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Ee("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ee(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,LE(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,DE(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,OE(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ie("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,LE(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const VI=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class BI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new oI(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return FI(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hI(this.viewCache_),i=MI(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function qI(e,t,n,r,i){const o=new zI;let s,a;if(n.type===XE.OVERWRITE){const l=n;l.source.fromUser?s=HI(e,t,l.path,l.snap,r,i,o):(Ee(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Zk(l.path),s=WI(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===XE.MERGE){const l=n;l.source.fromUser?s=function(e,t,n,r,i,o,s){let a=t;return r.foreach(((r,l)=>{const c=qk(n,r);KI(t,Fk(c))&&(a=HI(e,a,c,l,i,o,s))})),r.foreach(((r,l)=>{const c=qk(n,r);KI(t,Fk(c))||(a=HI(e,a,c,l,i,o,s))})),a}(e,t,l.path,l.children,r,i,o):(Ee(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=QI(e,t,l.path,l.children,r,i,a,o))}else if(n.type===XE.ACK_USER_WRITE){const a=n;s=a.revert?function(e,t,n,r,i,o){let s;if(null!=LI(r,n))return t;{const a=new BI(r,t,i),l=t.eventCache.getNode();let c;if(Zk(n)||".priority"===Fk(n)){let n;if(t.serverCache.isFullyInitialized())n=AI(r,hI(t));else{const e=t.serverCache.getNode();Ee(e instanceof TE,"serverChildren would be complete if leaf node"),n=OI(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=Fk(n);let u=FI(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,jk(n),a,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,TE.EMPTY_NODE,jk(n),a,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=AI(r,hI(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=LI(r,Mk()),cI(t,c,s,e.filter.filtersNodes())}}(e,t,a.path,r,i,o):function(e,t,n,r,i,o,s){if(null!=LI(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Zk(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return WI(e,t,n,l.getNode().getChild(n),i,o,a,s);if(Zk(n)){let r=new pI(null);return l.getNode().forEachChild(oE,((e,t)=>{r=r.set(new Lk(e),t)})),QI(e,t,n,r,i,o,a,s)}return t}{let c=new pI(null);return r.foreach(((e,t)=>{const r=qk(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),QI(e,t,n,c,i,o,a,s)}}(e,t,a.path,a.affectedTree,r,i,o)}else{if(n.type!==XE.LISTEN_COMPLETE)throw Ie("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const o=t.serverCache,s=uI(t,o.getNode(),o.isFullyInitialized()||Zk(n),o.isFiltered());return ZI(e,s,n,r,VI,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=dI(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(AE(dI(t)))}}(t,s,l),{viewCache:s,changes:l}}function ZI(e,t,n,r,i,o){const s=t.eventCache;if(null!=LI(r,n))return t;{let a,l;if(Zk(n))if(Ee(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=hI(t),i=OI(r,n instanceof TE?n:TE.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=AI(r,hI(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=Fk(n);if(".priority"===c){Ee(1===Uk(n),"Can't have a priority with additional path components");const i=s.getNode();l=t.serverCache.getNode();const o=DI(r,n,i,l);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{const u=jk(n);let d;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const e=DI(r,n,s.getNode(),l);d=null!=e?s.getNode().getImmediateChild(c).updateChild(u,e):s.getNode().getImmediateChild(c)}else d=FI(r,c,t.serverCache);a=null!=d?e.filter.updateChild(s.getNode(),c,d,u,i,o):s.getNode()}}return cI(t,a,s.isFullyInitialized()||Zk(n),e.filter.filtersNodes())}}function WI(e,t,n,r,i,o,s,a){const l=t.serverCache;let c;const u=s?e.filter:e.filter.getIndexedFilter();if(Zk(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Fk(n);if(!l.isCompleteForPath(n)&&Uk(n)>1)return t;const i=jk(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,VI,null)}const d=uI(t,c,l.isFullyInitialized()||Zk(n),u.filtersNodes());return ZI(e,d,n,i,new BI(i,d,o),a)}function HI(e,t,n,r,i,o,s){const a=t.eventCache;let l,c;const u=new BI(i,t,o);if(Zk(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=cI(t,c,!0,e.filter.filtersNodes());else{const i=Fk(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=cI(t,c,a.isFullyInitialized(),a.isFiltered());else{const o=jk(n),c=a.getNode().getImmediateChild(i);let d;if(Zk(o))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===zk(o)&&e.getChild(Bk(o)).isEmpty()?e:e.updateChild(o,r):TE.EMPTY_NODE}if(c.equals(d))l=t;else{l=cI(t,e.filter.updateChild(a.getNode(),i,d,o,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function KI(e,t){return e.eventCache.isCompleteForChild(t)}function GI(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function QI(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Zk(n)?r:new pI(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=GI(0,t.serverCache.getNode().getImmediateChild(n),r);c=WI(e,c,new Lk(n),l,i,o,s,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=GI(0,t.serverCache.getNode().getImmediateChild(n),r);c=WI(e,c,new Lk(n),l,i,o,s,a)}})),c}class YI{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new ME(n.getIndex()),i=(o=n).loadsAllData()?new ME(o.getIndex()):o.hasLimit()?new UE(o):new FE(o);var o;this.processor_=function(e){return{filter:e}}(i);const s=t.serverCache,a=t.eventCache,l=r.updateFullNode(TE.EMPTY_NODE,s.getNode(),null),c=i.updateFullNode(TE.EMPTY_NODE,a.getNode(),null),u=new oI(l,s.isFullyInitialized(),r.filtersNodes()),d=new oI(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=lI(d,u),this.eventGenerator_=new sI(this.query_)}get query(){return this.query_}}function $I(e,t){const n=hI(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Zk(t)&&!n.getImmediateChild(Fk(t)).isEmpty())?n.getChild(t):null}function JI(e){return 0===e.eventRegistrations_.length}function XI(e,t,n){const r=[];if(n){Ee(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function eT(e,t,n,r){t.type===XE.MERGE&&null!==t.source.queryId&&(Ee(hI(e.viewCache_),"We should always have a full cache before handling merges"),Ee(dI(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=qI(e.processor_,i,t,n,r);var s,a;return s=e.processor_,a=o.viewCache,Ee(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Ee(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),Ee(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,tT(e,o.changes,o.viewCache.eventCache.getNode(),null)}function tT(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),aI(e,i,"child_removed",t,r,n),aI(e,i,"child_added",t,r,n),aI(e,i,"child_moved",o,r,n),aI(e,i,"child_changed",t,r,n),aI(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let nT,rT;class iT{constructor(){this.views=new Map}}function oT(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return Ee(null!=o,"SyncTree gave us an op for an invalid query."),eT(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(eT(o,t,n,r));return i}}function sT(e,t,n,r,i){const o=t._queryIdentifier,s=e.views.get(o);if(!s){let e=AI(n,i?r:null),o=!1;e?o=!0:r instanceof TE?(e=OI(n,r),o=!1):(e=TE.EMPTY_NODE,o=!1);const s=lI(new oI(e,o,!1),new oI(r,i,!1));return new YI(t,s)}return s}function aT(e,t,n,r,i,o){const s=sT(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(yE,((e,t)=>{r.push(OE(e,t))}));return n.isFullyInitialized()&&r.push(AE(n.getNode())),tT(e,r,n.getNode(),t)}(s,n)}function lT(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=fT(e);if("default"===i)for(const[l,c]of e.views.entries())s=s.concat(XI(c,n,r)),JI(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const t=e.views.get(i);t&&(s=s.concat(XI(t,n,r)),JI(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return a&&!fT(e)&&o.push(new(Ee(nT,"Reference.ts has not been loaded"),nT)(t._repo,t._path)),{removed:o,events:s}}function cT(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function uT(e,t){let n=null;for(const r of e.views.values())n=n||$I(r,t);return n}function dT(e,t){if(t._queryParams.loadsAllData())return pT(e);{const n=t._queryIdentifier;return e.views.get(n)}}function hT(e,t){return null!=dT(e,t)}function fT(e){return null!=pT(e)}function pT(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let mT=1;class gT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pI(null),this.pendingWriteTree_={visibleWrites:mI.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vT(e,t,n,r,i){return function(e,t,n,r,i){Ee(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=gI(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?TT(e,new rI({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function yT(e,t,n,r){!function(e,t,n,r){Ee(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=vI(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=pI.fromObject(n);return TT(e,new iI({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function _T(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(CI(e.pendingWriteTree_,t)){let t=new pI(null);return null!=r.snap?t=t.set(Mk(),!0):nk(r.children,(e=>{t=t.set(new Lk(e),!0)})),TT(e,new tI(r.path,t,n))}return[]}function bT(e,t,n){return TT(e,new rI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function wT(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,s=e.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||hT(s,t))){const l=lT(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>fT(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&fT(t)){return[pT(t)]}{let e=[];return t&&(e=cT(t)),nk(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=NT(e,r);e.listenProvider_.startListening(LT(i),PT(e,i),o.hashFn,o.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(LT(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(RT(t));e.listenProvider_.stopListening(LT(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=RT(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function ST(e,t,n,r){const i=AT(e,r);if(null!=i){const r=OT(i),o=r.path,s=r.queryId,a=Wk(o,t);return DT(e,o,new rI(eI(s),a,n))}return[]}function kT(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=Wk(e,i);o=o||uT(t,n),s=s||fT(t)}));let a,l=e.syncPointTree_.get(i);if(l?(s=s||fT(l),o=o||uT(l,Mk())):(l=new iT,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=o)a=!0;else{a=!1,o=TE.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=uT(t,Mk());n&&(o=o.updateImmediateChild(e,n))}))}const c=hT(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=RT(t);Ee(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=mT++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=aT(l,t,n,TI(e.pendingWriteTree_,i),o,a);if(!c&&!s&&!r){const n=dT(l,t);u=u.concat(function(e,t,n){const r=t._path,i=PT(e,t),o=NT(e,n),s=e.listenProvider_.startListening(LT(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)Ee(!fT(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!Zk(e)&&t&&fT(t))return[pT(t).query];{let e=[];return t&&(e=e.concat(cT(t).map((e=>e.query)))),nk(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(LT(r),PT(e,r))}}return s}(e,t,n))}return u}function ET(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=uT(n,Wk(e,t));if(r)return r}));return RI(r,t,i,n,!0)}function IT(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=Wk(e,n);r=r||uT(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||uT(i,Mk()):(i=new iT,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=null!=r,s=o?new oI(r,!0,!1):null;return function(e){return dI(e.viewCache_)}(sT(i,t,TI(e.pendingWriteTree_,t._path),o?s.getNode():TE.EMPTY_NODE,o))}function TT(e,t){return CT(t,e.syncPointTree_,null,TI(e.pendingWriteTree_,Mk()))}function CT(e,t,n,r){if(Zk(e.path))return xT(e,t,n,r);{const i=t.get(Mk());null==n&&null!=i&&(n=uT(i,Mk()));let o=[];const s=Fk(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){const e=n?n.getImmediateChild(s):null,t=UI(r,s);o=o.concat(CT(a,l,e,t))}return i&&(o=o.concat(oT(i,e,r,n))),o}}function xT(e,t,n,r){const i=t.get(Mk());null==n&&null!=i&&(n=uT(i,Mk()));let o=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,a=UI(r,t),l=e.operationForChild(t);l&&(o=o.concat(xT(l,i,s,a)))})),i&&(o=o.concat(oT(i,e,r,n))),o}function NT(e,t){const n=t.query,r=PT(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||TE.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=AT(e,n);if(r){const n=OT(r),i=n.path,o=n.queryId,s=Wk(i,t);return DT(e,i,new nI(eI(o),s))}return[]}(e,n._path,r):function(e,t){return TT(e,new nI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return wT(e,n,null,r)}}}}function PT(e,t){const n=RT(t);return e.queryToTagMap.get(n)}function RT(e){return e._path.toString()+"$"+e._queryIdentifier}function AT(e,t){return e.tagToQueryMap.get(t)}function OT(e){const t=e.indexOf("$");return Ee(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Lk(e.substr(0,t))}}function DT(e,t,n){const r=e.syncPointTree_.get(t);Ee(r,"Missing sync point for query tag that we're tracking");return oT(r,n,TI(e.pendingWriteTree_,t),null)}function LT(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ee(rT,"Reference.ts has not been loaded"),rT)(e._repo,e._path):e}class MT{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new MT(t)}node(){return this.node_}}class FT{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=qk(this.path_,e);return new FT(this.syncTree_,t)}node(){return ET(this.syncTree_,this.path_)}}const UT=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},jT=function(e,t,n){return e&&"object"===typeof e?(Ee(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?zT(e[".sv"],t,n):"object"===typeof e[".sv"]?VT(e[".sv"],t):void Ee(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},zT=function(e,t,n){if("timestamp"===e)return n.timestamp;Ee(!1,"Unexpected server value: "+e)},VT=function(e,t,n){e.hasOwnProperty("increment")||Ee(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Ee(!1,"Unexpected increment value: "+r);const i=t.node();if(Ee(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},BT=function(e,t,n,r){return ZT(t,new FT(n,e),r)},qT=function(e,t,n){return ZT(e,new MT(t),n)};function ZT(e,t,n){const r=e.getPriority().val(),i=jT(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=jT(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new vE(o,NE(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new vE(i))),r.forEachChild(yE,((e,r)=>{const i=ZT(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class WT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function HT(e,t){let n=t instanceof Lk?t:new Lk(t),r=e,i=Fk(n);for(;null!==i;){const e=tt(r.node.children,i)||{children:{},childCount:0};r=new WT(i,r,e),n=jk(n),i=Fk(n)}return r}function KT(e){return e.node.value}function GT(e,t){e.node.value=t,XT(e)}function QT(e){return e.node.childCount>0}function YT(e,t){nk(e.node.children,((n,r)=>{t(new WT(n,e,r))}))}function $T(e,t,n,r){n&&!r&&t(e),YT(e,(e=>{$T(e,t,!0,r)})),n&&r&&t(e)}function JT(e){return new Lk(null===e.parent?e.name:JT(e.parent)+"/"+e.name)}function XT(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===KT(e)&&!QT(e)}(n),i=et(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,XT(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,XT(e))}(e.parent,e.name,e)}const eC=/[\[\].#$\/\u0000-\u001F\u007F]/,tC=/[\[\].#$\u0000-\u001F\u007F]/,nC=10485760,rC=function(e){return"string"===typeof e&&0!==e.length&&!eC.test(e)},iC=function(e){return"string"===typeof e&&0!==e.length&&!tC.test(e)},oC=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!GS(e)||e&&"object"===typeof e&&et(e,".sv")},sC=function(e,t,n,r){r&&void 0===t||aC(pt(e,"value"),t,n)},aC=function(e,t,n){const r=n instanceof Lk?new Qk(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+$k(r));if("function"===typeof t)throw new Error(e+"contains a function "+$k(r)+" with contents = "+t.toString());if(GS(t))throw new Error(e+"contains "+t.toString()+" "+$k(r));if("string"===typeof t&&t.length>nC/3&&vt(t)>nC)throw new Error(e+"contains a string greater than "+nC+" utf8 bytes "+$k(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(nk(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!rC(t)))throw new Error(e+" contains an invalid key ("+t+") "+$k(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=vt(t),Yk(e)}(r,t),aC(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=vt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+$k(r)+" in addition to actual children.")}},lC=function(e,t,n,r){if(r&&void 0===t)return;const i=pt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];nk(t,((e,t)=>{const r=new Lk(e);if(aC(i,t,qk(n,r)),".priority"===zk(r)&&!oC(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=Vk(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!rC(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Hk);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Gk(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},cC=function(e,t,n){if(!n||void 0!==t){if(GS(t))throw new Error(pt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!oC(t))throw new Error(pt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},uC=function(e,t,n,r){if((!r||void 0!==n)&&!rC(n))throw new Error(pt(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dC=function(e,t,n,r){if((!r||void 0!==n)&&!iC(n))throw new Error(pt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},hC=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dC(e,t,n,r)},fC=function(e,t){if(".info"===Fk(t))throw new Error(e+" failed = Can't modify data under /.info/")},pC=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!rC(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),iC(e)}(n))throw new Error(pt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class mC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gC(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||Kk(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function vC(e,t,n){gC(e,n),_C(e,(e=>Kk(e,t)))}function yC(e,t,n){gC(e,n),_C(e,(e=>Gk(e,t)||Gk(t,e)))}function _C(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(bC(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function bC(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();zS&&qS("event: "+n.toString()),sk(r)}}}const wC="repo_interrupt",SC=25;class kC{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=KE(),this.transactionQueueTree_=new WT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function EC(e,t,n){if(e.stats_=wk(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new WE(e.repoInfo_,((t,n,r,i)=>{CC(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>xC(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Je(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new eE(e.repoInfo_,t,((t,n,r,i)=>{CC(e,t,n,r,i)}),(t=>{xC(e,t)}),(t=>{!function(e,t){nk(t,((t,n)=>{NC(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return bk[n]||(bk[n]=t()),bk[n]}(e.repoInfo_,(()=>new JE(e.stats_,e.server_))),e.infoData_=new HE,e.infoSyncTree_=new gT({startListening:(t,n,r,i)=>{let o=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=bT(e.infoSyncTree_,t._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),NC(e,"connected",!1),e.serverSyncTree_=new gT({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);yC(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function IC(e){const t=e.infoData_.getNode(new Lk(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function TC(e){return UT({timestamp:IC(e)})}function CC(e,t,n,r,i){e.dataUpdateCount++;const o=new Lk(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=rt(n,(e=>NE(e)));s=function(e,t,n,r){const i=AT(e,r);if(i){const r=OT(i),o=r.path,s=r.queryId,a=Wk(o,t),l=pI.fromObject(n);return DT(e,o,new iI(eI(s),a,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=NE(n);s=ST(e.serverSyncTree_,o,t,i)}else if(r){const t=rt(n,(e=>NE(e)));s=function(e,t,n){const r=pI.fromObject(n);return TT(e,new iI({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=NE(n);s=bT(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=zC(e,o)),yC(e.eventQueue_,a,s)}function xC(e,t){NC(e,"connected",t),!1===t&&function(e){MC(e,"onDisconnectEvents");const t=TC(e),n=KE();YE(e.onDisconnect_,Mk(),((r,i)=>{const o=BT(r,i,e.serverSyncTree_,t);GE(n,r,o)}));let r=[];YE(n,Mk(),((t,n)=>{r=r.concat(bT(e.serverSyncTree_,t,n));const i=WC(e,t);zC(e,i)})),e.onDisconnect_=KE(),yC(e.eventQueue_,Mk(),r)}(e)}function NC(e,t,n){const r=new Lk("/.info/"+t),i=NE(n);e.infoData_.updateSnapshot(r,i);const o=bT(e.infoSyncTree_,r,i);yC(e.eventQueue_,r,o)}function PC(e){return e.nextWriteId_++}function RC(e,t,n,r,i){MC(e,"set",{path:t.toString(),value:n,priority:r});const o=TC(e),s=NE(n,r),a=ET(e.serverSyncTree_,t),l=qT(s,a,o),c=PC(e),u=vT(e.serverSyncTree_,t,l,c,!0);gC(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),((n,r)=>{const o="ok"===n;o||KS("set at "+t+" failed: "+n);const s=_T(e.serverSyncTree_,c,!o);yC(e.eventQueue_,t,s),FC(e,i,n,r)}));const d=WC(e,t);zC(e,d),yC(e.eventQueue_,d,[])}function AC(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&QE(e.onDisconnect_,t),FC(e,n,r,i)}))}function OC(e,t,n,r){const i=NE(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,o)=>{"ok"===n&&GE(e.onDisconnect_,t,i),FC(e,r,n,o)}))}function DC(e,t,n){let r;r=".info"===Fk(t._path)?wT(e.infoSyncTree_,t,n):wT(e.serverSyncTree_,t,n),vC(e.eventQueue_,t._path,r)}function LC(e){e.persistentConnection_&&e.persistentConnection_.interrupt(wC)}function MC(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];qS(t,...r)}function FC(e,t,n,r){t&&sk((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function UC(e,t,n){return ET(e.serverSyncTree_,t,n)||TE.EMPTY_NODE}function jC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ZC(e,t),KT(t)){const n=BC(e,t);Ee(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=UC(e,t,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Ee(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Wk(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{MC(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(_T(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();ZC(e,HT(e.transactionQueueTree_,t)),jC(e,e.transactionQueueTree_),yC(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)sk(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{KS("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}zC(e,t)}}),s)}(e,JT(t),n)}else QT(t)&&YT(t,(t=>{jC(e,t)}))}function zC(e,t){const n=VC(e,t),r=JT(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),s=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=Wk(n,o.path);let u,d=!1;if(Ee(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)d=!0,u=o.abortReason,i=i.concat(_T(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=SC)d=!0,u="maxretry",i=i.concat(_T(e.serverSyncTree_,o.currentWriteId,!0));else{const n=UC(e,o.path,s);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){aC("transaction failed: Data returned ",r,o.path);let t=NE(r);"object"===typeof r&&null!=r&&et(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=o.currentWriteId,l=TC(e),c=qT(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=PC(e),s.splice(s.indexOf(a),1),i=i.concat(vT(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(_T(e.serverSyncTree_,a,!0))}else d=!0,u="nodata",i=i.concat(_T(e.serverSyncTree_,o.currentWriteId,!0))}yC(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;ZC(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)sk(r[l]);jC(e,e.transactionQueueTree_)}(e,BC(e,n),r),r}function VC(e,t){let n,r=e.transactionQueueTree_;for(n=Fk(t);null!==n&&void 0===KT(r);)r=HT(r,n),n=Fk(t=jk(t));return r}function BC(e,t){const n=[];return qC(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function qC(e,t,n){const r=KT(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);YT(t,(t=>{qC(e,t,n)}))}function ZC(e,t){const n=KT(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,GT(t,n.length>0?n:void 0)}YT(t,(t=>{ZC(e,t)}))}function WC(e,t){const n=JT(VC(e,t)),r=HT(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{HC(e,t)})),HC(e,r),$T(r,(t=>{HC(e,t)})),n}function HC(e,t){const n=KT(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Ee(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(Ee(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(_T(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?GT(t,void 0):n.length=o+1,yC(e.eventQueue_,JT(t),i);for(let e=0;e<r.length;e++)sk(r[e])}}const KC=function(e,t){const n=GC(e),r=n.namespace;"firebase.com"===n.domain&&HS(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||HS("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&KS("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new gk(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Lk(n.pathString)}},GC=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):KS("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},QC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",YC=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=QC.charAt(n%64),n=Math.floor(n/64);Ee(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=QC.charAt(t[i]);return Ee(20===s.length,"nextPushId: Length should be 20."),s}}();class $C{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Je(this.snapshot.exportVal())}}class JC{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class XC{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ex{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Me;return AC(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){fC("OnDisconnect.remove",this._path);const e=new Me;return OC(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){fC("OnDisconnect.set",this._path),sC("OnDisconnect.set",e,this._path,!1);const t=new Me;return OC(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){fC("OnDisconnect.setWithPriority",this._path),sC("OnDisconnect.setWithPriority",e,this._path,!1),cC("OnDisconnect.setWithPriority",t,!1);const n=new Me;return function(e,t,n,r,i){const o=NE(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),((n,r)=>{"ok"===n&&GE(e.onDisconnect_,t,o),FC(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){fC("OnDisconnect.update",this._path),lC("OnDisconnect.update",e,this._path,!1);const t=new Me;return function(e,t,n,r){if(nt(n))return qS("onDisconnect().update() called with empty data.  Don't do anything."),void FC(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,o)=>{"ok"===i&&nk(n,((n,r)=>{const i=NE(r);GE(e.onDisconnect_,qk(t,n),i)})),FC(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class tx{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Zk(this._path)?null:zk(this._path)}get ref(){return new ox(this._repo,this._path)}get _queryIdentifier(){const e=ZE(this._queryParams),t=ek(e);return"{}"===t?"default":t}get _queryObject(){return ZE(this._queryParams)}isEqual(e){if(!((e=yt(e))instanceof tx))return!1;const t=this._repo===e._repo,n=Kk(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function nx(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function rx(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===oE){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==QS)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==YS)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===yE){if(null!=t&&!oC(t)||null!=n&&!oC(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ee(e.getIndex()instanceof PE||e.getIndex()===RE,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ix(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ox extends tx{constructor(e,t){super(e,t,new jE,!1)}get parent(){const e=Bk(this._path);return null===e?null:new ox(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class sx{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Lk(e),n=cx(this.ref,e);return new sx(this._node.getChild(t),n,yE)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new sx(n,cx(this.ref,t),yE))))}hasChild(e){const t=new Lk(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ax(e,t){return(e=yt(e))._checkNotDeleted("ref"),void 0!==t?cx(e._root,t):e._root}function lx(e,t){(e=yt(e))._checkNotDeleted("refFromURL");const n=KC(t,e._repo.repoInfo_.nodeAdmin);pC("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||HS("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),ax(e,n.path.toString())}function cx(e,t){return null===Fk((e=yt(e))._path)?hC("child","path",t,!1):dC("child","path",t,!1),new ox(e._repo,qk(e._path,t))}function ux(e,t){e=yt(e),fC("set",e._path),sC("set",t,e._path,!1);const n=new Me;return RC(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function dx(e,t){lC("update",t,e._path,!1);const n=new Me;return function(e,t,n,r){MC(e,"update",{path:t.toString(),value:n});let i=!0;const o=TC(e),s={};if(nk(n,((n,r)=>{i=!1,s[n]=BT(qk(t,n),NE(r),e.serverSyncTree_,o)})),i)qS("update() called with empty data.  Don't do anything."),FC(0,r,"ok",void 0);else{const i=PC(e),o=yT(e.serverSyncTree_,t,s,i);gC(e.eventQueue_,o),e.server_.merge(t.toString(),n,((n,o)=>{const s="ok"===n;s||KS("update at "+t+" failed: "+n);const a=_T(e.serverSyncTree_,i,!s),l=a.length>0?zC(e,t):t;yC(e.eventQueue_,l,a),FC(0,r,n,o)})),nk(n,(n=>{const r=WC(e,qk(t,n));zC(e,r)})),yC(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function hx(e){e=yt(e);const t=new XC((()=>{})),n=new fx(t);return function(e,t,n){const r=IT(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=NE(r).withIndex(t._queryParams.getIndex());let o;if(kT(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())o=bT(e.serverSyncTree_,t._path,i);else{const n=PT(e.serverSyncTree_,t);o=ST(e.serverSyncTree_,t._path,i,n)}return yC(e.eventQueue_,t._path,o),wT(e.serverSyncTree_,t,n,null,!0),i}),(n=>(MC(e,"get for query "+Je(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new sx(t,new ox(e._repo,e._path),e._queryParams.getIndex())))}class fx{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new $C("value",this,new sx(e.snapshotNode,new ox(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JC(this,e,t):null}matches(e){return e instanceof fx&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class px{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new JC(this,e,t):null}createEvent(e,t){Ee(null!=e.childName,"Child events should have a childName.");const n=cx(new ox(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new $C(e.type,this,new sx(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof px&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function mx(e,t,n,r,i){let o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{DC(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const s=new XC(n,o||void 0),a="value"===t?new fx(s):new px(t,s);return function(e,t,n){let r;r=".info"===Fk(t._path)?kT(e.infoSyncTree_,t,n):kT(e.serverSyncTree_,t,n),vC(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>DC(e._repo,e,a)}function gx(e,t,n,r){return mx(e,"value",t,n,r)}function vx(e,t,n,r){return mx(e,"child_added",t,n,r)}function yx(e,t,n,r){return mx(e,"child_changed",t,n,r)}function _x(e,t,n,r){return mx(e,"child_moved",t,n,r)}function bx(e,t,n,r){return mx(e,"child_removed",t,n,r)}function wx(e,t,n){let r=null;const i=n?new XC(n):null;"value"===t?r=new fx(i):t&&(r=new px(t,i)),DC(e._repo,e,r)}class Sx{}class kx extends Sx{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){sC("endAt",this._value,e._path,!0);const t=VE(e._queryParams,this._value,this._key);if(ix(t),rx(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new tx(e._repo,e._path,t,e._orderByCalled)}}class Ex extends Sx{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){sC("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===oE||n?VE(e,t,n):VE(e,t,QS),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(ix(t),rx(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new tx(e._repo,e._path,t,e._orderByCalled)}}class Ix extends Sx{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){sC("startAt",this._value,e._path,!0);const t=zE(e._queryParams,this._value,this._key);if(ix(t),rx(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new tx(e._repo,e._path,t,e._orderByCalled)}}class Tx extends Sx{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){sC("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===oE||n?zE(e,t,n):zE(e,t,YS),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ix(t),rx(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new tx(e._repo,e._path,t,e._orderByCalled)}}class Cx extends Sx{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new tx(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class xx extends Sx{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new tx(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class Nx extends Sx{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){nx(e,"orderByChild");const t=new Lk(this._path);if(Zk(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new PE(t),r=BE(e._queryParams,n);return rx(r),new tx(e._repo,e._path,r,!0)}}class Px extends Sx{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){nx(e,"orderByKey");const t=BE(e._queryParams,oE);return rx(t),new tx(e._repo,e._path,t,!0)}}class Rx extends Sx{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){nx(e,"orderByPriority");const t=BE(e._queryParams,yE);return rx(t),new tx(e._repo,e._path,t,!0)}}class Ax extends Sx{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){nx(e,"orderByValue");const t=BE(e._queryParams,RE);return rx(t),new tx(e._repo,e._path,t,!0)}}class Ox extends Sx{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(sC("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new kx(this._value,this._key)._apply(new Ix(this._value,this._key)._apply(e))}}function Dx(e){let t=yt(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)t=o._apply(t);return t}!function(e){Ee(!nT,"__referenceConstructor has already been defined"),nT=e}(ox),function(e){Ee(!rT,"__referenceConstructor has already been defined"),rT=e}(ox);const Lx="FIREBASE_DATABASE_EMULATOR_HOST",Mx={};let Fx=!1;function Ux(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||HS("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qS("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let s,a,l=KC(o,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Lx]),a?(s=!0,o="http://".concat(a,"?ns=").concat(c.namespace),l=KC(o,i),c=l.repoInfo):s=!l.repoInfo.secure;const u=i&&s?new uk(uk.OWNER):new ck(e.name,e.options,t);pC("Invalid Firebase Database URL",l),Zk(l.path)||HS("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=Mx[t.name];i||(i={},Mx[t.name]=i);let o=i[e.toURLString()];o&&HS("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new kC(e,Fx,n,r),i[e.toURLString()]=o,o}(c,e,u,new lk(e.name,n));return new jx(d,e)}class jx{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(EC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ox(this._repo,Mk())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Mx[t];n&&n[e.key]===e||HS("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),LC(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&HS("Cannot call "+e+" on a deleted database.")}}function zx(){xk.IS_TRANSPORT_INITIALIZED&&KS("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Vx(){zx(),Ek.forceDisallow()}function Bx(){zx(),Ck.forceDisallow(),Ek.forceAllow()}function qx(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=yt(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&HS("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&HS('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new uk(uk.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Fe(r.mockUserToken,e.app.options.projectId);o=new uk(t)}!function(e,t,n,r){e.repoInfo_=new gk("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}function Zx(e){var t;(e=yt(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(wC)}function Wx(e,t){BS(e,t)}const Hx={".sv":"timestamp"};class Kx{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Gx(e,t,n){var r;if(e=yt(e),fC("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,o=new Me,s=gx(e,(()=>{}));return function(e,t,n,r,i,o){MC(e,"transaction on "+t);const s={path:t,update:n,onComplete:r,status:null,order:FS(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=UC(e,t,void 0);s.currentInputSnapshot=a;const l=s.update(a.val());if(void 0===l)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{aC("transaction failed: Data returned ",l,s.path),s.status=0;const n=HT(e.transactionQueueTree_,t),r=KT(n)||[];let i;r.push(s),GT(n,r),"object"===typeof l&&null!==l&&et(l,".priority")?(i=tt(l,".priority"),Ee(oC(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(ET(e.serverSyncTree_,t)||TE.EMPTY_NODE).getPriority().val();const o=TC(e),c=NE(l,i),u=qT(c,a,o);s.currentOutputSnapshotRaw=c,s.currentOutputSnapshotResolved=u,s.currentWriteId=PC(e);const d=vT(e.serverSyncTree_,t,u,s.currentWriteId,s.applyLocally);yC(e.eventQueue_,t,d),jC(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?o.reject(t):(i=new sx(r,new ox(e._repo,e._path),yE),o.resolve(new Kx(n,i)))}),s,i),o.promise}eE.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},eE.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){PS(mn),sn(new _t("database",((e,t)=>{let{instanceIdentifier:n}=t;return Ux(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),wn(CS,xS,e),wn(CS,xS,"esm2017")}();const Qx=new Pt("@firebase/database-compat"),Yx=function(e){const t="FIREBASE WARNING: "+e;Qx.warn(t)};class $x{constructor(e){this._delegate=e}cancel(e){ft("OnDisconnect.cancel",0,1,arguments.length),mt("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){ft("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){ft("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){ft("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(ft("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,Yx("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mt("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class Jx{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return ft("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Xx{constructor(e,t){this._database=e,this._delegate=t}val(){return ft("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return ft("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return ft("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return ft("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return ft("DataSnapshot.child",0,1,arguments.length),e=String(e),dC("DataSnapshot.child","path",e,!1),new Xx(this._database,this._delegate.child(e))}hasChild(e){return ft("DataSnapshot.hasChild",1,1,arguments.length),dC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return ft("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return ft("DataSnapshot.forEach",1,1,arguments.length),mt("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new Xx(this._database,t))))}hasChildren(){return ft("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return ft("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return ft("DataSnapshot.ref",0,0,arguments.length),new tN(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class eN{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;ft("Query.on",2,4,arguments.length),mt("Query.on","callback",t,!1);const o=eN.getCancelAndContextArgs_("Query.on",n,r),s=(e,n)=>{t.call(o.context,new Xx(this.database,e),n)};s.userCallback=t,s.context=o.context;const a=null===(i=o.cancel)||void 0===i?void 0:i.bind(o.context);switch(e){case"value":return gx(this._delegate,s,a),t;case"child_added":return vx(this._delegate,s,a),t;case"child_removed":return bx(this._delegate,s,a),t;case"child_changed":return yx(this._delegate,s,a),t;case"child_moved":return _x(this._delegate,s,a),t;default:throw new Error(pt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(ft("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(pt(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),mt("Query.off","callback",t,!0),gt("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,wx(this._delegate,e,r)}else wx(this._delegate,e)}get(){return hx(this._delegate).then((e=>new Xx(this.database,e)))}once(e,t,n,r){ft("Query.once",1,4,arguments.length),mt("Query.once","callback",t,!0);const i=eN.getCancelAndContextArgs_("Query.once",n,r),o=new Me,s=(e,n)=>{const r=new Xx(this.database,e);t&&t.call(i.context,r,n),o.resolve(r)};s.userCallback=t,s.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),o.reject(e)};switch(e){case"value":gx(this._delegate,s,a,{onlyOnce:!0});break;case"child_added":vx(this._delegate,s,a,{onlyOnce:!0});break;case"child_removed":bx(this._delegate,s,a,{onlyOnce:!0});break;case"child_changed":yx(this._delegate,s,a,{onlyOnce:!0});break;case"child_moved":_x(this._delegate,s,a,{onlyOnce:!0});break;default:throw new Error(pt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return ft("Query.limitToFirst",1,1,arguments.length),new eN(this.database,Dx(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Cx(e)}(e)))}limitToLast(e){return ft("Query.limitToLast",1,1,arguments.length),new eN(this.database,Dx(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new xx(e)}(e)))}orderByChild(e){return ft("Query.orderByChild",1,1,arguments.length),new eN(this.database,Dx(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return dC("orderByChild","path",e,!1),new Nx(e)}(e)))}orderByKey(){return ft("Query.orderByKey",0,0,arguments.length),new eN(this.database,Dx(this._delegate,new Px))}orderByPriority(){return ft("Query.orderByPriority",0,0,arguments.length),new eN(this.database,Dx(this._delegate,new Rx))}orderByValue(){return ft("Query.orderByValue",0,0,arguments.length),new eN(this.database,Dx(this._delegate,new Ax))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ft("Query.startAt",0,2,arguments.length),new eN(this.database,Dx(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return uC("startAt","key",t,!0),new Ix(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ft("Query.startAfter",0,2,arguments.length),new eN(this.database,Dx(this._delegate,function(e,t){return uC("startAfter","key",t,!0),new Tx(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ft("Query.endAt",0,2,arguments.length),new eN(this.database,Dx(this._delegate,function(e,t){return uC("endAt","key",t,!0),new kx(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ft("Query.endBefore",0,2,arguments.length),new eN(this.database,Dx(this._delegate,function(e,t){return uC("endBefore","key",t,!0),new Ex(e,t)}(e,t)))}equalTo(e,t){return ft("Query.equalTo",1,2,arguments.length),new eN(this.database,Dx(this._delegate,function(e,t){return uC("equalTo","key",t,!0),new Ox(e,t)}(e,t)))}toString(){return ft("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return ft("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(ft("Query.isEqual",1,1,arguments.length),!(e instanceof eN)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,mt(e,"cancel",r.cancel,!0),r.context=n,gt(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(pt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new tN(this.database,new ox(this._delegate._repo,this._delegate._path))}}class tN extends eN{constructor(e,t){super(e,new tx(t._repo,t._path,new jE,!1)),this.database=e,this._delegate=t}getKey(){return ft("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return ft("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new tN(this.database,cx(this._delegate,e))}getParent(){ft("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new tN(this.database,e):null}getRoot(){return ft("Reference.root",0,0,arguments.length),new tN(this.database,this._delegate.root)}set(e,t){ft("Reference.set",1,2,arguments.length),mt("Reference.set","onComplete",t,!0);const n=ux(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(ft("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,Yx("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fC("Reference.update",this._delegate._path),mt("Reference.update","onComplete",t,!0);const n=dx(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){ft("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(fC("setWithPriority",e._path),sC("setWithPriority",t,e._path,!1),cC("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new Me;return RC(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){ft("Reference.remove",0,1,arguments.length),mt("Reference.remove","onComplete",e,!0);const t=function(e){return fC("remove",e._path),ux(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){ft("Reference.transaction",1,3,arguments.length),mt("Reference.transaction","transactionUpdate",e,!1),mt("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(pt(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=Gx(this._delegate,e,{applyLocally:n}).then((e=>new Jx(e.committed,new Xx(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){ft("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=yt(e),fC("setPriority",e._path),cC("setPriority",t,!1);const n=new Me;return RC(e._repo,qk(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){ft("Reference.push",0,2,arguments.length),mt("Reference.push","onComplete",t,!0);const n=function(e,t){e=yt(e),fC("push",e._path),sC("push",t,e._path,!0);const n=IC(e._repo),r=YC(n),i=cx(e,r),o=cx(e,r);let s;return s=null!=t?ux(o,t).then((()=>o)):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this._delegate,e),r=n.then((e=>new tN(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new tN(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return fC("Reference.onDisconnect",this._delegate._path),new $x(new ex(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class nN{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Vx,forceLongPolling:Bx}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qx(this._delegate,e,t,n)}ref(e){if(ft("database.ref",0,1,arguments.length),e instanceof tN){const t=lx(this._delegate,e.toString());return new tN(this,t)}{const t=ax(this._delegate,e);return new tN(this,t)}}refFromURL(e){ft("database.refFromURL",1,1,arguments.length);const t=lx(this._delegate,e);return new tN(this,t)}goOffline(){return ft("database.goOffline",0,0,arguments.length),function(e){(e=yt(e))._checkNotDeleted("goOffline"),LC(e._repo)}(this._delegate)}goOnline(){return ft("database.goOnline",0,0,arguments.length),Zx(this._delegate)}}nN.ServerValue={TIMESTAMP:Hx,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var rN=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:o,namespace:s,nodeAdmin:a=!1}=e;PS(r);const l=new kt("database-standalone"),c=new wt("auth-internal",l);let u;return c.setComponent(new _t("auth-internal",(()=>i),"PRIVATE")),o&&(u=new wt("app-check-internal",l),u.setComponent(new _t("app-check-internal",(()=>o),"PRIVATE"))),{instance:new nN(Ux(t,c,u,n,a),t),namespace:s}}});const iN=nN.ServerValue;!function(e){e.INTERNAL.registerComponent(new _t("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new nN(i,r)}),"PUBLIC").setServiceProps({Reference:tN,Query:eN,Database:nN,DataSnapshot:Xx,enableLogging:Wx,INTERNAL:rN,ServerValue:iN}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","1.0.5")}(zn);const oN={apiKey:"AIzaSyBFZvQeulc-HcJ0mg4pkJ3PaYT6fjkau6U",authDomain:"projectairguard.firebaseapp.com",projectId:"projectairguard",storageBucket:"projectairguard.appspot.com",messagingSenderId:"676272574243",appId:"1:676272574243:web:14e7455fcda2cdabba4696",measurementId:"G-EC2QV72RV4"},sN=zn.initializeApp(oN,"app"),aN=zn.initializeApp(oN).auth(),lN=sN.firestore(),cN=sN.database(),uN=sN.storage();var dN=n(3366),hN=n(7462),fN=n(3733),pN=n(3626);function mN(e){return"string"===typeof e}function gN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n}function vN(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t}const yN=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function _N(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,s=(0,dN.Z)(e,yN),a=o?{}:function(e,t,n){return"function"===typeof e?e(t,n):e}(r,i),{props:l,internalRef:c}=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=(0,fN.Z)(null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),t=(0,hN.Z)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),s=(0,hN.Z)({},n,i,r);return e.length>0&&(s.className=e),Object.keys(t).length>0&&(s.style=t),{props:s,internalRef:void 0}}const s=gN((0,hN.Z)({},i,r)),a=vN(r),l=vN(i),c=t(s),u=(0,fN.Z)(null==c?void 0:c.className,null==n?void 0:n.className,o,null==i?void 0:i.className,null==r?void 0:r.className),d=(0,hN.Z)({},null==c?void 0:c.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),h=(0,hN.Z)({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}((0,hN.Z)({},s,{externalSlotProps:a})),u=(0,pN.Z)(c,null==a?void 0:a.ref,null==(t=e.additionalProps)?void 0:t.ref),d=function(e,t,n){return void 0===e||mN(e)?t:(0,hN.Z)({},t,{ownerState:(0,hN.Z)({},t.ownerState,n)})}(n,(0,hN.Z)({},l,{ref:u}),i);return d}var bN=n(2530),wN=n(9145),SN=n(5253),kN=n(3791);function EN(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function IN(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function TN(e){return parseInt((0,kN.Z)(e).getComputedStyle(e).paddingRight,10)||0}function CN(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=-1===o.indexOf(e),n=!function(e){const t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&IN(e,i)}))}function xN(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function NN(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=(0,bN.Z)(e);return t.body===e?(0,kN.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=EN((0,bN.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(TN(r)+e,"px");const t=(0,bN.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight="".concat(TN(t)+e,"px")}))}let e;if(r.parentNode instanceof DocumentFragment)e=(0,bN.Z)(r).body;else{const t=r.parentElement,n=(0,kN.Z)(r);e="HTML"===(null==t?void 0:t.nodeName)&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const PN=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&IN(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);CN(t,e.mount,e.modalRef,r,!0);const i=xN(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=xN(this.containers,(t=>-1!==t.modals.indexOf(e))),r=this.containers[n];r.restore||(r.restore=NN(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=xN(this.containers,(t=>-1!==t.modals.indexOf(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&IN(e.modalRef,t),CN(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&IN(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};function RN(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,manager:o=PN,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:l,children:c,onClose:u,open:d,rootRef:h}=e,f=r.useRef({}),p=r.useRef(null),m=r.useRef(null),g=(0,pN.Z)(m,h),[v,y]=r.useState(!d),_=function(e){return!!e&&e.props.hasOwnProperty("in")}(c);let b=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(b=!1);const w=()=>(f.current.modalRef=m.current,f.current.mount=p.current,f.current),S=()=>{o.mount(w(),{disableScrollLock:i}),m.current&&(m.current.scrollTop=0)},k=(0,wN.Z)((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||(0,bN.Z)(p.current).body;o.add(w(),e),m.current&&S()})),E=r.useCallback((()=>o.isTopModal(w())),[o]),I=(0,wN.Z)((e=>{p.current=e,e&&(d&&E()?S():m.current&&IN(m.current,b))})),T=r.useCallback((()=>{o.remove(w(),b)}),[b,o]);r.useEffect((()=>()=>{T()}),[T]),r.useEffect((()=>{d?k():_&&s||T()}),[d,T,_,s,k]);const C=e=>t=>{var r;null==(r=e.onKeyDown)||r.call(e,t),"Escape"===t.key&&229!==t.which&&E()&&(n||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},x=e=>t=>{var n;null==(n=e.onClick)||n.call(e,t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=gN(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r=(0,hN.Z)({},n,t);return(0,hN.Z)({role:"presentation"},r,{onKeyDown:C(r),ref:g})},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,hN.Z)({"aria-hidden":!0},e,{onClick:x(e),open:d})},getTransitionProps:()=>({onEnter:(0,SN.Z)((()=>{y(!1),a&&a()}),null==c?void 0:c.props.onEnter),onExited:(0,SN.Z)((()=>{y(!0),l&&l(),s&&T()}),null==c?void 0:c.props.onExited)}),rootRef:g,portalRef:I,isTopModal:E,exited:v,hasTransition:_}}var AN=n(838),ON=n(184);const DN=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function LN(e){const t=[],n=[];return Array.from(e.querySelectorAll(DN)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector('input[type="radio"]'.concat(t));let n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function MN(){return!0}function FN(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:o=!1,getTabbable:s=LN,isEnabled:a=MN,open:l}=e,c=r.useRef(!1),u=r.useRef(null),d=r.useRef(null),h=r.useRef(null),f=r.useRef(null),p=r.useRef(!1),m=r.useRef(null),g=(0,pN.Z)(t.ref,m),v=r.useRef(null);r.useEffect((()=>{l&&m.current&&(p.current=!n)}),[n,l]),r.useEffect((()=>{if(!l||!m.current)return;const e=(0,bN.Z)(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),p.current&&m.current.focus()),()=>{o||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),r.useEffect((()=>{if(!l||!m.current)return;const e=(0,bN.Z)(m.current),t=t=>{v.current=t,!i&&a()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!a()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(i&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==f.current)f.current=null;else if(null!==f.current)return;if(!p.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=s(m.current)),n.length>0){var r,o;const e=Boolean((null==(r=v.current)?void 0:r.shiftKey)&&"Tab"===(null==(o=v.current)?void 0:o.key)),t=n[0],i=n[n.length-1];"string"!==typeof t&&"string"!==typeof i&&(e?i.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const r=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(r),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,i,o,a,l,s]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),p.current=!0};return(0,ON.jsxs)(r.Fragment,{children:[(0,ON.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),r.cloneElement(t,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),p.current=!0,f.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,ON.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:d,"data-testid":"sentinelEnd"})]})}var UN=n(2060),jN=n(7576);const zN=r.forwardRef((function(e,t){const{children:n,container:i,disablePortal:o=!1}=e,[a,l]=r.useState(null),c=(0,pN.Z)(r.isValidElement(n)?n.ref:null,t);if((0,UN.Z)((()=>{o||l(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,o]),(0,UN.Z)((()=>{if(a&&!o)return(0,jN.Z)(t,a),()=>{(0,jN.Z)(t,null)}}),[t,a,o]),o){if(r.isValidElement(n)){const e={ref:c};return r.cloneElement(n,e)}return(0,ON.jsx)(r.Fragment,{children:n})}return(0,ON.jsx)(r.Fragment,{children:a?s.createPortal(n,a):a})}));var VN=n(6934),BN=n(1402);function qN(e,t){return qN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qN(e,t)}function ZN(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,qN(e,t)}const WN=!1,HN=r.createContext(null);var KN="unmounted",GN="exited",QN="entering",YN="entered",$N="exiting",JN=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=GN,r.appearStatus=QN):i=YN:i=t.unmountOnExit||t.mountOnEnter?KN:GN,r.state={status:i},r.nextCallback=null,r}ZN(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===KN?{status:GN}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==QN&&n!==YN&&(t=QN):n!==QN&&n!==YN||(t=$N)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===QN){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===GN&&this.setState({status:KN})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[s.findDOMNode(this),r],o=i[0],a=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||WN?this.safeSetState({status:YN},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:QN},(function(){t.props.onEntering(o,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:YN},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:s.findDOMNode(this);t&&!WN?(this.props.onExit(r),this.safeSetState({status:$N},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:GN},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:GN},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===KN)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,dN.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(HN.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},t}(r.Component);function XN(){}JN.contextType=HN,JN.propTypes={},JN.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:XN,onEntering:XN,onEntered:XN,onExit:XN,onExiting:XN,onExited:XN},JN.UNMOUNTED=KN,JN.EXITED=GN,JN.ENTERING=QN,JN.ENTERED=YN,JN.EXITING=$N;const eP=JN;var tP=n(3459),nP=n(6482),rP=n(988);function iP(){const e=(0,tP.Z)(nP.Z);return e[rP.Z]||e}const oP=e=>e.scrollTop;function sP(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof o?o[t.mode]:o,delay:s.transitionDelay}}var aP=n(2071);const lP=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],cP={entering:{opacity:1},entered:{opacity:1}},uP=r.forwardRef((function(e,t){const n=iP(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:m,style:g,timeout:v=i,TransitionComponent:y=eP}=e,_=(0,dN.Z)(e,lP),b=r.useRef(null),w=(0,aP.Z)(b,a.ref,t),S=e=>t=>{if(e){const n=b.current;void 0===t?e(n):e(n,t)}},k=S(h),E=S(((e,t)=>{oP(e);const r=sP({style:g,timeout:v,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),u&&u(e,t)})),I=S(d),T=S(m),C=S((e=>{const t=sP({style:g,timeout:v,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),f&&f(e)})),x=S(p);return(0,ON.jsx)(y,(0,hN.Z)({appear:s,in:c,nodeRef:b,onEnter:E,onEntered:I,onEntering:k,onExit:C,onExited:x,onExiting:T,addEndListener:e=>{o&&o(b.current,e)},timeout:v},_,{children:(e,t)=>r.cloneElement(a,(0,hN.Z)({style:(0,hN.Z)({opacity:0,visibility:"exited"!==e||c?void 0:"hidden"},cP[e],g,a.props.style),ref:w},t))}))})),dP=uP;var hP=n(9703),fP=n(4657);function pP(e){return(0,fP.ZP)("MuiBackdrop",e)}(0,hP.Z)("MuiBackdrop",["root","invisible"]);const mP=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],gP=(0,VN.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})((e=>{let{ownerState:t}=e;return(0,hN.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),vP=r.forwardRef((function(e,t){var n,r,i;const o=(0,BN.Z)({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:l="div",components:c={},componentsProps:u={},invisible:d=!1,open:h,slotProps:f={},slots:p={},TransitionComponent:m=dP,transitionDuration:g}=o,v=(0,dN.Z)(o,mP),y=(0,hN.Z)({},o,{component:l,invisible:d}),_=(e=>{const{classes:t,invisible:n}=e,r={root:["root",n&&"invisible"]};return(0,AN.Z)(r,pP,t)})(y),b=null!=(n=f.root)?n:u.root;return(0,ON.jsx)(m,(0,hN.Z)({in:h,timeout:g},v,{children:(0,ON.jsx)(gP,(0,hN.Z)({"aria-hidden":!0},b,{as:null!=(r=null!=(i=p.root)?i:c.Root)?r:l,className:(0,fN.Z)(_.root,a,null==b?void 0:b.className),ownerState:(0,hN.Z)({},y,null==b?void 0:b.ownerState),classes:_,ref:t,children:s}))}))})),yP=vP;function _P(e){return(0,fP.ZP)("MuiModal",e)}(0,hP.Z)("MuiModal",["root","hidden","backdrop"]);const bP=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],wP=(0,VN.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),SP=(0,VN.ZP)(yP,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),kP=r.forwardRef((function(e,t){var n,i,o,s,a,l;const c=(0,BN.Z)({name:"MuiModal",props:e}),{BackdropComponent:u=SP,BackdropProps:d,className:h,closeAfterTransition:f=!1,children:p,container:m,component:g,components:v={},componentsProps:y={},disableAutoFocus:_=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:w=!1,disablePortal:S=!1,disableRestoreFocus:k=!1,disableScrollLock:E=!1,hideBackdrop:I=!1,keepMounted:T=!1,onBackdropClick:C,open:x,slotProps:N,slots:P}=c,R=(0,dN.Z)(c,bP),A=(0,hN.Z)({},c,{closeAfterTransition:f,disableAutoFocus:_,disableEnforceFocus:b,disableEscapeKeyDown:w,disablePortal:S,disableRestoreFocus:k,disableScrollLock:E,hideBackdrop:I,keepMounted:T}),{getRootProps:O,getBackdropProps:D,getTransitionProps:L,portalRef:M,isTopModal:F,exited:U,hasTransition:j}=RN((0,hN.Z)({},A,{rootRef:t})),z=(0,hN.Z)({},A,{exited:U}),V=(e=>{const{open:t,exited:n,classes:r}=e,i={root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]};return(0,AN.Z)(i,_P,r)})(z),B={};if(void 0===p.props.tabIndex&&(B.tabIndex="-1"),j){const{onEnter:e,onExited:t}=L();B.onEnter=e,B.onExited=t}const q=null!=(n=null!=(i=null==P?void 0:P.root)?i:v.Root)?n:wP,Z=null!=(o=null!=(s=null==P?void 0:P.backdrop)?s:v.Backdrop)?o:u,W=null!=(a=null==N?void 0:N.root)?a:y.root,H=null!=(l=null==N?void 0:N.backdrop)?l:y.backdrop,K=_N({elementType:q,externalSlotProps:W,externalForwardedProps:R,getSlotProps:O,additionalProps:{ref:t,as:g},ownerState:z,className:(0,fN.Z)(h,null==W?void 0:W.className,null==V?void 0:V.root,!z.open&&z.exited&&(null==V?void 0:V.hidden))}),G=_N({elementType:Z,externalSlotProps:H,additionalProps:d,getSlotProps:e=>D((0,hN.Z)({},e,{onClick:t=>{C&&C(t),null!=e&&e.onClick&&e.onClick(t)}})),className:(0,fN.Z)(null==H?void 0:H.className,null==d?void 0:d.className,null==V?void 0:V.backdrop),ownerState:z});return T||x||j&&!U?(0,ON.jsx)(zN,{ref:M,container:m,disablePortal:S,children:(0,ON.jsxs)(q,(0,hN.Z)({},K,{children:[!I&&u?(0,ON.jsx)(Z,(0,hN.Z)({},G)):null,(0,ON.jsx)(FN,{disableEnforceFocus:b,disableAutoFocus:_,disableRestoreFocus:k,isEnabled:F,open:x,children:r.cloneElement(p,B)})]}))}):null})),EP=kP;var IP=n(6649),TP=n(104),CP=n(8519);const xP=["className","component"];var NP=n(4925),PP=n(7107);const RP=(0,hP.Z)("MuiBox",["root"]),AP=(0,PP.Z)(),OP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:o}=e,s=(0,IP.default)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(TP.Z),a=r.forwardRef((function(e,r){const a=(0,tP.Z)(n),l=(0,CP.Z)(e),{className:c,component:u="div"}=l,d=(0,dN.Z)(l,xP);return(0,ON.jsx)(s,(0,hN.Z)({as:u,ref:r,className:(0,fN.Z)(c,o?o(i):i),theme:t&&a[t]||a},d))}));return a}({themeId:rP.Z,defaultTheme:AP,defaultClassName:RP.root,generateClassName:NP.Z.generate}),DP=OP;var LP=n(6046),MP=n(8736),FP=n(721),UP=n(3548);const jP=["onChange","maxRows","minRows","style","value"];function zP(e){return parseInt(e,10)||0}const VP={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const BP=r.forwardRef((function(e,t){const{onChange:n,maxRows:i,minRows:o=1,style:s,value:a}=e,l=(0,dN.Z)(e,jP),{current:c}=r.useRef(null!=a),u=r.useRef(null),d=(0,pN.Z)(t,u),h=r.useRef(null),f=r.useCallback((()=>{const t=u.current,n=(0,kN.Z)(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const r=h.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");const s=n.boxSizing,a=zP(n.paddingBottom)+zP(n.paddingTop),l=zP(n.borderBottomWidth)+zP(n.borderTopWidth),c=r.scrollHeight;r.value="x";const d=r.scrollHeight;let f=c;o&&(f=Math.max(Number(o)*d,f)),i&&(f=Math.min(Number(i)*d,f)),f=Math.max(f,d);return{outerHeightStyle:f+("border-box"===s?a+l:0),overflowing:Math.abs(f-c)<=1}}),[i,o,e.placeholder]),p=r.useCallback((()=>{const e=f();if(void 0===(t=e)||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflowing)return;var t;const n=u.current;n.style.height="".concat(e.outerHeightStyle,"px"),n.style.overflow=e.overflowing?"hidden":""}),[f]);(0,UN.Z)((()=>{const e=()=>{p()};let t;const n=(0,UP.Z)(e),r=u.current,i=(0,kN.Z)(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(e),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(t),i.removeEventListener("resize",n),o&&o.disconnect()}}),[f,p]),(0,UN.Z)((()=>{p()}));return(0,ON.jsxs)(r.Fragment,{children:[(0,ON.jsx)("textarea",(0,hN.Z)({value:a,onChange:e=>{c||p(),n&&n(e)},ref:d,rows:o,style:s},l)),(0,ON.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:(0,hN.Z)({},VP,s,{paddingTop:0,paddingBottom:0})})]})}));function qP(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const ZP=r.createContext(void 0);function WP(){return r.useContext(ZP)}var HP=n(4036),KP=n(162),GP=n(1500);const QP=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=(0,tP.Z)(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,ON.jsx)(GP.Z,{styles:o})};const YP=function(e){return(0,ON.jsx)(QP,(0,hN.Z)({},e,{defaultTheme:nP.Z,themeId:rP.Z}))};function $P(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function JP(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&($P(e.value)&&""!==e.value||t&&$P(e.defaultValue)&&""!==e.defaultValue)}function XP(e){return(0,fP.ZP)("MuiInputBase",e)}const eR=(0,hP.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),tR=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],nR=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,HP.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},rR=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},iR=(0,VN.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:nR})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",["&.".concat(eR.disabled)]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},n.multiline&&(0,hN.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),oR=(0,VN.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:rR})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode,i=(0,hN.Z)({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),o={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:r?.42:.5};return(0,hN.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},["label[data-shrink=false] + .".concat(eR.formControl," &")]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},["&.".concat(eR.disabled)]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===n.size&&{paddingTop:1},n.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===n.type&&{MozAppearance:"textfield"})})),sR=(0,ON.jsx)(YP,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),aR=r.forwardRef((function(e,t){var n;const i=(0,BN.Z)({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:m=!1,id:g,inputComponent:v="input",inputProps:y={},inputRef:_,maxRows:b,minRows:w,multiline:S=!1,name:k,onBlur:E,onChange:I,onClick:T,onFocus:C,onKeyDown:x,onKeyUp:N,placeholder:P,readOnly:R,renderSuffix:A,rows:O,slotProps:D={},slots:L={},startAdornment:M,type:F="text",value:U}=i,j=(0,dN.Z)(i,tR),z=null!=y.value?y.value:U,{current:V}=r.useRef(null!=z),B=r.useRef(),q=r.useCallback((e=>{0}),[]),Z=(0,aP.Z)(B,_,y.ref,q),[W,H]=r.useState(!1),K=WP();const G=qP({props:i,muiFormControl:K,states:["color","disabled","error","hiddenLabel","size","required","filled"]});G.focused=K?K.focused:W,r.useEffect((()=>{!K&&h&&W&&(H(!1),E&&E())}),[K,h,W,E]);const Q=K&&K.onFilled,Y=K&&K.onEmpty,$=r.useCallback((e=>{JP(e)?Q&&Q():Y&&Y()}),[Q,Y]);(0,KP.Z)((()=>{V&&$({value:z})}),[z,$,V]);r.useEffect((()=>{$(B.current)}),[]);let J=v,X=y;S&&"input"===J&&(X=O?(0,hN.Z)({type:void 0,minRows:O,maxRows:O},X):(0,hN.Z)({type:void 0,maxRows:b,minRows:w},X),J=BP);r.useEffect((()=>{K&&K.setAdornedStart(Boolean(M))}),[K,M]);const ee=(0,hN.Z)({},i,{color:G.color||"primary",disabled:G.disabled,endAdornment:p,error:G.error,focused:G.focused,formControl:K,fullWidth:m,hiddenLabel:G.hiddenLabel,multiline:S,size:G.size,startAdornment:M,type:F}),te=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=e,m={root:["root","color".concat((0,HP.Z)(n)),r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",h&&"medium"!==h&&"size".concat((0,HP.Z)(h)),u&&"multiline",f&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",u&&"inputMultiline","small"===h&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return(0,AN.Z)(m,XP,t)})(ee),ne=L.root||c.Root||iR,re=D.root||u.root||{},ie=L.input||c.Input||oR;return X=(0,hN.Z)({},X,null!=(n=D.input)?n:u.input),(0,ON.jsxs)(r.Fragment,{children:[!f&&sR,(0,ON.jsxs)(ne,(0,hN.Z)({},re,!mN(ne)&&{ownerState:(0,hN.Z)({},ee,re.ownerState)},{ref:t,onClick:e=>{B.current&&e.currentTarget===e.target&&B.current.focus(),T&&T(e)}},j,{className:(0,fN.Z)(te.root,re.className,l,R&&"MuiInputBase-readOnly"),children:[M,(0,ON.jsx)(ZP.Provider,{value:null,children:(0,ON.jsx)(ie,(0,hN.Z)({ownerState:ee,"aria-invalid":G.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:d,disabled:G.disabled,id:g,onAnimationStart:e=>{$("mui-auto-fill-cancel"===e.animationName?B.current:{value:"x"})},name:k,placeholder:P,readOnly:R,required:G.required,rows:O,value:z,onKeyDown:x,onKeyUp:N,type:F},X,!mN(ie)&&{as:J,ownerState:(0,hN.Z)({},ee,X.ownerState)},{ref:Z,className:(0,fN.Z)(te.input,X.className,R&&"MuiInputBase-readOnly"),onBlur:e=>{E&&E(e),y.onBlur&&y.onBlur(e),K&&K.onBlur?K.onBlur(e):H(!1)},onChange:function(e){if(!V){const t=e.target||B.current;if(null==t)throw new Error((0,FP.Z)(1));$({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];y.onChange&&y.onChange(e,...n),I&&I(e,...n)},onFocus:e=>{G.disabled?e.stopPropagation():(C&&C(e),y.onFocus&&y.onFocus(e),K&&K.onFocus?K.onFocus(e):H(!0))}}))}),p,A?A((0,hN.Z)({},G,{startAdornment:M})):null]}))]})})),lR=aR;var cR=n(5070);function uR(e){return(0,fP.ZP)("MuiInput",e)}const dR=(0,hN.Z)({},eR,(0,hP.Z)("MuiInput",["root","underline","input"])),hR=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],fR=(0,VN.ZP)(iR,{shouldForwardProp:e=>(0,cR.Z)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...nR(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;let r="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r="rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")")),(0,hN.Z)({position:"relative"},n.formControl&&{"label + &":{marginTop:16}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat((t.vars||t).palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(dR.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(dR.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(dR.disabled,", .").concat(dR.error,"):before")]:{borderBottom:"2px solid ".concat((t.vars||t).palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},["&.".concat(dR.disabled,":before")]:{borderBottomStyle:"dotted"}})})),pR=(0,VN.ZP)(oR,{name:"MuiInput",slot:"Input",overridesResolver:rR})({}),mR=r.forwardRef((function(e,t){var n,r,i,o;const s=(0,BN.Z)({props:e,name:"MuiInput"}),{disableUnderline:a,components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:f,slots:p={},type:m="text"}=s,g=(0,dN.Z)(s,hR),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,AN.Z)(r,uR,t);return(0,hN.Z)({},t,i)})(s),y={root:{ownerState:{disableUnderline:a}}},_=(null!=f?f:c)?(0,MP.Z)(null!=f?f:c,y):y,b=null!=(n=null!=(r=p.root)?r:l.Root)?n:fR,w=null!=(i=null!=(o=p.input)?o:l.Input)?i:pR;return(0,ON.jsx)(lR,(0,hN.Z)({slots:{root:b,input:w},slotProps:_,fullWidth:u,inputComponent:d,multiline:h,ref:t,type:m},g,{classes:v}))}));mR.muiName="Input";const gR=mR;function vR(e){return(0,fP.ZP)("MuiFilledInput",e)}const yR=(0,hN.Z)({},eR,(0,hP.Z)("MuiFilledInput",["root","underline","input"])),_R=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],bR=(0,VN.ZP)(iR,{shouldForwardProp:e=>(0,cR.Z)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...nR(e,t),!n.disableUnderline&&t.underline]}})((e=>{let{theme:t,ownerState:n}=e;var r;const i="light"===t.palette.mode,o=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",l=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,hN.Z)({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},["&.".concat(yR.focused)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},["&.".concat(yR.disabled)]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:l}},!n.disableUnderline&&{"&::after":{borderBottom:"2px solid ".concat(null==(r=(t.vars||t).palette[n.color||"primary"])?void 0:r.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},["&.".concat(yR.focused,":after")]:{transform:"scaleX(1) translateX(0)"},["&.".concat(yR.error)]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:"1px solid ".concat(t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / ").concat(t.vars.opacity.inputUnderline,")"):o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},["&:hover:not(.".concat(yR.disabled,", .").concat(yR.error,"):before")]:{borderBottom:"1px solid ".concat((t.vars||t).palette.text.primary)},["&.".concat(yR.disabled,":before")]:{borderBottomStyle:"dotted"}},n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,hN.Z)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9}))})),wR=(0,VN.ZP)(oR,{name:"MuiFilledInput",slot:"Input",overridesResolver:rR})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0},n.hiddenLabel&&"small"===n.size&&{paddingTop:8,paddingBottom:9},n.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})})),SR=r.forwardRef((function(e,t){var n,r,i,o;const s=(0,BN.Z)({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:l,fullWidth:c=!1,inputComponent:u="input",multiline:d=!1,slotProps:h,slots:f={},type:p="text"}=s,m=(0,dN.Z)(s,_R),g=(0,hN.Z)({},s,{fullWidth:c,inputComponent:u,multiline:d,type:p}),v=(e=>{const{classes:t,disableUnderline:n}=e,r={root:["root",!n&&"underline"],input:["input"]},i=(0,AN.Z)(r,vR,t);return(0,hN.Z)({},t,i)})(s),y={root:{ownerState:g},input:{ownerState:g}},_=(null!=h?h:l)?(0,MP.Z)(y,null!=h?h:l):y,b=null!=(n=null!=(r=f.root)?r:a.Root)?n:bR,w=null!=(i=null!=(o=f.input)?o:a.Input)?i:wR;return(0,ON.jsx)(lR,(0,hN.Z)({slots:{root:b,input:w},componentsProps:_,fullWidth:c,inputComponent:u,multiline:d,ref:t,type:p},m,{classes:v}))}));SR.muiName="Input";const kR=SR;var ER;const IR=["children","classes","className","label","notched"],TR=(0,VN.ZP)("fieldset",{shouldForwardProp:cR.Z})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),CR=(0,VN.ZP)("legend",{shouldForwardProp:cR.Z})((e=>{let{ownerState:t,theme:n}=e;return(0,hN.Z)({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})},t.withLabel&&(0,hN.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}))}));function xR(e){return(0,fP.ZP)("MuiOutlinedInput",e)}const NR=(0,hN.Z)({},eR,(0,hP.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),PR=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],RR=(0,VN.ZP)(iR,{shouldForwardProp:e=>(0,cR.Z)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:nR})((e=>{let{theme:t,ownerState:n}=e;const r="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,hN.Z)({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,["&:hover .".concat(NR.notchedOutline)]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{["&:hover .".concat(NR.notchedOutline)]:{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):r}},["&.".concat(NR.focused," .").concat(NR.notchedOutline)]:{borderColor:(t.vars||t).palette[n.color].main,borderWidth:2},["&.".concat(NR.error," .").concat(NR.notchedOutline)]:{borderColor:(t.vars||t).palette.error.main},["&.".concat(NR.disabled," .").concat(NR.notchedOutline)]:{borderColor:(t.vars||t).palette.action.disabled}},n.startAdornment&&{paddingLeft:14},n.endAdornment&&{paddingRight:14},n.multiline&&(0,hN.Z)({padding:"16.5px 14px"},"small"===n.size&&{padding:"8.5px 14px"}))})),AR=(0,VN.ZP)((function(e){const{className:t,label:n,notched:r}=e,i=(0,dN.Z)(e,IR),o=null!=n&&""!==n,s=(0,hN.Z)({},e,{notched:r,withLabel:o});return(0,ON.jsx)(TR,(0,hN.Z)({"aria-hidden":!0,className:t,ownerState:s},i,{children:(0,ON.jsx)(CR,{ownerState:s,children:o?(0,ON.jsx)("span",{children:n}):ER||(ER=(0,ON.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?"rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):n}})),OR=(0,VN.ZP)(oR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:rR})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===n.size&&{padding:"8.5px 14px"},n.multiline&&{padding:0},n.startAdornment&&{paddingLeft:0},n.endAdornment&&{paddingRight:0})})),DR=r.forwardRef((function(e,t){var n,i,o,s,a;const l=(0,BN.Z)({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:f=!1,notched:p,slots:m={},type:g="text"}=l,v=(0,dN.Z)(l,PR),y=(e=>{const{classes:t}=e,n=(0,AN.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},xR,t);return(0,hN.Z)({},t,n)})(l),_=WP(),b=qP({props:l,muiFormControl:_,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),w=(0,hN.Z)({},l,{color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:_,fullWidth:u,hiddenLabel:b.hiddenLabel,multiline:f,size:b.size,type:g}),S=null!=(n=null!=(i=m.root)?i:c.Root)?n:RR,k=null!=(o=null!=(s=m.input)?s:c.Input)?o:OR;return(0,ON.jsx)(lR,(0,hN.Z)({slots:{root:S,input:k},renderSuffix:e=>(0,ON.jsx)(AR,{ownerState:w,className:y.notchedOutline,label:null!=h&&""!==h&&b.required?a||(a=(0,ON.jsxs)(r.Fragment,{children:[h,"\u2009","*"]})):h,notched:"undefined"!==typeof p?p:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:u,inputComponent:d,multiline:f,ref:t,type:g},v,{classes:(0,hN.Z)({},y,{notchedOutline:null})}))}));DR.muiName="Input";const LR=DR;function MR(e){return(0,fP.ZP)("MuiFormLabel",e)}const FR=(0,hP.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),UR=["children","className","color","component","disabled","error","filled","focused","required"],jR=(0,VN.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,hN.Z)({},t.root,"secondary"===n.color&&t.colorSecondary,n.filled&&t.filled)}})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",["&.".concat(FR.focused)]:{color:(t.vars||t).palette[n.color].main},["&.".concat(FR.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(FR.error)]:{color:(t.vars||t).palette.error.main}})})),zR=(0,VN.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{["&.".concat(FR.error)]:{color:(t.vars||t).palette.error.main}}})),VR=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiFormLabel"}),{children:r,className:i,component:o="label"}=n,s=(0,dN.Z)(n,UR),a=qP({props:n,muiFormControl:WP(),states:["color","required","focused","disabled","error","filled"]}),l=(0,hN.Z)({},n,{color:a.color||"primary",component:o,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e,l={root:["root","color".concat((0,HP.Z)(n)),i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return(0,AN.Z)(l,MR,t)})(l);return(0,ON.jsxs)(jR,(0,hN.Z)({as:o,ownerState:l,className:(0,fN.Z)(c.root,i),ref:t},s,{children:[r,a.required&&(0,ON.jsxs)(zR,{ownerState:l,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))})),BR=VR;function qR(e){return(0,fP.ZP)("MuiInputLabel",e)}(0,hP.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const ZR=["disableAnimation","margin","shrink","variant","className"],WR=(0,VN.ZP)(BR,{shouldForwardProp:e=>(0,cR.Z)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(FR.asterisk)]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},"filled"===n.variant&&(0,hN.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,hN.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,hN.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),HR=r.forwardRef((function(e,t){const n=(0,BN.Z)({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,shrink:i,className:o}=n,s=(0,dN.Z)(n,ZR),a=WP();let l=i;"undefined"===typeof l&&a&&(l=a.filled||a.focused||a.adornedStart);const c=qP({props:n,muiFormControl:a,states:["size","variant","required","focused"]}),u=(0,hN.Z)({},n,{disableAnimation:r,formControl:a,shrink:l,size:c.size,variant:c.variant,required:c.required,focused:c.focused}),d=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&"size".concat((0,HP.Z)(r)),s],asterisk:[a&&"asterisk"]},c=(0,AN.Z)(l,qR,t);return(0,hN.Z)({},t,c)})(u);return(0,ON.jsx)(WR,(0,hN.Z)({"data-shrink":l,ownerState:u,ref:t,className:(0,fN.Z)(d.root,o)},s,{classes:d}))})),KR=HR;var GR=n(5925);function QR(e){return(0,fP.ZP)("MuiFormControl",e)}(0,hP.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const YR=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],$R=(0,VN.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return(0,hN.Z)({},t.root,t["margin".concat((0,HP.Z)(n.margin))],n.fullWidth&&t.fullWidth)}})((e=>{let{ownerState:t}=e;return(0,hN.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===t.margin&&{marginTop:16,marginBottom:8},"dense"===t.margin&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})})),JR=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:m="medium",variant:g="outlined"}=n,v=(0,dN.Z)(n,YR),y=(0,hN.Z)({},n,{color:s,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:m,variant:g}),_=(e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root","none"!==n&&"margin".concat((0,HP.Z)(n)),r&&"fullWidth"]};return(0,AN.Z)(i,QR,t)})(y),[b,w]=r.useState((()=>{let e=!1;return i&&r.Children.forEach(i,(t=>{if(!(0,GR.Z)(t,["Input","Select"]))return;const n=(0,GR.Z)(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[S,k]=r.useState((()=>{let e=!1;return i&&r.Children.forEach(i,(t=>{(0,GR.Z)(t,["Input","Select"])&&(JP(t.props,!0)||JP(t.props.inputProps,!0))&&(e=!0)})),e})),[E,I]=r.useState(!1);l&&E&&I(!1);const T=void 0===u||l?E:u;let C;const x=r.useMemo((()=>({adornedStart:b,setAdornedStart:w,color:s,disabled:l,error:c,filled:S,focused:T,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{I(!1)},onEmpty:()=>{k(!1)},onFilled:()=>{k(!0)},onFocus:()=>{I(!0)},registerEffect:C,required:p,variant:g})),[b,s,l,c,S,T,d,h,C,p,m,g]);return(0,ON.jsx)(ZP.Provider,{value:x,children:(0,ON.jsx)($R,(0,hN.Z)({as:a,ownerState:y,className:(0,fN.Z)(_.root,o),ref:t},v,{children:i}))})})),XR=JR;function eA(e){return(0,fP.ZP)("MuiFormHelperText",e)}const tA=(0,hP.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var nA;const rA=["children","className","component","disabled","error","filled","focused","margin","required","variant"],iA=(0,VN.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t["size".concat((0,HP.Z)(n.size))],n.contained&&t.contained,n.filled&&t.filled]}})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,["&.".concat(tA.disabled)]:{color:(t.vars||t).palette.text.disabled},["&.".concat(tA.error)]:{color:(t.vars||t).palette.error.main}},"small"===n.size&&{marginTop:4},n.contained&&{marginLeft:14,marginRight:14})})),oA=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p"}=n,s=(0,dN.Z)(n,rA),a=qP({props:n,muiFormControl:WP(),states:["variant","size","disabled","error","filled","focused","required"]}),l=(0,hN.Z)({},n,{component:o,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&"size".concat((0,HP.Z)(r)),n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return(0,AN.Z)(c,eA,t)})(l);return(0,ON.jsx)(iA,(0,hN.Z)({as:o,ownerState:l,className:(0,fN.Z)(c.root,i),ref:t},s,{children:" "===r?nA||(nA=(0,ON.jsx)("span",{className:"notranslate",children:"\u200b"})):r}))})),sA=oA;n(8457);var aA=n(8301);const lA=r.createContext();const cA=r.createContext({});function uA(e){return(0,fP.ZP)("MuiList",e)}(0,hP.Z)("MuiList",["root","padding","dense","subheader"]);const dA=["children","className","component","dense","disablePadding","subheader"],hA=(0,VN.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})((e=>{let{ownerState:t}=e;return(0,hN.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})})),fA=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=n,u=(0,dN.Z)(n,dA),d=r.useMemo((()=>({dense:a})),[a]),h=(0,hN.Z)({},n,{component:s,dense:a,disablePadding:l}),f=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e,o={root:["root",!n&&"padding",r&&"dense",i&&"subheader"]};return(0,AN.Z)(o,uA,t)})(h);return(0,ON.jsx)(cA.Provider,{value:d,children:(0,ON.jsxs)(hA,(0,hN.Z)({as:s,className:(0,fN.Z)(f.root,o),ref:t,ownerState:h},u,{children:[c,i]}))})})),pA=fA,mA=EN,gA=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function vA(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function yA(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function _A(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:0===n.indexOf(t.keys.join("")))}function bA(e,t,n,r,i,o){let s=!1,a=i(e,t,!!t&&n);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const t=!r&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&_A(a,o)&&!t)return a.focus(),!0;a=i(e,a,n)}return!1}const wA=r.forwardRef((function(e,t){const{actions:n,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=(0,dN.Z)(e,gA),f=r.useRef(null),p=r.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,KP.Z)((()=>{i&&f.current.focus()}),[i]),r.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!f.current.style.width;if(e.clientHeight<f.current.clientHeight&&r){const t="".concat(mA((0,aA.Z)(e)),"px");f.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,f.current.style.width="calc(100% + ".concat(t,")")}return f.current}})),[]);const m=(0,aP.Z)(f,t);let g=-1;r.Children.forEach(s,((e,t)=>{r.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===g)&&(g=t),g===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=s.length&&(g=-1))):g===t&&(g+=1,g>=s.length&&(g=-1))}));const v=r.Children.map(s,((e,t)=>{if(t===g){const t={};return o&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(t.tabIndex=0),r.cloneElement(e,t)}return e}));return(0,ON.jsx)(pA,(0,hN.Z)({role:"menu",ref:m,className:a,onKeyDown:e=>{const t=f.current,n=e.key,r=(0,aA.Z)(t).activeElement;if("ArrowDown"===n)e.preventDefault(),bA(t,r,c,l,vA);else if("ArrowUp"===n)e.preventDefault(),bA(t,r,c,l,yA);else if("Home"===n)e.preventDefault(),bA(t,null,c,l,vA);else if("End"===n)e.preventDefault(),bA(t,null,c,l,yA);else if(1===n.length){const i=p.current,o=n.toLowerCase(),s=performance.now();i.keys.length>0&&(s-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=s,i.keys.push(o);const a=r&&!i.repeating&&_A(r,i);i.previousKeyMatched&&(a||bA(t,r,!1,l,vA,i))?e.preventDefault():i.previousKeyMatched=!1}u&&u(e)},tabIndex:i?0:-1},h,{children:v}))})),SA=wA;var kA=n(3199),EA=n(7602),IA=n(6788);const TA=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function CA(e){return"scale(".concat(e,", ").concat(e**2,")")}const xA={entering:{opacity:1,transform:CA(1)},entered:{opacity:1,transform:"none"}},NA="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),PA=r.forwardRef((function(e,t){const{addEndListener:n,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:f,style:p,timeout:m="auto",TransitionComponent:g=eP}=e,v=(0,dN.Z)(e,TA),y=(0,IA.Z)(),_=r.useRef(),b=iP(),w=r.useRef(null),S=(0,aP.Z)(w,o.ref,t),k=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},E=k(u),I=k(((e,t)=>{oP(e);const{duration:n,delay:r,easing:i}=sP({style:p,timeout:m,easing:s},{mode:"enter"});let o;"auto"===m?(o=b.transitions.getAutoHeightDuration(e.clientHeight),_.current=o):o=n,e.style.transition=[b.transitions.create("opacity",{duration:o,delay:r}),b.transitions.create("transform",{duration:NA?o:.666*o,delay:r,easing:i})].join(","),l&&l(e,t)})),T=k(c),C=k(f),x=k((e=>{const{duration:t,delay:n,easing:r}=sP({style:p,timeout:m,easing:s},{mode:"exit"});let i;"auto"===m?(i=b.transitions.getAutoHeightDuration(e.clientHeight),_.current=i):i=t,e.style.transition=[b.transitions.create("opacity",{duration:i,delay:n}),b.transitions.create("transform",{duration:NA?i:.666*i,delay:NA?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=CA(.75),d&&d(e)})),N=k(h);return(0,ON.jsx)(g,(0,hN.Z)({appear:i,in:a,nodeRef:w,onEnter:I,onEntered:T,onEntering:E,onExit:x,onExited:N,onExiting:C,addEndListener:e=>{"auto"===m&&y.start(_.current||0,e),n&&n(w.current,e)},timeout:"auto"===m?null:m},v,{children:(e,t)=>r.cloneElement(o,(0,hN.Z)({style:(0,hN.Z)({opacity:0,transform:CA(.75),visibility:"exited"!==e||a?void 0:"hidden"},xA[e],p,o.props.style),ref:S},t))}))}));PA.muiSupportAuto=!0;const RA=PA;var AA=n(4131);const OA=e=>{let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(t/100).toFixed(2)};function DA(e){return(0,fP.ZP)("MuiPaper",e)}(0,hP.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const LA=["className","component","elevation","square","variant"],MA=(0,VN.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((e=>{let{theme:t,ownerState:n}=e;var r;return(0,hN.Z)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!n.square&&{borderRadius:t.shape.borderRadius},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===n.variant&&(0,hN.Z)({boxShadow:(t.vars||t).shadows[n.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,AA.Fq)("#fff",OA(n.elevation)),", ").concat((0,AA.Fq)("#fff",OA(n.elevation)),")")},t.vars&&{backgroundImage:null==(r=t.vars.overlays)?void 0:r[n.elevation]}))})),FA=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiPaper"}),{className:r,component:i="div",elevation:o=1,square:s=!1,variant:a="elevation"}=n,l=(0,dN.Z)(n,LA),c=(0,hN.Z)({},n,{component:i,elevation:o,square:s,variant:a}),u=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,AN.Z)(o,DA,i)})(c);return(0,ON.jsx)(MA,(0,hN.Z)({as:i,ownerState:c,className:(0,fN.Z)(u.root,r),ref:t},l))})),UA=FA;function jA(e){return(0,fP.ZP)("MuiPopover",e)}(0,hP.Z)("MuiPopover",["root","paper"]);const zA=["onEntering"],VA=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],BA=["slotProps"];function qA(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function ZA(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function WA(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?"".concat(e,"px"):e)).join(" ")}function HA(e){return"function"===typeof e?e():e}const KA=(0,VN.ZP)(EP,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),GA=(0,VN.ZP)(UA,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),QA=r.forwardRef((function(e,t){var n,i,o;const s=(0,BN.Z)({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:f,container:p,elevation:m=8,marginThreshold:g=16,open:v,PaperProps:y={},slots:_,slotProps:b,transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:S=RA,transitionDuration:k="auto",TransitionProps:{onEntering:E}={},disableScrollLock:I=!1}=s,T=(0,dN.Z)(s.TransitionProps,zA),C=(0,dN.Z)(s,VA),x=null!=(n=null==b?void 0:b.paper)?n:y,N=r.useRef(),P=(0,aP.Z)(N,x.ref),R=(0,hN.Z)({},s,{anchorOrigin:c,anchorReference:d,elevation:m,marginThreshold:g,externalPaperSlotProps:x,transformOrigin:w,TransitionComponent:S,transitionDuration:k,TransitionProps:T}),A=(e=>{const{classes:t}=e;return(0,AN.Z)({root:["root"],paper:["paper"]},jA,t)})(R),O=r.useCallback((()=>{if("anchorPosition"===d)return u;const e=HA(l),t=(e&&1===e.nodeType?e:(0,aA.Z)(N.current).body).getBoundingClientRect();return{top:t.top+qA(t,c.vertical),left:t.left+ZA(t,c.horizontal)}}),[l,c.horizontal,c.vertical,u,d]),D=r.useCallback((e=>({vertical:qA(e,w.vertical),horizontal:ZA(e,w.horizontal)})),[w.horizontal,w.vertical]),L=r.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=D(t);if("none"===d)return{top:null,left:null,transformOrigin:WA(n)};const r=O();let i=r.top-n.vertical,o=r.left-n.horizontal;const s=i+t.height,a=o+t.width,c=(0,EA.Z)(HA(l)),u=c.innerHeight-g,h=c.innerWidth-g;if(null!==g&&i<g){const e=i-g;i-=e,n.vertical+=e}else if(null!==g&&s>u){const e=s-u;i-=e,n.vertical+=e}if(null!==g&&o<g){const e=o-g;o-=e,n.horizontal+=e}else if(a>h){const e=a-h;o-=e,n.horizontal+=e}return{top:"".concat(Math.round(i),"px"),left:"".concat(Math.round(o),"px"),transformOrigin:WA(n)}}),[l,d,O,D,g]),[M,F]=r.useState(v),U=r.useCallback((()=>{const e=N.current;if(!e)return;const t=L(e);null!==t.top&&(e.style.top=t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,F(!0)}),[L]);r.useEffect((()=>(I&&window.addEventListener("scroll",U),()=>window.removeEventListener("scroll",U))),[l,I,U]);r.useEffect((()=>{v&&U()})),r.useImperativeHandle(a,(()=>v?{updatePosition:()=>{U()}}:null),[v,U]),r.useEffect((()=>{if(!v)return;const e=(0,kA.Z)((()=>{U()})),t=(0,EA.Z)(l);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[l,v,U]);let j=k;"auto"!==k||S.muiSupportAuto||(j=void 0);const z=p||(l?(0,aA.Z)(HA(l)).body:void 0),V=null!=(i=null==_?void 0:_.root)?i:KA,B=null!=(o=null==_?void 0:_.paper)?o:GA,q=_N({elementType:B,externalSlotProps:(0,hN.Z)({},x,{style:M?x.style:(0,hN.Z)({},x.style,{opacity:0})}),additionalProps:{elevation:m,ref:P},ownerState:R,className:(0,fN.Z)(A.paper,null==x?void 0:x.className)}),Z=_N({elementType:V,externalSlotProps:(null==b?void 0:b.root)||{},externalForwardedProps:C,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:z,open:v},ownerState:R,className:(0,fN.Z)(A.root,f)}),{slotProps:W}=Z,H=(0,dN.Z)(Z,BA);return(0,ON.jsx)(V,(0,hN.Z)({},H,!mN(V)&&{slotProps:W,disableScrollLock:I},{children:(0,ON.jsx)(S,(0,hN.Z)({appear:!0,in:v,onEntering:(e,t)=>{E&&E(e,t),U()},onExited:()=>{F(!1)},timeout:j},T,{children:(0,ON.jsx)(B,(0,hN.Z)({},q,{children:h}))}))}))})),YA=QA;function $A(e){return(0,fP.ZP)("MuiMenu",e)}(0,hP.Z)("MuiMenu",["root","paper","list"]);const JA=["onEntering"],XA=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],eO={vertical:"top",horizontal:"right"},tO={vertical:"top",horizontal:"left"},nO=(0,VN.ZP)(YA,{shouldForwardProp:e=>(0,cR.Z)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),rO=(0,VN.ZP)(GA,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),iO=(0,VN.ZP)(SA,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),oO=r.forwardRef((function(e,t){var n,i;const o=(0,BN.Z)({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:f={},PopoverClasses:p,transitionDuration:m="auto",TransitionProps:{onEntering:g}={},variant:v="selectedMenu",slots:y={},slotProps:_={}}=o,b=(0,dN.Z)(o.TransitionProps,JA),w=(0,dN.Z)(o,XA),S=(()=>{const e=r.useContext(lA);return null!=e&&e})(),k=(0,hN.Z)({},o,{autoFocus:s,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:f,transitionDuration:m,TransitionProps:b,variant:v}),E=(e=>{const{classes:t}=e;return(0,AN.Z)({root:["root"],paper:["paper"],list:["list"]},$A,t)})(k),I=s&&!c&&h,T=r.useRef(null);let C=-1;r.Children.map(a,((e,t)=>{r.isValidElement(e)&&(e.props.disabled||("selectedMenu"===v&&e.props.selected||-1===C)&&(C=t))}));const x=null!=(n=y.paper)?n:rO,N=null!=(i=_.paper)?i:f,P=_N({elementType:y.root,externalSlotProps:_.root,ownerState:k,className:[E.root,l]}),R=_N({elementType:x,externalSlotProps:N,ownerState:k,className:E.paper});return(0,ON.jsx)(nO,(0,hN.Z)({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?eO:tO,slots:{paper:x,root:y.root},slotProps:{root:P,paper:R},open:h,ref:t,transitionDuration:m,TransitionProps:(0,hN.Z)({onEntering:(e,t)=>{T.current&&T.current.adjustStyleForScrollbar(e,{direction:S?"rtl":"ltr"}),g&&g(e,t)}},b),ownerState:k},w,{classes:p,children:(0,ON.jsx)(iO,(0,hN.Z)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),d&&d(e,"tabKeyDown"))},actions:T,autoFocus:s&&(-1===C||c),autoFocusItem:I,variant:v},u,{className:(0,fN.Z)(E.list,u.className),children:a}))}))})),sO=oO;function aO(e){return(0,fP.ZP)("MuiNativeSelect",e)}const lO=(0,hP.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),cO=["className","disabled","error","IconComponent","inputRef","variant"],uO=e=>{let{ownerState:t,theme:n}=e;return(0,hN.Z)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,hN.Z)({},n.vars?{backgroundColor:"rgba(".concat(n.vars.palette.common.onBackgroundChannel," / 0.05)")}:{backgroundColor:"light"===n.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},["&.".concat(lO.disabled)]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===t.variant&&{"&&&":{paddingRight:32}},"outlined"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}})},dO=(0,VN.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:cR.Z,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{["&.".concat(lO.multiple)]:t.multiple}]}})(uO),hO=e=>{let{ownerState:t,theme:n}=e;return(0,hN.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,["&.".concat(lO.disabled)]:{color:(n.vars||n).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},"filled"===t.variant&&{right:7},"outlined"===t.variant&&{right:7})},fO=(0,VN.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,HP.Z)(n.variant))],n.open&&t.iconOpen]}})(hO),pO=r.forwardRef((function(e,t){const{className:n,disabled:i,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=e,c=(0,dN.Z)(e,cO),u=(0,hN.Z)({},e,{disabled:i,variant:l,error:o}),d=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat((0,HP.Z)(n)),o&&"iconOpen",r&&"disabled"]};return(0,AN.Z)(a,aO,t)})(u);return(0,ON.jsxs)(r.Fragment,{children:[(0,ON.jsx)(dO,(0,hN.Z)({ownerState:u,className:(0,fN.Z)(d.select,n),disabled:i,ref:a||t},c)),e.multiple?null:(0,ON.jsx)(fO,{as:s,ownerState:u,className:d.icon})]})})),mO=pO;var gO=n(7995),vO=n(9552);function yO(e){return(0,fP.ZP)("MuiSelect",e)}const _O=(0,hP.Z)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var bO;const wO=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],SO=(0,VN.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["&.".concat(_O.select)]:t.select},{["&.".concat(_O.select)]:t[n.variant]},{["&.".concat(_O.error)]:t.error},{["&.".concat(_O.multiple)]:t.multiple}]}})(uO,{["&.".concat(_O.select)]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),kO=(0,VN.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t["icon".concat((0,HP.Z)(n.variant))],n.open&&t.iconOpen]}})(hO),EO=(0,VN.ZP)("input",{shouldForwardProp:e=>(0,gO.Z)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function IO(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function TO(e){return null==e||"string"===typeof e&&!e.trim()}const CO=r.forwardRef((function(e,t){var n;const{"aria-describedby":i,"aria-label":o,autoFocus:s,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:f,error:p=!1,IconComponent:m,inputRef:g,labelId:v,MenuProps:y={},multiple:_,name:b,onBlur:w,onChange:S,onClose:k,onFocus:E,onOpen:I,open:T,readOnly:C,renderValue:x,SelectDisplayProps:N={},tabIndex:P,value:R,variant:A="standard"}=e,O=(0,dN.Z)(e,wO),[D,L]=(0,vO.Z)({controlled:R,default:d,name:"Select"}),[M,F]=(0,vO.Z)({controlled:T,default:u,name:"Select"}),U=r.useRef(null),j=r.useRef(null),[z,V]=r.useState(null),{current:B}=r.useRef(null!=T),[q,Z]=r.useState(),W=(0,aP.Z)(t,g),H=r.useCallback((e=>{j.current=e,e&&V(e)}),[]),K=null==z?void 0:z.parentNode;r.useImperativeHandle(W,(()=>({focus:()=>{j.current.focus()},node:U.current,value:D})),[D]),r.useEffect((()=>{u&&M&&z&&!B&&(Z(a?null:K.clientWidth),j.current.focus())}),[z,a]),r.useEffect((()=>{s&&j.current.focus()}),[s]),r.useEffect((()=>{if(!v)return;const e=(0,aA.Z)(j.current).getElementById(v);if(e){const t=()=>{getSelection().isCollapsed&&j.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[v]);const G=(e,t)=>{e?I&&I(t):k&&k(t),B||(Z(a?null:K.clientWidth),F(e))},Q=r.Children.toArray(l),Y=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(_){n=Array.isArray(D)?D.slice():[];const t=D.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),D!==n&&(L(n),S)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:b}}),S(i,e)}_||G(!1,t)}},$=null!==z&&M;let J,X;delete O["aria-invalid"];const ee=[];let te=!1,ne=!1;(JP({value:D})||f)&&(x?J=x(D):te=!0);const re=Q.map((e=>{if(!r.isValidElement(e))return null;let t;if(_){if(!Array.isArray(D))throw new Error((0,FP.Z)(2));t=D.some((t=>IO(t,e.props.value))),t&&te&&ee.push(e.props.children)}else t=IO(D,e.props.value),t&&te&&(X=e.props.children);return t&&(ne=!0),r.cloneElement(e,{"aria-selected":t?"true":"false",onClick:Y(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));te&&(J=_?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):X);let ie,oe=q;!a&&B&&z&&(oe=K.clientWidth),ie="undefined"!==typeof P?P:h?null:0;const se=N.id||(b?"mui-component-select-".concat(b):void 0),ae=(0,hN.Z)({},e,{variant:A,value:D,open:$,error:p}),le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon","icon".concat((0,HP.Z)(n)),o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return(0,AN.Z)(a,yO,t)})(ae),ce=(0,hN.Z)({},y.PaperProps,null==(n=y.slotProps)?void 0:n.paper),ue=(0,LP.Z)();return(0,ON.jsxs)(r.Fragment,{children:[(0,ON.jsx)(SO,(0,hN.Z)({ref:H,tabIndex:ie,role:"combobox","aria-controls":ue,"aria-disabled":h?"true":void 0,"aria-expanded":$?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[v,se].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:e=>{if(!C){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),G(!0,e))}},onMouseDown:h||C?null:e=>{0===e.button&&(e.preventDefault(),j.current.focus(),G(!0,e))},onBlur:e=>{!$&&w&&(Object.defineProperty(e,"target",{writable:!0,value:{value:D,name:b}}),w(e))},onFocus:E},N,{ownerState:ae,className:(0,fN.Z)(N.className,le.select,c),id:se,children:TO(J)?bO||(bO=(0,ON.jsx)("span",{className:"notranslate",children:"\u200b"})):J})),(0,ON.jsx)(EO,(0,hN.Z)({"aria-invalid":p,value:Array.isArray(D)?D.join(","):D,name:b,ref:U,"aria-hidden":!0,onChange:e=>{const t=Q.find((t=>t.props.value===e.target.value));void 0!==t&&(L(t.props.value),S&&S(e,t))},tabIndex:-1,disabled:h,className:le.nativeInput,autoFocus:s,ownerState:ae},O)),(0,ON.jsx)(kO,{as:m,className:le.icon,ownerState:ae}),(0,ON.jsx)(sO,(0,hN.Z)({id:"menu-".concat(b||""),anchorEl:K,open:$,onClose:e=>{G(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:(0,hN.Z)({"aria-labelledby":v,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:ue},y.MenuListProps),slotProps:(0,hN.Z)({},y.slotProps,{paper:(0,hN.Z)({},ce,{style:(0,hN.Z)({minWidth:oe},null!=ce?ce.style:null)})}),children:re}))]})})),xO=CO;const NO=(0,n(6189).Z)((0,ON.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),PO=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],RO=["root"],AO={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>(0,cR.Z)(e)&&"variant"!==e,slot:"Root"},OO=(0,VN.ZP)(gR,AO)(""),DO=(0,VN.ZP)(LR,AO)(""),LO=(0,VN.ZP)(kR,AO)(""),MO=r.forwardRef((function(e,t){const n=(0,BN.Z)({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=NO,id:d,input:h,inputProps:f,label:p,labelId:m,MenuProps:g,multiple:v=!1,native:y=!1,onClose:_,onOpen:b,open:w,renderValue:S,SelectDisplayProps:k,variant:E="outlined"}=n,I=(0,dN.Z)(n,PO),T=y?mO:xO,C=qP({props:n,muiFormControl:WP(),states:["variant","error"]}),x=C.variant||E,N=(0,hN.Z)({},n,{variant:x,classes:s}),P=(e=>{const{classes:t}=e;return t})(N),R=(0,dN.Z)(P,RO),A=h||{standard:(0,ON.jsx)(OO,{ownerState:N}),outlined:(0,ON.jsx)(DO,{label:p,ownerState:N}),filled:(0,ON.jsx)(LO,{ownerState:N})}[x],O=(0,aP.Z)(t,A.ref);return(0,ON.jsx)(r.Fragment,{children:r.cloneElement(A,(0,hN.Z)({inputComponent:T,inputProps:(0,hN.Z)({children:o,error:C.error,IconComponent:u,variant:x,type:void 0,multiple:v},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:g,onClose:_,onOpen:b,open:w,renderValue:S,SelectDisplayProps:(0,hN.Z)({id:d},k)},f,{classes:f?(0,MP.Z)(R,f.classes):R},h?h.props.inputProps:{})},(v&&y||c)&&"outlined"===x?{notched:!0}:{},{ref:O,className:(0,fN.Z)(A.props.className,a,P.root)},!h&&{variant:x},I))})}));MO.muiName="Select";const FO=MO;function UO(e){return(0,fP.ZP)("MuiTextField",e)}(0,hP.Z)("MuiTextField",["root"]);const jO=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],zO={standard:gR,filled:kR,outlined:LR},VO=(0,VN.ZP)(XR,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),BO=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:s,color:a="primary",defaultValue:l,disabled:c=!1,error:u=!1,FormHelperTextProps:d,fullWidth:h=!1,helperText:f,id:p,InputLabelProps:m,inputProps:g,InputProps:v,inputRef:y,label:_,maxRows:b,minRows:w,multiline:S=!1,name:k,onBlur:E,onChange:I,onFocus:T,placeholder:C,required:x=!1,rows:N,select:P=!1,SelectProps:R,type:A,value:O,variant:D="outlined"}=n,L=(0,dN.Z)(n,jO),M=(0,hN.Z)({},n,{autoFocus:i,color:a,disabled:c,error:u,fullWidth:h,multiline:S,required:x,select:P,variant:D}),F=(e=>{const{classes:t}=e;return(0,AN.Z)({root:["root"]},UO,t)})(M);const U={};"outlined"===D&&(m&&"undefined"!==typeof m.shrink&&(U.notched=m.shrink),U.label=_),P&&(R&&R.native||(U.id=void 0),U["aria-describedby"]=void 0);const j=(0,LP.Z)(p),z=f&&j?"".concat(j,"-helper-text"):void 0,V=_&&j?"".concat(j,"-label"):void 0,B=zO[D],q=(0,ON.jsx)(B,(0,hN.Z)({"aria-describedby":z,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:h,multiline:S,name:k,rows:N,maxRows:b,minRows:w,type:A,value:O,id:j,inputRef:y,onBlur:E,onChange:I,onFocus:T,placeholder:C,inputProps:g},U,v));return(0,ON.jsxs)(VO,(0,hN.Z)({className:(0,fN.Z)(F.root,s),disabled:c,error:u,fullWidth:h,ref:t,required:x,color:a,variant:D,ownerState:M},L,{children:[null!=_&&""!==_&&(0,ON.jsx)(KR,(0,hN.Z)({htmlFor:j,id:V},m,{children:_})),P?(0,ON.jsx)(FO,(0,hN.Z)({"aria-describedby":z,id:j,labelId:V,value:O,input:q},R,{children:o})):q,f&&(0,ON.jsx)(sA,(0,hN.Z)({id:z},d,{children:f}))]}))})),qO=BO;var ZO=n(9683),WO=n(6943);function HO(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function KO(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function GO(e,t,n){return null!=n[t]?n[t]:e.props[t]}function QO(e,t,n){var i=KO(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,r.isValidElement)(a)){var l=s in t,c=s in i,u=t[s],d=(0,r.isValidElement)(u)&&!u.props.in;!c||l&&!d?c||!l||d?c&&l&&(0,r.isValidElement)(u)&&(o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:GO(a,"exit",e),enter:GO(a,"enter",e)})):o[s]=(0,r.cloneElement)(a,{in:!1}):o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:GO(a,"exit",e),enter:GO(a,"enter",e)})}})),o}var YO=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},$O=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}ZN(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,o=t.children,s=t.handleExited;return{children:t.firstRender?(n=e,i=s,KO(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:GO(e,"appear",n),enter:GO(e,"enter",n),exit:GO(e,"exit",n)})}))):QO(e,o,s),firstRender:!1}},n.handleExited=function(e,t){var n=KO(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,hN.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,i=(0,dN.Z)(e,["component","childFactory"]),o=this.state.contextValue,s=YO(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===t?r.createElement(HN.Provider,{value:o},s):r.createElement(HN.Provider,{value:o},r.createElement(t,i,s))},t}(r.Component);$O.propTypes={},$O.defaultProps={component:"div",childFactory:function(e){return e}};const JO=$O;var XO=n(2554);const eD=function(e){const{className:t,classes:n,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:l,onExited:c,timeout:u}=e,[d,h]=r.useState(!1),f=(0,fN.Z)(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),p={width:a,height:a,top:-a/2+s,left:-a/2+o},m=(0,fN.Z)(n.child,d&&n.childLeaving,i&&n.childPulsate);return l||d||h(!0),r.useEffect((()=>{if(!l&&null!=c){const e=setTimeout(c,u);return()=>{clearTimeout(e)}}}),[c,l,u]),(0,ON.jsx)("span",{className:f,style:p,children:(0,ON.jsx)("span",{className:m})})};const tD=(0,hP.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var nD,rD,iD,oD;const sD=["center","classes","className"];let aD,lD,cD,uD;const dD=(0,XO.F4)(aD||(aD=nD||(nD=HO(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),hD=(0,XO.F4)(lD||(lD=rD||(rD=HO(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),fD=(0,XO.F4)(cD||(cD=iD||(iD=HO(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),pD=(0,VN.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),mD=(0,VN.ZP)(eD,{name:"MuiTouchRipple",slot:"Ripple"})(uD||(uD=oD||(oD=HO(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),tD.rippleVisible,dD,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),tD.ripplePulsate,(e=>{let{theme:t}=e;return t.transitions.duration.shorter}),tD.child,tD.childLeaving,hD,550,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}),tD.childPulsate,fD,(e=>{let{theme:t}=e;return t.transitions.easing.easeInOut})),gD=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=n,a=(0,dN.Z)(n,sD),[l,c]=r.useState([]),u=r.useRef(0),d=r.useRef(null);r.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[l]);const h=r.useRef(!1),f=(0,IA.Z)(),p=r.useRef(null),m=r.useRef(null),g=r.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:i,cb:s}=e;c((e=>[...e,(0,ON.jsx)(mD,{classes:{ripple:(0,fN.Z)(o.ripple,tD.ripple),rippleVisible:(0,fN.Z)(o.rippleVisible,tD.rippleVisible),ripplePulsate:(0,fN.Z)(o.ripplePulsate,tD.ripplePulsate),child:(0,fN.Z)(o.child,tD.child),childLeaving:(0,fN.Z)(o.childLeaving,tD.childLeaving),childPulsate:(0,fN.Z)(o.childPulsate,tD.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},u.current)])),u.current+=1,d.current=s}),[o]),v=r.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:r=!1,center:o=i||t.pulsate,fakeElement:s=!1}=t;if("mousedown"===(null==e?void 0:e.type)&&h.current)return void(h.current=!1);"touchstart"===(null==e?void 0:e.type)&&(h.current=!0);const a=s?null:m.current,l=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let c,u,d;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(l.width/2),u=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;c=Math.round(t-l.left),u=Math.round(n-l.top)}if(o)d=Math.sqrt((2*l.width**2+l.height**2)/3),d%2===0&&(d+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-c),c)+2,t=2*Math.max(Math.abs((a?a.clientHeight:0)-u),u)+2;d=Math.sqrt(e**2+t**2)}null!=e&&e.touches?null===p.current&&(p.current=()=>{g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})},f.start(80,(()=>{p.current&&(p.current(),p.current=null)}))):g({pulsate:r,rippleX:c,rippleY:u,rippleSize:d,cb:n})}),[i,g,f]),y=r.useCallback((()=>{v({},{pulsate:!0})}),[v]),_=r.useCallback(((e,t)=>{if(f.clear(),"touchend"===(null==e?void 0:e.type)&&p.current)return p.current(),p.current=null,void f.start(0,(()=>{_(e,t)}));p.current=null,c((e=>e.length>0?e.slice(1):e)),d.current=t}),[f]);return r.useImperativeHandle(t,(()=>({pulsate:y,start:v,stop:_})),[y,v,_]),(0,ON.jsx)(pD,(0,hN.Z)({className:(0,fN.Z)(tD.root,o.root,s),ref:m},a,{children:(0,ON.jsx)(JO,{component:null,exit:!0,children:l})}))})),vD=gD;function yD(e){return(0,fP.ZP)("MuiButtonBase",e)}const _D=(0,hP.Z)("MuiButtonBase",["root","disabled","focusVisible"]),bD=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],wD=(0,VN.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(_D.disabled)]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),SD=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:m,onContextMenu:g,onDragLeave:v,onFocus:y,onFocusVisible:_,onKeyDown:b,onKeyUp:w,onMouseDown:S,onMouseLeave:k,onMouseUp:E,onTouchEnd:I,onTouchMove:T,onTouchStart:C,tabIndex:x=0,TouchRippleProps:N,touchRippleRef:P,type:R}=n,A=(0,dN.Z)(n,bD),O=r.useRef(null),D=r.useRef(null),L=(0,aP.Z)(D,P),{isFocusVisibleRef:M,onFocus:F,onBlur:U,ref:j}=(0,WO.Z)(),[z,V]=r.useState(!1);c&&z&&V(!1),r.useImperativeHandle(i,(()=>({focusVisible:()=>{V(!0),O.current.focus()}})),[]);const[B,q]=r.useState(!1);r.useEffect((()=>{q(!0)}),[]);const Z=B&&!u&&!c;function W(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return(0,ZO.Z)((r=>{t&&t(r);return!n&&D.current&&D.current[e](r),!0}))}r.useEffect((()=>{z&&h&&!u&&B&&D.current.pulsate()}),[u,h,z,B]);const H=W("start",S),K=W("stop",g),G=W("stop",v),Q=W("stop",E),Y=W("stop",(e=>{z&&e.preventDefault(),k&&k(e)})),$=W("start",C),J=W("stop",I),X=W("stop",T),ee=W("stop",(e=>{U(e),!1===M.current&&V(!1),p&&p(e)}),!1),te=(0,ZO.Z)((e=>{O.current||(O.current=e.currentTarget),F(e),!0===M.current&&(V(!0),_&&_(e)),y&&y(e)})),ne=()=>{const e=O.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},re=r.useRef(!1),ie=(0,ZO.Z)((e=>{h&&!re.current&&z&&D.current&&" "===e.key&&(re.current=!0,D.current.stop(e,(()=>{D.current.start(e)}))),e.target===e.currentTarget&&ne()&&" "===e.key&&e.preventDefault(),b&&b(e),e.target===e.currentTarget&&ne()&&"Enter"===e.key&&!c&&(e.preventDefault(),m&&m(e))})),oe=(0,ZO.Z)((e=>{h&&" "===e.key&&D.current&&z&&!e.defaultPrevented&&(re.current=!1,D.current.stop(e,(()=>{D.current.pulsate(e)}))),w&&w(e),m&&e.target===e.currentTarget&&ne()&&" "===e.key&&!e.defaultPrevented&&m(e)}));let se=l;"button"===se&&(A.href||A.to)&&(se=f);const ae={};"button"===se?(ae.type=void 0===R?"button":R,ae.disabled=c):(A.href||A.to||(ae.role="button"),c&&(ae["aria-disabled"]=c));const le=(0,aP.Z)(t,j,O);const ce=(0,hN.Z)({},n,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:x,focusVisible:z}),ue=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o={root:["root",t&&"disabled",n&&"focusVisible"]},s=(0,AN.Z)(o,yD,i);return n&&r&&(s.root+=" ".concat(r)),s})(ce);return(0,ON.jsxs)(wD,(0,hN.Z)({as:se,className:(0,fN.Z)(ue.root,a),ownerState:ce,onBlur:ee,onClick:m,onContextMenu:K,onFocus:te,onKeyDown:ie,onKeyUp:oe,onMouseDown:H,onMouseLeave:Y,onMouseUp:Q,onDragLeave:G,onTouchEnd:J,onTouchMove:X,onTouchStart:$,ref:le,tabIndex:c?-1:x,type:R},ae,A,{children:[s,Z?(0,ON.jsx)(vD,(0,hN.Z)({ref:L,center:o},N)):null]}))})),kD=SD;const ED=(0,hP.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const ID=(0,hP.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);const TD=(0,hP.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function CD(e){return(0,fP.ZP)("MuiMenuItem",e)}const xD=(0,hP.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ND=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],PD=(0,VN.ZP)(kD,{shouldForwardProp:e=>(0,cR.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(xD.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,AA.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(xD.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,AA.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(xD.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,AA.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,AA.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(xD.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(xD.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(ED.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(ED.inset)]:{marginLeft:52},["& .".concat(TD.root)]:{marginTop:0,marginBottom:0},["& .".concat(TD.inset)]:{paddingLeft:36},["& .".concat(ID.root)]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,hN.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(ID.root," svg")]:{fontSize:"1.25rem"}}))})),RD=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=n,f=(0,dN.Z)(n,ND),p=r.useContext(cA),m=r.useMemo((()=>({dense:s||p.dense||!1,disableGutters:l})),[p.dense,s,l]),g=r.useRef(null);(0,KP.Z)((()=>{i&&g.current&&g.current.focus()}),[i]);const v=(0,hN.Z)({},n,{dense:m.dense,divider:a,disableGutters:l}),y=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=e,a={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},l=(0,AN.Z)(a,CD,s);return(0,hN.Z)({},s,l)})(n),_=(0,aP.Z)(g,t);let b;return n.disabled||(b=void 0!==d?d:-1),(0,ON.jsx)(cA.Provider,{value:m,children:(0,ON.jsx)(PD,(0,hN.Z)({ref:_,role:u,tabIndex:b,component:o,focusVisibleClassName:(0,fN.Z)(y.focusVisible,c),className:(0,fN.Z)(y.root,h)},f,{ownerState:v,classes:y}))})})),AD=RD;var OD=n(8809);const DD=["ownerState"],LD=["variants"],MD=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function FD(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const UD=(0,OD.Z)(),jD=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function zD(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function VD(e){return e?(t,n)=>n[e]:null}function BD(e,t){let{ownerState:n}=t,r=(0,dN.Z)(t,DD);const i="function"===typeof e?e((0,hN.Z)({ownerState:n},r)):e;if(Array.isArray(i))return i.flatMap((e=>BD(e,(0,hN.Z)({ownerState:n},r))));if(i&&"object"===typeof i&&Array.isArray(i.variants)){const{variants:e=[]}=i;let t=(0,dN.Z)(i,LD);return e.forEach((e=>{let i=!0;"function"===typeof e.props?i=e.props((0,hN.Z)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(i=!1)})),i&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,hN.Z)({ownerState:n},r,n)):e.style))})),t}return i}const qD=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=UD,rootShouldForwardProp:r=FD,slotShouldForwardProp:i=FD}=e,o=e=>(0,TP.Z)((0,hN.Z)({},e,{theme:zD((0,hN.Z)({},e,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,IP.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=VD(jD(l))}=s,h=(0,dN.Z)(s,MD),f=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,p=u||!1;let m=FD;"Root"===l||"root"===l?m=r:l?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=(0,IP.default)(e,(0,hN.Z)({shouldForwardProp:m,label:undefined},h)),v=e=>"function"===typeof e&&e.__emotion_real!==e||(0,MP.P)(e)?r=>BD(e,(0,hN.Z)({},r,{theme:zD({theme:r.theme,defaultTheme:n,themeId:t})})):e,y=function(r){let i=v(r);for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];const u=l?l.map(v):[];a&&d&&u.push((e=>{const r=zD((0,hN.Z)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={};return Object.entries(i).forEach((t=>{let[n,i]=t;o[n]=BD(i,(0,hN.Z)({},e,{theme:r}))})),d(e,o)})),a&&!f&&u.push((e=>{var r;const i=zD((0,hN.Z)({},e,{defaultTheme:n,themeId:t}));return BD({variants:null==i||null==(r=i.components)||null==(r=r[a])?void 0:r.variants},(0,hN.Z)({},e,{theme:i}))})),p||u.push(o);const h=u.length-l.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...u);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(y.withConfig=g.withConfig),y}}(),ZD=qD;var WD=n(7078),HD=n(1184),KD=n(5682);const GD=["component","direction","spacing","divider","children","className","useFlexGap"],QD=(0,OD.Z)(),YD=ZD("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function $D(e){return(0,WD.Z)({props:e,name:"MuiStack",defaultTheme:QD})}function JD(e,t){const n=r.Children.toArray(e).filter(Boolean);return n.reduce(((e,i,o)=>(e.push(i),o<n.length-1&&e.push(r.cloneElement(t,{key:"separator-".concat(o)})),e)),[])}const XD=e=>{let{ownerState:t,theme:n}=e,r=(0,hN.Z)({display:"flex",flexDirection:"column"},(0,HD.k9)({theme:n},(0,HD.P$)({values:t.direction,breakpoints:n.breakpoints.values}),(e=>({flexDirection:e}))));if(t.spacing){const e=(0,KD.hB)(n),i=Object.keys(n.breakpoints.values).reduce(((e,n)=>(("object"===typeof t.spacing&&null!=t.spacing[n]||"object"===typeof t.direction&&null!=t.direction[n])&&(e[n]=!0),e)),{}),o=(0,HD.P$)({values:t.direction,base:i}),s=(0,HD.P$)({values:t.spacing,base:i});"object"===typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const r=t>0?o[n[t-1]]:"column";o[e]=r}}));const a=(n,r)=>{return t.useFlexGap?{gap:(0,KD.NA)(e,n)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat((i=r?o[r]:t.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i]))]:(0,KD.NA)(e,n)}};var i};r=(0,MP.Z)(r,(0,HD.k9)({theme:n},s,a))}return r=(0,HD.dt)(n.breakpoints,r),r};const eL=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=YD,useThemeProps:n=$D,componentName:i="MuiStack"}=e,o=t(XD),s=r.forwardRef((function(e,t){const r=n(e),s=(0,CP.Z)(r),{component:a="div",direction:l="column",spacing:c=0,divider:u,children:d,className:h,useFlexGap:f=!1}=s,p=(0,dN.Z)(s,GD),m={direction:l,spacing:c,useFlexGap:f},g=(0,AN.Z)({root:["root"]},(e=>(0,fP.ZP)(i,e)),{});return(0,ON.jsx)(o,(0,hN.Z)({as:a,ownerState:m,ref:t,className:(0,fN.Z)(g.root,h)},p,{children:u?JD(d,u):d}))}));return s}({createStyledComponent:(0,VN.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,BN.Z)({props:e,name:"MuiStack"})}),tL=eL;function nL(e){return(0,fP.ZP)("MuiTypography",e)}(0,hP.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const rL=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],iL=(0,VN.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,HP.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({margin:0},"inherit"===n.variant&&{font:"inherit"},"inherit"!==n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),oL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},sL={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},aL=r.forwardRef((function(e,t){const n=(0,BN.Z)({props:e,name:"MuiTypography"}),r=(e=>sL[e]||e)(n.color),i=(0,CP.Z)((0,hN.Z)({},n,{color:r})),{align:o="inherit",className:s,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:h=oL}=i,f=(0,dN.Z)(i,rL),p=(0,hN.Z)({},i,{align:o,color:r,className:s,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:h}),m=a||(u?"p":h[d]||oL[d])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e,a={root:["root",o,"inherit"!==e.align&&"align".concat((0,HP.Z)(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,AN.Z)(a,nL,s)})(p);return(0,ON.jsx)(iL,(0,hN.Z)({as:m,ref:t,ownerState:p,className:(0,fN.Z)(g.root,s)},f))})),lL=aL;function cL(e){return(0,fP.ZP)("MuiFormControlLabel",e)}const uL=(0,hP.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),dL=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],hL=(0,VN.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{["& .".concat(uL.label)]:t.label},t.root,t["labelPlacement".concat((0,HP.Z)(n.labelPlacement))]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,hN.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(uL.disabled)]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(uL.label)]:{["&.".concat(uL.disabled)]:{color:(t.vars||t).palette.text.disabled}}})})),fL=(0,VN.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})((e=>{let{theme:t}=e;return{["&.".concat(uL.error)]:{color:(t.vars||t).palette.error.main}}})),pL=r.forwardRef((function(e,t){var n,i;const o=(0,BN.Z)({props:e,name:"MuiFormControlLabel"}),{className:s,componentsProps:a={},control:l,disabled:c,disableTypography:u,label:d,labelPlacement:h="end",required:f,slotProps:p={}}=o,m=(0,dN.Z)(o,dL),g=WP(),v=null!=(n=null!=c?c:l.props.disabled)?n:null==g?void 0:g.disabled,y=null!=f?f:l.props.required,_={disabled:v,required:y};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof l.props[e]&&"undefined"!==typeof o[e]&&(_[e]=o[e])}));const b=qP({props:o,muiFormControl:g,states:["error"]}),w=(0,hN.Z)({},o,{disabled:v,labelPlacement:h,required:y,error:b.error}),S=(e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e,s={root:["root",n&&"disabled","labelPlacement".concat((0,HP.Z)(r)),i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return(0,AN.Z)(s,cL,t)})(w),k=null!=(i=p.typography)?i:a.typography;let E=d;return null==E||E.type===lL||u||(E=(0,ON.jsx)(lL,(0,hN.Z)({component:"span"},k,{className:(0,fN.Z)(S.label,null==k?void 0:k.className),children:E}))),(0,ON.jsxs)(hL,(0,hN.Z)({className:(0,fN.Z)(S.root,s),ownerState:w,ref:t},m,{children:[r.cloneElement(l,_),y?(0,ON.jsxs)(tL,{display:"block",children:[E,(0,ON.jsxs)(fL,{ownerState:w,"aria-hidden":!0,className:S.asterisk,children:["\u2009","*"]})]}):E]}))})),mL=pL;function gL(e){return(0,fP.ZP)("PrivateSwitchBase",e)}(0,hP.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const vL=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],yL=(0,VN.ZP)(kD)((e=>{let{ownerState:t}=e;return(0,hN.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),_L=(0,VN.ZP)("input",{shouldForwardProp:cR.Z})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),bL=r.forwardRef((function(e,t){const{autoFocus:n,checked:r,checkedIcon:i,className:o,defaultChecked:s,disabled:a,disableFocusRipple:l=!1,edge:c=!1,icon:u,id:d,inputProps:h,inputRef:f,name:p,onBlur:m,onChange:g,onFocus:v,readOnly:y,required:_=!1,tabIndex:b,type:w,value:S}=e,k=(0,dN.Z)(e,vL),[E,I]=(0,vO.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),T=WP();let C=a;T&&"undefined"===typeof C&&(C=T.disabled);const x="checkbox"===w||"radio"===w,N=(0,hN.Z)({},e,{checked:E,disabled:C,disableFocusRipple:l,edge:c}),P=(e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&"edge".concat((0,HP.Z)(i))],input:["input"]};return(0,AN.Z)(o,gL,t)})(N);return(0,ON.jsxs)(yL,(0,hN.Z)({component:"span",className:(0,fN.Z)(P.root,o),centerRipple:!0,focusRipple:!l,disabled:C,tabIndex:null,role:void 0,onFocus:e=>{v&&v(e),T&&T.onFocus&&T.onFocus(e)},onBlur:e=>{m&&m(e),T&&T.onBlur&&T.onBlur(e)},ownerState:N,ref:t},k,{children:[(0,ON.jsx)(_L,(0,hN.Z)({autoFocus:n,checked:r,defaultChecked:s,className:P.input,disabled:C,id:x?d:void 0,name:p,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;I(t),g&&g(e,t)},readOnly:y,ref:f,required:_,ownerState:N,tabIndex:b,type:w},"checkbox"===w&&void 0===S?{}:{value:S},h)),E?i:u]}))})),wL=bL;function SL(e){return(0,fP.ZP)("MuiSwitch",e)}const kL=(0,hP.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),EL=["className","color","edge","size","sx"],IL=BN.Z,TL=(0,VN.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t["edge".concat((0,HP.Z)(n.edge))],t["size".concat((0,HP.Z)(n.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(kL.thumb)]:{width:16,height:16},["& .".concat(kL.switchBase)]:{padding:4,["&.".concat(kL.checked)]:{transform:"translateX(16px)"}}}}]}),CL=(0,VN.ZP)(wL,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{["& .".concat(kL.input)]:t.input},"default"!==n.color&&t["color".concat((0,HP.Z)(n.color))]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(kL.checked)]:{transform:"translateX(20px)"},["&.".concat(kL.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(kL.checked," + .").concat(kL.track)]:{opacity:.5},["&.".concat(kL.disabled," + .").concat(kL.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(kL.input)]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,AA.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[n]=e;return{props:{color:n},style:{["&.".concat(kL.checked)]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,AA.Fq)(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(kL.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(n,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,AA.$n)(t.palette[n].main,.62):(0,AA._j)(t.palette[n].main,.55))}},["&.".concat(kL.checked," + .").concat(kL.track)]:{backgroundColor:(t.vars||t).palette[n].main}}}}))]}})),xL=(0,VN.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),NL=(0,VN.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),PL=r.forwardRef((function(e,t){const n=IL({props:e,name:"MuiSwitch"}),{className:r,color:i="primary",edge:o=!1,size:s="medium",sx:a}=n,l=(0,dN.Z)(n,EL),c=(0,hN.Z)({},n,{color:i,edge:o,size:s}),u=(e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:s}=e,a={root:["root",n&&"edge".concat((0,HP.Z)(n)),"size".concat((0,HP.Z)(r))],switchBase:["switchBase","color".concat((0,HP.Z)(i)),o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,AN.Z)(a,SL,t);return(0,hN.Z)({},t,l)})(c),d=(0,ON.jsx)(NL,{className:u.thumb,ownerState:c});return(0,ON.jsxs)(TL,{className:(0,fN.Z)(u.root,r),sx:a,ownerState:c,children:[(0,ON.jsx)(CL,(0,hN.Z)({type:"checkbox",icon:d,checkedIcon:d,ref:t,ownerState:c},l,{classes:(0,hN.Z)({},u,{root:u.switchBase})})),(0,ON.jsx)(xL,{className:u.track,ownerState:c})]})})),RL=PL;var AL=n(139);function OL(e){return(0,fP.ZP)("MuiButton",e)}const DL=(0,hP.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const LL=r.createContext({});const ML=r.createContext(void 0),FL=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],UL=e=>(0,hN.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),jL=(0,VN.ZP)(kD,{shouldForwardProp:e=>(0,cR.Z)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,HP.Z)(n.color))],t["size".concat((0,HP.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,HP.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((e=>{let{theme:t,ownerState:n}=e;var r,i;const o="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],s="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return(0,hN.Z)({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":(0,hN.Z)({textDecoration:"none",backgroundColor:t.vars?"rgba(".concat(t.vars.palette.text.primaryChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,AA.Fq)(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===n.variant&&"inherit"!==n.color&&{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,AA.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===n.variant&&"inherit"!==n.color&&{border:"1px solid ".concat((t.vars||t).palette[n.color].main),backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,AA.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===n.variant&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},"contained"===n.variant&&"inherit"!==n.color&&{backgroundColor:(t.vars||t).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[n.color].main}}),"&:active":(0,hN.Z)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[8]}),["&.".concat(DL.focusVisible)]:(0,hN.Z)({},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[6]}),["&.".concat(DL.disabled)]:(0,hN.Z)({color:(t.vars||t).palette.action.disabled},"outlined"===n.variant&&{border:"1px solid ".concat((t.vars||t).palette.action.disabledBackground)},"contained"===n.variant&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},"text"===n.variant&&{padding:"6px 8px"},"text"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main},"outlined"===n.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].main,border:t.vars?"1px solid rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):"1px solid ".concat((0,AA.Fq)(t.palette[n.color].main,.5))},"contained"===n.variant&&{color:t.vars?t.vars.palette.text.primary:null==(r=(i=t.palette).getContrastText)?void 0:r.call(i,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:o,boxShadow:(t.vars||t).shadows[2]},"contained"===n.variant&&"inherit"!==n.color&&{color:(t.vars||t).palette[n.color].contrastText,backgroundColor:(t.vars||t).palette[n.color].main},"inherit"===n.color&&{color:"inherit",borderColor:"currentColor"},"small"===n.size&&"text"===n.variant&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"text"===n.variant&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"outlined"===n.variant&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"outlined"===n.variant&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},"small"===n.size&&"contained"===n.variant&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},"large"===n.size&&"contained"===n.variant&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})}),(e=>{let{ownerState:t}=e;return t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},["&.".concat(DL.focusVisible)]:{boxShadow:"none"},"&:active":{boxShadow:"none"},["&.".concat(DL.disabled)]:{boxShadow:"none"}}})),zL=(0,VN.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t["iconSize".concat((0,HP.Z)(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,hN.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},UL(t))})),VL=(0,VN.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t["iconSize".concat((0,HP.Z)(n.size))]]}})((e=>{let{ownerState:t}=e;return(0,hN.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},UL(t))})),BL=r.forwardRef((function(e,t){const n=r.useContext(LL),i=r.useContext(ML),o=(0,AL.Z)(n,e),s=(0,BN.Z)({props:o,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:f=!1,endIcon:p,focusVisibleClassName:m,fullWidth:g=!1,size:v="medium",startIcon:y,type:_,variant:b="text"}=s,w=(0,dN.Z)(s,FL),S=(0,hN.Z)({},s,{color:l,component:c,disabled:d,disableElevation:h,disableFocusRipple:f,fullWidth:g,size:v,type:_,variant:b}),k=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=e,a={root:["root",o,"".concat(o).concat((0,HP.Z)(t)),"size".concat((0,HP.Z)(i)),"".concat(o,"Size").concat((0,HP.Z)(i)),"color".concat((0,HP.Z)(t)),n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon","iconSize".concat((0,HP.Z)(i))],endIcon:["icon","endIcon","iconSize".concat((0,HP.Z)(i))]},l=(0,AN.Z)(a,OL,s);return(0,hN.Z)({},s,l)})(S),E=y&&(0,ON.jsx)(zL,{className:k.startIcon,ownerState:S,children:y}),I=p&&(0,ON.jsx)(VL,{className:k.endIcon,ownerState:S,children:p}),T=i||"";return(0,ON.jsxs)(jL,(0,hN.Z)({ownerState:S,className:(0,fN.Z)(n.className,k.root,u,T),component:c,disabled:d,focusRipple:!f,focusVisibleClassName:(0,fN.Z)(k.focusVisible,m),ref:t,type:_},w,{classes:k,children:[E,a,I]}))})),qL=BL,ZL=e=>{let{open:t,handleClose:n,functionData:i}=e;const[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)((null===i||void 0===i?void 0:i.name)||""),[c,u]=(0,r.useState)((null===i||void 0===i?void 0:i.deviceId)||""),[d,h]=(0,r.useState)((null===i||void 0===i?void 0:i.action)||""),[f,p]=(0,r.useState)((null===i||void 0===i?void 0:i.webhookUrl)||""),[m,g]=(0,r.useState)((null===i||void 0===i?void 0:i.notificationEmail)||""),[v,y]=(0,r.useState)((null===i||void 0===i?void 0:i.state)||!1);(0,r.useEffect)((()=>{const e=(()=>{const e=localStorage.getItem("uid");return lN.collection("devices").where("uids","array-contains",e).onSnapshot((t=>{const n=t.docs.map((t=>{const n=t.data(),r=n.usersData.find((t=>t.uid===e));return{id:t.id,...n,name:r?r.name:null}})).filter((e=>null!==e.name));s(n)}))})();return()=>{e()}}),[]);return(0,ON.jsx)(EP,{open:t,onClose:n,children:(0,ON.jsxs)(DP,{className:"modalBox",children:[(0,ON.jsx)("h2",{className:"modalHeader",children:i?"Editar Fun\xe7\xe3o":"Adicionar Nova Fun\xe7\xe3o"}),(0,ON.jsx)(qO,{label:"Nome",value:a,onChange:e=>l(e.target.value),fullWidth:!0,margin:"normal"}),(0,ON.jsxs)(XR,{fullWidth:!0,margin:"normal",children:[(0,ON.jsx)(KR,{children:"Dispositivo"}),(0,ON.jsx)(FO,{value:c,onChange:e=>u(e.target.value),children:o.map((e=>(0,ON.jsx)(AD,{value:e.id,children:e.name},e.id)))})]}),(0,ON.jsxs)(XR,{fullWidth:!0,margin:"normal",children:[(0,ON.jsx)(KR,{children:"A\xe7\xe3o"}),(0,ON.jsxs)(FO,{value:d,onChange:e=>h(e.target.value),children:[(0,ON.jsx)(AD,{value:"Webhook",children:"Webhook"}),(0,ON.jsx)(AD,{value:"Notifica\xe7\xe3o",children:"Notifica\xe7\xe3o"}),(0,ON.jsx)(AD,{value:"Alerta",children:"Alerta de Emerg\xeancia"})]})]}),"Webhook"===d&&(0,ON.jsx)(qO,{label:"Webhook URL",value:f,onChange:e=>p(e.target.value),fullWidth:!0,margin:"normal"}),"Notifica\xe7\xe3o"===d&&(0,ON.jsx)(qO,{label:"Email para Notifica\xe7\xe3o",value:m,onChange:e=>g(e.target.value),fullWidth:!0,margin:"normal"}),(0,ON.jsx)(XR,{fullWidth:!0,margin:"normal",children:(0,ON.jsx)(mL,{control:(0,ON.jsx)(RL,{checked:v,onChange:e=>y(e.target.checked),color:"primary"}),label:v?"Ligado":"Desligado"})}),(0,ON.jsxs)(DP,{className:"modalActions",children:[(0,ON.jsx)(qL,{onClick:n,children:"Cancelar"}),i&&(0,ON.jsx)(qL,{variant:"contained",color:"secondary",onClick:()=>{null!==i&&void 0!==i&&i.id&&lN.collection("functions").doc(i.id).delete().then((()=>{n()}))},children:"Excluir"}),(0,ON.jsx)(qL,{variant:"contained",color:"primary",onClick:()=>{const e={name:a,device:c,action:d,webhookUrl:"Webhook"===d?f:"",notificationEmail:"Notifica\xe7\xe3o"===d?m:"",state:v};null!==i&&void 0!==i&&i.id?lN.collection("functions").doc(i.id).update(e).then((()=>{n()})):lN.collection("functions").add(e).then((()=>{n()}))},children:"Salvar"})]})]})})},WL=e=>{let{open:t,handleClose:n,deviceData:i}=e;const[o,s]=(0,r.useState)((null===i||void 0===i?void 0:i.name)||""),[a,l]=(0,r.useState)((null===i||void 0===i?void 0:i.state)||!1),[c,u]=(0,r.useState)((null===i||void 0===i?void 0:i.code)||""),d=localStorage.getItem("uid");(0,r.useEffect)((()=>{i&&(s(i.name||""),l(i.state||!1),u(i.code||""))}),[i]);return(0,ON.jsx)(EP,{open:t,onClose:n,children:(0,ON.jsxs)(DP,{className:"modalBox",children:[(0,ON.jsx)("h2",{className:"modalHeader",children:i?"Editar Dispositivo":"Adicionar Novo Dispositivo"}),(0,ON.jsx)(qO,{label:"Nome",value:o,onChange:e=>s(e.target.value),fullWidth:!0,margin:"normal",required:!0}),!i&&(0,ON.jsx)(qO,{label:"C\xf3digo",value:c,onChange:e=>u(e.target.value),fullWidth:!0,margin:"normal",required:!0}),(0,ON.jsx)(XR,{fullWidth:!0,margin:"normal",children:(0,ON.jsx)(mL,{control:(0,ON.jsx)(RL,{checked:a,onChange:e=>l(e.target.checked),color:"primary"}),label:a?"Ligado":"Desligado"})}),(0,ON.jsxs)(DP,{className:"modalActions",children:[(0,ON.jsx)(qL,{onClick:n,children:"Cancelar"}),(null===i||void 0===i?void 0:i.id)&&(0,ON.jsx)(qL,{variant:"contained",color:"secondary",onClick:async()=>{try{if(null!==i&&void 0!==i&&i.id){let e=i.usersData||[],t=i.uids||[];e=e.filter((e=>e.uid!==d)),t=t.filter((e=>e!==d)),await lN.collection("devices").doc(i.id).update({usersData:e,uids:t}),n()}}catch(WS){alert("Ocorreu um erro ao remover o usu\xe1rio do dispositivo: "+WS.message)}},children:"Excluir"}),(0,ON.jsx)(qL,{variant:"contained",color:"primary",onClick:async()=>{if(!o)return void alert("O campo Nome \xe9 obrigat\xf3rio.");if(!c&&!i)return void alert("O campo C\xf3digo \xe9 obrigat\xf3rio.");try{if(null!==i&&void 0!==i&&i.id){let e=i.usersData||[],t=i.uids||[];const n=e.findIndex((e=>e.uid===d)),r=t.includes(d);-1!==n?e[n].name=o:e.push({uid:d,name:o}),r||t.push(d),await lN.collection("devices").doc(i.id).update({usersData:e,uids:t})}else{const e=await lN.collection("devices").where("code","==",c).where("uids","array-contains",d).get(),t=await lN.collection("devices").where("code","==",c).get();if(t.empty&&e.empty)alert("O c\xf3digo inserido \xe9 inexistente.");else{const n=t.empty?e.docs[0]:t.docs[0],r=n.id;let i=n.data().usersData||[],s=n.data().uids||[];const a=i.some((e=>e.uid===d)),l=s.includes(d);a||i.push({uid:d,name:o}),l||s.push(d),await lN.collection("devices").doc(r).update({usersData:i,uids:s})}}n()}catch(WS){alert("Ocorreu um erro ao salvar o dispositivo: "+WS.message)}},children:"Salvar"})]})]})})};const HL=function(){const e=ee(),t=J(),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null);return(0,ON.jsxs)("div",{className:"addEvent",children:[(0,ON.jsx)("button",{className:"btnCircle Dow",onClick:function(){e("/home")},children:(0,ON.jsx)("i",{className:"fas fa-home"})}),(0,ON.jsx)("button",{className:"btnCircle",onClick:function(){e("/scene")},children:(0,ON.jsx)("i",{className:"fas fa-cube"})}),(0,ON.jsx)("button",{className:"btnCircle Plus",onClick:()=>{"/scene"===t.pathname?i(!0):s(!0)},children:(0,ON.jsx)("i",{className:"fas fa-plus"})}),(0,ON.jsx)("button",{className:"btnCircle",onClick:function(){e("/profile")},children:(0,ON.jsx)("i",{className:"fas fa-user"})}),(0,ON.jsx)("button",{className:"btnCircle Dow",onClick:function(){localStorage.clear(),e("/")},children:(0,ON.jsx)("i",{className:"fas fa-sign-out-alt"})}),(0,ON.jsx)(ZL,{open:n,handleClose:()=>{i(!1)}}),(0,ON.jsx)(WL,{open:o,handleClose:()=>{s(!1)},deviceData:a})]})},KL=n.p+"static/media/userUnknow.a6143582309785dca610.png";const GL=function(){const[e,t]=(0,r.useState)({}),n=ee();return(0,r.useEffect)((()=>{!async function(){const e=localStorage.getItem("authTime");if(!e)return void n("/");const t=(new Date).getTime()-parseInt(e,10);if(t>108e5)n("/")}()}),[]),(0,r.useEffect)((()=>{const e=(()=>{const e=localStorage.getItem("email");return lN.collection("users").where("email","==",e).onSnapshot((e=>{if(!e.empty){const n=e.docs[0].data(),r=e.docs[0].id;t({id:r,...n})}}))})();return()=>{e()}}),[]),e.admin&&localStorage.setItem("admin",e.admin),(0,ON.jsxs)("div",{className:"profilePage",children:[(0,ON.jsxs)("div",{className:"containerHome",children:[(0,ON.jsxs)("div",{className:"profileImage",style:{position:"relative",display:"inline-block"},children:[(0,ON.jsx)("img",{src:e.img?e.img:KL,alt:"Profile",className:"profileImg"}),(0,ON.jsx)("button",{className:"configButton",onClick:function(){localStorage.removeItem("editUser"),n("/profileEdit")},children:(0,ON.jsx)("i",{className:"fas fa-cog"})})]}),(0,ON.jsx)("h2",{className:"functionLabel",children:e.name?e.name:"Nome Indefinido"})]}),(0,ON.jsx)("div",{className:"containerHome",children:(0,ON.jsxs)("div",{className:"Card",children:[(0,ON.jsx)("input",{type:"text",placeholder:"Email:",value:e.email?e.email:"Email Indefinido",readOnly:!0}),(0,ON.jsx)("input",{type:"text",placeholder:"Nome:",value:e.address?e.address:"Endere\xe7o Indefinido",readOnly:!0}),(0,ON.jsx)("input",{type:"text",placeholder:"Nome:",value:e.city?e.city:"Cidade Indefinido",readOnly:!0}),(0,ON.jsx)("input",{type:"text",placeholder:"Nome:",value:e.state?e.state:"Estado Indefinido",readOnly:!0}),(0,ON.jsx)("input",{type:"text",placeholder:"Nome:",value:e.country?e.country:"Pais Indefinido",readOnly:!0})]})})]})},QL=e=>{let{status:t,label:n,readOnly:r,id:i,onToggle:o}=e;return(0,ON.jsx)("div",{className:"switch-container",children:(0,ON.jsxs)("label",{className:"switch-label",children:[(0,ON.jsx)("label",{className:"switch-label",children:n}),(0,ON.jsx)("input",{type:"checkbox",checked:t,onChange:()=>o(i,!t),className:"switch-input",disabled:r}),(0,ON.jsx)("span",{className:"switch-slider"})]})})};var YL=n(3047);const $L=function(){const[e,t]=(0,r.useState)({}),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),d=ee();return(0,r.useEffect)((()=>{!async function(){const e=localStorage.getItem("authTime");if(!e)return void d("/");const t=(new Date).getTime()-parseInt(e,10);if(t>108e5)d("/")}()}),[]),(0,r.useEffect)((()=>{const e=(()=>{const e=localStorage.getItem("email");return lN.collection("users").where("email","==",e).onSnapshot((e=>{if(!e.empty){const n=e.docs[0].data(),r=e.docs[0].id;t({id:r,...n})}}))})();return()=>{e()}}),[]),(0,r.useEffect)((()=>{const e=(()=>{const e=localStorage.getItem("uid");return lN.collection("devices").where("uids","array-contains",e).onSnapshot((t=>{const n=t.docs.map((t=>{const n=t.data(),r=n.usersData.find((t=>t.uid===e));return{id:t.id,...n,name:r?r.name:null}})).filter((e=>null!==e.name));i(n)}))})();return()=>{e()}}),[]),(0,r.useEffect)((()=>{if(n.length>0){const e=n.reduce(((e,t)=>(e[t.id]=t.name,e)),{}),t=()=>lN.collection("functions").where("device","in",Object.keys(e)).onSnapshot((t=>{const n=t.docs.map((t=>{const n=t.data();return{id:t.id,...n,device:e[n.device],deviceId:n.device}}));s(n)})),r=t();return()=>{r()}}}),[n]),e.admin&&localStorage.setItem("admin",e.admin),(0,ON.jsxs)("div",{className:"scenePage",children:[(0,ON.jsx)("div",{className:"containerscene",children:(0,ON.jsx)("div",{className:"functionGrid",children:o.map((e=>(0,ON.jsxs)("div",{className:"functionCard",onClick:()=>(e=>{u(e),l(!0)})(e),children:[(0,ON.jsx)(YL.Z,{className:"functionIcon"}),(0,ON.jsx)("div",{className:"boxSwitch",children:(0,ON.jsx)(QL,{id:e.id,status:e.state,label:"",readOnly:!0})}),(0,ON.jsx)("div",{className:"functionName",children:(0,ON.jsx)("p",{children:e.name})}),(0,ON.jsxs)("div",{className:"textFunction",children:["\u2699\ufe0f : ",e.device]}),(0,ON.jsxs)("div",{className:"textFunction",children:["\u26a1\ufe0f : ",e.action]})]},e.id)))})}),a&&(0,ON.jsx)(ZL,{open:a,handleClose:()=>{l(!1),u(null)},functionData:c})]})};const JL=function(){const[e,t]=(0,r.useState)({}),[n,i]=(0,r.useState)({name:"",email:"",address:"",city:"",state:"",country:""}),[o,s]=(0,r.useState)(!1),a=ee();(0,r.useEffect)((()=>{!async function(){const e=localStorage.getItem("authTime");if(!e)return void a("/");const n=(new Date).getTime()-parseInt(e,10);if(n>108e5)return void a("/");const r=localStorage.getItem("email");try{const e=localStorage.getItem("editUser");let n;n=e?await lN.collection("users").where("email","==",e).get():await lN.collection("users").where("email","==",r).get(),n.empty||n.forEach((e=>{const n=e.data();t({id:e.id,...n}),i({address:n.address||"",city:n.city||"",state:n.state||"",country:n.country||"",name:n.name||"",email:n.email||""})}))}catch(WS){console.error("Erro ao recuperar informa\xe7\xf5es do usu\xe1rio do Firestore:",WS)}}()}),[]);const l=e=>{const{name:t,value:r}=e.target;i({...n,[t]:r})};return(0,ON.jsxs)("div",{className:"ProfilePageEdit",children:[(0,ON.jsxs)("div",{className:"containerProfile",children:[(0,ON.jsxs)("div",{className:"profileImage",onClick:()=>{window.confirm("Deseja trocar a foto de perfil?")&&document.getElementById("fileInput").click()},style:{position:"relative",display:"inline-block"},children:[(0,ON.jsx)("img",{src:e.img?e.img:KL,alt:"Profile",className:"profileImg"}),(0,ON.jsx)("button",{className:"configButton",children:(0,ON.jsx)("i",{className:"fas fa-pencil-alt"})})]}),o&&(0,ON.jsx)("div",{className:"loadingOverlay",children:"Carregando..."}),(0,ON.jsx)("input",{className:"inputFunction",type:"text",name:"name",placeholder:"Nome:",value:n.name,onChange:l}),(0,ON.jsx)("input",{id:"fileInput",type:"file",onChange:async n=>{const r=n.target.files[0];if(r){s(!0);const n=uN.ref().child("users/".concat(r.name));await n.put(r);const i=await n.getDownloadURL();await lN.collection("users").doc(e.id).update({img:i}),s(!1),t((e=>({...e,img:i})))}},style:{display:"none"}})]}),(0,ON.jsx)("div",{className:"containerProfile",children:(0,ON.jsxs)("div",{className:"profileCard",children:[(0,ON.jsx)("input",{className:"inputText",type:"text",name:"email",placeholder:"Email:",value:n.email,onChange:l}),(0,ON.jsx)("input",{className:"inputText",type:"text",name:"address",placeholder:"Endere\xe7o:",value:n.address,onChange:l}),(0,ON.jsx)("input",{className:"inputText",type:"text",name:"city",placeholder:"Cidade:",value:n.city,onChange:l}),(0,ON.jsx)("input",{className:"inputText",type:"text",name:"state",placeholder:"Estado:",value:n.state,onChange:l}),(0,ON.jsx)("input",{className:"inputText",type:"text",name:"country",placeholder:"Pais:",value:n.country,onChange:l}),(0,ON.jsx)("button",{className:"buttonMissions",onClick:async()=>{try{await lN.collection("users").doc(e.id).update({address:n.address,city:n.city,state:n.state,country:n.country,name:n.name,email:n.email}),console.log("Informa\xe7\xf5es do usu\xe1rio atualizadas com sucesso."),localStorage.removeItem("editUser"),a(-1)}catch(WS){console.error("Erro ao atualizar informa\xe7\xf5es do usu\xe1rio ou mensagem do administrador:",WS)}},disabled:o,children:(0,ON.jsx)("h2",{children:"Editar"})})]})})]})},XL=n.p+"static/media/logo.8b05cf658978c48e21b7.png";const eM=function(){const[e,t]=(0,r.useState)("");return(0,ON.jsxs)("div",{id:"ForgotPasswordForm",children:[(0,ON.jsx)("a",{className:"resetPass",children:"Para recuperar a senha atrav\xe9s do Email de Redefini\xe7\xe3o de Senha, informe o email cadastrado e pressione o bot\xe3o"}),(0,ON.jsx)("input",{className:"inputLogin",type:"email",id:"EmailUser",placeholder:"Seu E-mail",value:e,onChange:e=>t(e.target.value),required:!0}),(0,ON.jsx)("div",{className:"boxButton",children:(0,ON.jsx)("button",{className:"btnAuth",onClick:async t=>{t.preventDefault();try{await co(aN,e),alert("Um e-mail de redefini\xe7\xe3o de senha foi enviado para o seu endere\xe7o de e-mail.")}catch(WS){alert("Erro ao enviar e-mail de redefini\xe7\xe3o de senha: ".concat(WS.message))}},children:"Enviar E-mail"})})]})};const tM=function(){const[e,t]=(0,r.useState)("login"),n=ee(),i=e=>{n("/")};return(0,ON.jsxs)("div",{className:"Auth",children:[(0,ON.jsx)("div",{className:"containerAuth",children:(0,ON.jsx)("img",{src:XL,className:"LogoJA"})}),(0,ON.jsx)("div",{className:"containerAuth",children:(0,ON.jsxs)("div",{className:"container",children:[(0,ON.jsxs)("div",{className:"sliderLogin",children:[(0,ON.jsx)("div",{className:"switch ".concat("login"===e?"active":""),onClick:()=>i(),children:"Logar"}),(0,ON.jsx)("div",{className:"switch ".concat("register"===e?"active":""),onClick:()=>i(),children:"Registrar"})]}),(0,ON.jsx)(eM,{})]})})]})};const nM=function(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(!1),a=ee();return(0,ON.jsxs)("div",{id:"loginForm",children:[(0,ON.jsx)("input",{className:"inputLogin",type:"email",id:"email",placeholder:"Entrar com email",value:e,onChange:e=>t(e.target.value),required:!0}),(0,ON.jsxs)("div",{className:"password-container",children:[(0,ON.jsx)("input",{className:"inputLogin",type:o?"text":"password",id:"password",placeholder:"Senha",value:n,onChange:e=>i(e.target.value),required:!0}),(0,ON.jsx)("span",{className:"toggle-password",onClick:()=>{s(!o)},children:o?(0,ON.jsx)("i",{className:"fas fa-eye-slash"}):(0,ON.jsx)("i",{className:"fas fa-eye"})})]}),(0,ON.jsx)("a",{className:"resetPass",onClick:()=>{a("/forgotPassword")},children:"Esqueceu sua senha?"}),(0,ON.jsx)("div",{className:"boxButton",children:(0,ON.jsx)("button",{className:"btnAuth",onClick:async()=>{try{const t=(await po(aN,e,n)).user;localStorage.setItem("authTime",(new Date).getTime().toString()),localStorage.setItem("email",e),localStorage.setItem("uid",t.uid),console.log("Usu\xe1rio logado:",t),a("/home")}catch(WS){const t=WS.code,n=WS.message;console.error("Erro no login:",t,n)}},children:"Log In"})})]})};const rM=function(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),c=()=>{t(!e)};return(0,ON.jsxs)("div",{id:"RegisterForm",children:[(0,ON.jsx)("input",{className:"inputLogin",type:"text",id:"NameUser",placeholder:"Nome do Usu\xe1rio",value:n,onChange:e=>i(e.target.value),required:!0}),(0,ON.jsx)("input",{className:"inputLogin",type:"email",id:"EmailUser",placeholder:"E-mail",value:o,onChange:e=>s(e.target.value),required:!0}),(0,ON.jsxs)("div",{className:"password-container",children:[(0,ON.jsx)("input",{className:"inputLogin",type:e?"text":"password",id:"password",placeholder:"Crie uma Senha",value:a,onChange:e=>l(e.target.value),required:!0}),(0,ON.jsx)("span",{className:"toggle-password",onClick:c,children:e?(0,ON.jsx)("i",{className:"fas fa-eye-slash"}):(0,ON.jsx)("i",{className:"fas fa-eye"})})]}),(0,ON.jsxs)("div",{className:"password-container",children:[(0,ON.jsx)("input",{className:"inputLogin",type:e?"text":"password",id:"confirmPassword",placeholder:"Confirme a sua Senha",required:!0}),(0,ON.jsx)("span",{className:"toggle-password",onClick:c,children:e?(0,ON.jsx)("i",{className:"fas fa-eye-slash"}):(0,ON.jsx)("i",{className:"fas fa-eye"})})]}),(0,ON.jsx)("div",{className:"boxButton",children:(0,ON.jsx)("button",{className:"btnAuth",onClick:async e=>{e.preventDefault();try{await fo(aN,o,a);await nb(Oy(lN,"users"),{email:o,name:n,status:!1}),alert("Usu\xe1rio cadastrado com sucesso!"),window.location.reload()}catch(WS){alert("Erro no cadastro: ".concat(WS.message))}},children:"Cadastrar"})})]})};const iM=function(){const[e,t]=(0,r.useState)("login"),n=ee();(0,r.useEffect)((()=>{!async function(){const e=localStorage.getItem("authTime");if(!e)return void n("/");const t=(new Date).getTime()-parseInt(e,10);if(t>108e5)n("/")}()}),[]);const i=e=>{t(e)};return(0,ON.jsxs)("div",{className:"Auth",children:[(0,ON.jsx)("div",{className:"containerAuth",children:(0,ON.jsx)("img",{src:XL,className:"LogoJA"})}),(0,ON.jsx)("div",{className:"containerAuth",children:(0,ON.jsxs)("div",{className:"container",children:[(0,ON.jsxs)("div",{className:"sliderLogin",children:[(0,ON.jsx)("div",{className:"switch ".concat("login"===e?"active":""),onClick:()=>i("login"),children:"Logar"}),(0,ON.jsx)("div",{className:"switch ".concat("register"===e?"active":""),onClick:()=>i("register"),children:"Registrar"})]}),"login"===e?(0,ON.jsx)(nM,{}):(0,ON.jsx)(rM,{})]})})]})};var oM=n(234);const sM=function(){const[e,t]=(0,r.useState)({}),[n,i]=(0,r.useState)([]),[o,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null),c=(localStorage.getItem("uid"),ee());(0,r.useEffect)((()=>{!async function(){const e=localStorage.getItem("authTime");if(!e)return void c("/");const t=(new Date).getTime()-parseInt(e,10);if(t>108e5)c("/")}()}),[]),(0,r.useEffect)((()=>{const e=(()=>{const e=localStorage.getItem("email");return lN.collection("users").where("email","==",e).onSnapshot((e=>{if(!e.empty){const n=e.docs[0].data(),r=e.docs[0].id;t({id:r,...n})}}))})();return()=>{e()}}),[]),(0,r.useEffect)((()=>{const e=(()=>{const e=localStorage.getItem("uid");return lN.collection("devices").where("uids","array-contains",e).onSnapshot((t=>{const n=t.docs.map((t=>{const n=t.data(),r=n.usersData.find((t=>t.uid===e));return{id:t.id,...n,name:r?r.name:null}})).filter((e=>null!==e.name));i(n)}))})();return()=>{e()}}),[]),e.admin&&localStorage.setItem("admin",e.admin);const u=(e,t)=>{lN.collection("devices").doc(e).update({state:t})},d=e=>{l(e||{name:"",state:!1,id:null}),s(!0)};return(0,ON.jsxs)("div",{className:"homePage",children:[(0,ON.jsx)("div",{className:"containerHome",children:(0,ON.jsx)("div",{className:"deviceGrid",children:n.map((e=>(0,ON.jsx)("div",{children:(0,ON.jsxs)("div",{className:"deviceCard",children:[(0,ON.jsx)(oM.Z,{className:"deviceIcon",onClick:()=>d(e)},e.id),(0,ON.jsx)("div",{className:"boxSwitch",children:(0,ON.jsx)(QL,{id:e.id,status:e.state,label:"",onToggle:u})}),(0,ON.jsx)("div",{className:"deviceName",onClick:()=>d(e),children:e.name},e.id)]})})))})}),(0,ON.jsx)(WL,{open:o,handleClose:()=>{s(!1)},deviceData:a,currentUser:e})]})},aM=()=>{const[e,t]=(0,r.useState)([]),[i,o]=(0,r.useState)(0);(0,r.useEffect)((()=>{const e=(r=n(188)).keys().map(r);var r;t(e);const i=cN.ref("slide");return i.on("value",(e=>{const t=e.val();null!==t&&o(t)})),()=>{i.off("value")}}),[]),(0,r.useEffect)((()=>{cN.ref("slide").set(i)}),[i]);const s=()=>{o((e=>0===e?0:e-1))},a=()=>{o((t=>t===e.length-1?e.length-1:t+1))};(0,r.useEffect)((()=>{const e=e=>{switch(e.key){case"ArrowLeft":s();break;case"ArrowRight":a()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[s,a]);return(0,ON.jsxs)("div",{className:"slideshow",children:[(0,ON.jsx)("button",{className:"floating-button left",onClick:s,children:(0,ON.jsx)("i",{className:"fas fa-arrow-left"})}),(0,ON.jsx)("img",{src:e[i],alt:"Slide ".concat(i+1)}),(0,ON.jsx)("button",{className:"floating-button right",onClick:a,children:(0,ON.jsx)("i",{className:"fas fa-arrow-right"})}),(0,ON.jsx)("button",{className:"floating-button expand",onClick:()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},children:(0,ON.jsx)("i",{className:"fas fa-expand"})})]})};function lM(){const e=J();return(0,ON.jsxs)(r.Fragment,{children:[(0,ON.jsxs)(me,{children:[(0,ON.jsx)(fe,{path:"/home",element:(0,ON.jsx)(sM,{})}),(0,ON.jsx)(fe,{path:"/profile",element:(0,ON.jsx)(GL,{})}),(0,ON.jsx)(fe,{path:"/scene",element:(0,ON.jsx)($L,{})}),(0,ON.jsx)(fe,{path:"/profileEdit",element:(0,ON.jsx)(JL,{})}),(0,ON.jsx)(fe,{path:"/fogotPassword",element:(0,ON.jsx)(tM,{})}),(0,ON.jsx)(fe,{path:"/slides",element:(0,ON.jsx)(aM,{})}),(0,ON.jsx)(fe,{path:"/",element:(0,ON.jsx)(iM,{})})]}),"/auth"!==e.pathname&&"/fogotPassword"!==e.pathname&&"/slides"!==e.pathname&&"/"!==e.pathname&&(0,ON.jsx)(HL,{})]})}const cM=function(){return(0,ON.jsx)(ye,{children:(0,ON.jsx)(lM,{})})};o.createRoot(document.getElementById("root")).render((0,ON.jsx)(r.StrictMode,{children:(0,ON.jsx)(cM,{})}))})()})();
//# sourceMappingURL=main.04c6e93a.js.map